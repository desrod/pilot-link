<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pilot-link: src/pilot-getrom.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pilot-link
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('pilot-getrom_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">pilot-getrom.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;popt.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &quot;pi-header.h&quot;</code><br />
<code>#include &quot;pi-source.h&quot;</code><br />
<code>#include &quot;pi-syspkt.h&quot;</code><br />
<code>#include &quot;pi-dlp.h&quot;</code><br />
<code>#include &quot;pi-userland.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pilot-getrom.c:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c__incl.png" border="0" usemap="#asrc_2pilot-getrom_8c" alt=""/></div>
<map name="asrc_2pilot-getrom_8c" id="asrc_2pilot-getrom_8c">
<area shape="rect" title=" " alt="" coords="624,5,746,31"/>
<area shape="rect" title=" " alt="" coords="5,79,63,105"/>
<area shape="poly" title=" " alt="" coords="623,24,387,40,235,57,78,81,77,76,234,52,387,35,623,19"/>
<area shape="rect" title=" " alt="" coords="86,79,147,105"/>
<area shape="poly" title=" " alt="" coords="623,26,422,44,294,60,162,81,161,76,293,54,421,38,623,21"/>
<area shape="rect" title=" " alt="" coords="170,79,234,105"/>
<area shape="poly" title=" " alt="" coords="623,28,458,48,249,81,249,76,458,42,623,23"/>
<area shape="rect" title=" " alt="" coords="258,79,324,105"/>
<area shape="poly" title=" " alt="" coords="624,31,497,51,340,81,339,76,496,46,623,26"/>
<area shape="rect" title=" " alt="" coords="348,79,437,105"/>
<area shape="poly" title=" " alt="" coords="636,34,453,79,452,73,635,29"/>
<area shape="rect" title=" " alt="" coords="461,79,540,105"/>
<area shape="poly" title=" " alt="" coords="654,34,547,75,545,71,652,29"/>
<area shape="rect" title=" " alt="" coords="564,79,632,105"/>
<area shape="poly" title=" " alt="" coords="672,34,626,71,622,67,668,29"/>
<area shape="rect" title=" " alt="" coords="656,79,713,105"/>
<area shape="poly" title=" " alt="" coords="687,31,687,63,682,63,682,31"/>
<area shape="rect" title=" " alt="" coords="738,79,802,105"/>
<area shape="poly" title=" " alt="" coords="701,29,746,67,743,71,697,34"/>
<area shape="rect" title=" " alt="" coords="826,79,911,105"/>
<area shape="poly" title=" " alt="" coords="717,29,824,71,822,75,715,34"/>
<area shape="rect" title=" " alt="" coords="936,79,1020,105"/>
<area shape="poly" title=" " alt="" coords="735,29,921,74,920,79,734,34"/>
<area shape="rect" title=" " alt="" coords="1045,79,1130,105"/>
<area shape="poly" title=" " alt="" coords="747,27,1030,76,1029,81,746,32"/>
<area shape="rect" title=" " alt="" coords="1154,79,1239,105"/>
<area shape="poly" title=" " alt="" coords="747,23,919,44,1139,76,1139,81,919,49,746,29"/>
<area shape="rect" title=" " alt="" coords="1264,79,1327,105"/>
<area shape="poly" title=" " alt="" coords="747,20,965,38,1104,54,1249,76,1248,81,1104,59,964,43,746,26"/>
<area shape="rect" title=" " alt="" coords="1352,79,1447,105"/>
<area shape="poly" title=" " alt="" coords="746,20,1000,39,1165,55,1337,76,1336,81,1165,61,999,45,746,26"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c__dep__incl.png" border="0" usemap="#asrc_2pilot-getrom_8cdep" alt=""/></div>
<map name="asrc_2pilot-getrom_8cdep" id="asrc_2pilot-getrom_8cdep">
<area shape="rect" title=" " alt="" coords="87,5,209,31"/>
<area shape="rect" href="pilot-getram_8c.html" title=" " alt="" coords="5,79,128,105"/>
<area shape="poly" title=" " alt="" coords="124,43,82,81,78,77,121,39"/>
<area shape="rect" href="pilot-getromtoken_8c.html" title=" " alt="" coords="152,79,306,105"/>
<area shape="poly" title=" " alt="" coords="175,39,217,77,214,81,171,43"/>
</map>
</div>
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab9c800875296f23bd616d7d273ff16d7" id="r_ab9c800875296f23bd616d7d273ff16d7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9c800875296f23bd616d7d273ff16d7">DEFAULT_MODE</a>&#160;&#160;&#160;mode_getrom</td></tr>
<tr class="separator:ab9c800875296f23bd616d7d273ff16d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af9a73ae2eff1060ddfff730f812db4a2" id="r_af9a73ae2eff1060ddfff730f812db4a2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af9a73ae2eff1060ddfff730f812db4a2">check_romversion</a> (int <a class="el" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, plu_romversion_t *version)</td></tr>
<tr class="separator:af9a73ae2eff1060ddfff730f812db4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b6c113ebaaf096fa74c2e8949ea40c" id="r_a16b6c113ebaaf096fa74c2e8949ea40c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16b6c113ebaaf096fa74c2e8949ea40c">do_get_ram</a> (int <a class="el" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, const char *filename)</td></tr>
<tr class="separator:a16b6c113ebaaf096fa74c2e8949ea40c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8f79b16f99255230068f8d6d442136" id="r_a1d8f79b16f99255230068f8d6d442136"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d8f79b16f99255230068f8d6d442136">do_get_rom</a> (int <a class="el" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, const char *filename)</td></tr>
<tr class="separator:a1d8f79b16f99255230068f8d6d442136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17688563ba8ead826569674e97b1c1c7" id="r_a17688563ba8ead826569674e97b1c1c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17688563ba8ead826569674e97b1c1c7">do_get_token</a> (int <a class="el" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, const char *token)</td></tr>
<tr class="separator:a17688563ba8ead826569674e97b1c1c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1cbff6c9f48bc722a1d4fe5ed1fe97" id="r_a1c1cbff6c9f48bc722a1d4fe5ed1fe97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c1cbff6c9f48bc722a1d4fe5ed1fe97">do_sysinfo</a> (int <a class="el" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>)</td></tr>
<tr class="separator:a1c1cbff6c9f48bc722a1d4fe5ed1fe97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0f2228420376f4db7e1274f2b41667c" id="r_ac0f2228420376f4db7e1274f2b41667c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0f2228420376f4db7e1274f2b41667c">main</a> (int argc, const char *argv[])</td></tr>
<tr class="separator:ac0f2228420376f4db7e1274f2b41667c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9cb5ecf65cba7a6a236ab4ac254af4b" id="r_aa9cb5ecf65cba7a6a236ab4ac254af4b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9cb5ecf65cba7a6a236ab4ac254af4b">sighandler</a> (int signo)</td></tr>
<tr class="separator:aa9cb5ecf65cba7a6a236ab4ac254af4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a10d1322f531b82c4ee93422cee1684f4" id="r_a10d1322f531b82c4ee93422cee1684f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a> = 0</td></tr>
<tr class="separator:a10d1322f531b82c4ee93422cee1684f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab9c800875296f23bd616d7d273ff16d7" name="ab9c800875296f23bd616d7d273ff16d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9c800875296f23bd616d7d273ff16d7">&#9670;&#160;</a></span>DEFAULT_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MODE&#160;&#160;&#160;mode_getrom</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#l00391">main()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af9a73ae2eff1060ddfff730f812db4a2" name="af9a73ae2eff1060ddfff730f812db4a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9a73ae2eff1060ddfff730f812db4a2">&#9670;&#160;</a></span>check_romversion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_romversion </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">plu_romversion_t *</td>          <td class="paramname"><span class="paramname"><em>version</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   67</span>{</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="userland_8c.html#ae82e14b07cad44d7f86d1a3bffd28472">plu_getromversion</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,version) &lt; 0) {</div>
<div class="line"><span class="lineno">   70</span>        fprintf(stderr,<span class="stringliteral">&quot;   ERROR: Could not retrieve ROM version.\n&quot;</span>);</div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   72</span>    }</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    <span class="comment">/* OS5 devices no longer support RPC, and will crash if we try to call it */</span></div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordflow">if</span> ((version-&gt;major &gt;= 5)) {</div>
<div class="line"><span class="lineno">   76</span>        printf(<span class="stringliteral">&quot;   Unfortunately, Palm changed the underlying protocol used to fetch ROM\n&quot;</span></div>
<div class="line"><span class="lineno">   77</span>            <span class="stringliteral">&quot;   images from the handheld in a fatal way, and accessing them with these\n&quot;</span></div>
<div class="line"><span class="lineno">   78</span>            <span class="stringliteral">&quot;   tools will cause the Palm to crash.\n\n&quot;</span></div>
<div class="line"><span class="lineno">   79</span>            <span class="stringliteral">&quot;   Future versions of these tools may be updated to work around these\n&quot;</span></div>
<div class="line"><span class="lineno">   80</span>            <span class="stringliteral">&quot;   problems. For now, we&#39;d like to avoid crashing your device.\n\n&quot;</span>);</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">return</span> -2;</div>
<div class="line"><span class="lineno">   82</span>    }</div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   84</span>}</div>
<div class="ttc" id="apilot-xfer_8c_html_a06b0afe769d54ae94259d8532bc878b0"><div class="ttname"><a href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a></div><div class="ttdeci">int sd</div><div class="ttdef"><b>Definition</b> pilot-xfer.c:107</div></div>
<div class="ttc" id="auserland_8c_html_ae82e14b07cad44d7f86d1a3bffd28472"><div class="ttname"><a href="userland_8c.html#ae82e14b07cad44d7f86d1a3bffd28472">plu_getromversion</a></div><div class="ttdeci">int plu_getromversion(int sd, plu_romversion_t *d)</div><div class="ttdef"><b>Definition</b> userland.c:190</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00190">plu_getromversion()</a>, and <a class="el" href="#l00107">sd</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00214">do_get_ram()</a>, and <a class="el" href="#l00086">do_get_rom()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_cgraph.png" border="0" usemap="#apilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_cgraph" alt=""/></div>
<map name="apilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_cgraph" id="apilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,133,31"/>
<area shape="rect" href="userland_8c.html#ae82e14b07cad44d7f86d1a3bffd28472" title=" " alt="" coords="181,5,308,31"/>
<area shape="poly" title=" " alt="" coords="133,16,165,16,165,21,133,21"/>
<area shape="rect" href="utils_8c.html#ab6082d4f9037299df5eb93840d48393b" title=" " alt="" coords="356,5,433,31"/>
<area shape="poly" title=" " alt="" coords="308,16,340,16,340,21,308,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_icgraph.png" border="0" usemap="#apilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_icgraph" alt=""/></div>
<map name="apilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_icgraph" id="apilot-getrom_8c_af9a73ae2eff1060ddfff730f812db4a2_icgraph">
<area shape="rect" title=" " alt="" coords="240,31,367,56"/>
<area shape="rect" href="pilot-getrom_8c.html#a16b6c113ebaaf096fa74c2e8949ea40c" title=" " alt="" coords="103,5,192,31"/>
<area shape="poly" title=" " alt="" coords="224,33,192,28,193,23,225,28"/>
<area shape="rect" href="pilot-getrom_8c.html#a1d8f79b16f99255230068f8d6d442136" title=" " alt="" coords="103,55,192,80"/>
<area shape="poly" title=" " alt="" coords="225,58,193,63,192,58,224,53"/>
<area shape="rect" href="pilot-getrom_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="5,31,55,56"/>
<area shape="poly" title=" " alt="" coords="88,34,55,41,54,36,87,28"/>
<area shape="poly" title=" " alt="" coords="87,58,54,51,55,46,88,53"/>
</map>
</div>

</div>
</div>
<a id="a16b6c113ebaaf096fa74c2e8949ea40c" name="a16b6c113ebaaf096fa74c2e8949ea40c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b6c113ebaaf096fa74c2e8949ea40c">&#9670;&#160;</a></span>do_get_ram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_get_ram </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  215</span>{</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordtype">char</span>    <a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>[256],</div>
<div class="line"><span class="lineno">  217</span>        print[256];</div>
<div class="line"><span class="lineno">  218</span>    time_t  start = time(NULL), end;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <span class="keyword">struct  </span>RPC_params p;</div>
<div class="line"><span class="lineno">  221</span>    plu_romversion_t version;</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> SRAMstart, SRAMlength, offset, left;</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordtype">int</span> i,</div>
<div class="line"><span class="lineno">  226</span>        file = -1,</div>
<div class="line"><span class="lineno">  227</span>        j,</div>
<div class="line"><span class="lineno">  228</span>        timespent   = 0;</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>    <span class="comment">/* Tell user (via Palm) that we are starting things up */</span></div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_function" href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b">dlp_OpenConduit</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>);</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#af9a73ae2eff1060ddfff730f812db4a2">check_romversion</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;version) &lt; 0) {</div>
<div class="line"><span class="lineno">  234</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  235</span>    }</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA23D, RPC_IntReply, RPC_Long(0xFFFFFFFE), RPC_End);</div>
<div class="line"><span class="lineno">  238</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, &amp;SRAMstart);</div>
<div class="line"><span class="lineno">  239</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA23D, RPC_IntReply, RPC_Long(SRAMstart), RPC_End);</div>
<div class="line"><span class="lineno">  240</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, &amp;SRAMlength);</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    snprintf(<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>),<span class="stringliteral">&quot;%s%s.ram&quot;</span>,</div>
<div class="line"><span class="lineno">  243</span>        (filename ? filename : <span class="stringliteral">&quot;pilot-&quot;</span>),</div>
<div class="line"><span class="lineno">  244</span>        version.<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="plu__args_8c.html#a1a6d0a9c086a2017365a2a0a182fe5e2">plu_quiet</a>) {</div>
<div class="line"><span class="lineno">  247</span>        printf(<span class="stringliteral">&quot;   Generating %s\n&quot;</span>, <a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div>
<div class="line"><span class="lineno">  248</span>    }</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    file = open(<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, O_RDWR | O_CREAT, S_IRUSR | S_IWUSR);</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>    offset = lseek(file, 0, SEEK_END);</div>
<div class="line"><span class="lineno">  253</span>    offset &amp;= ~255;</div>
<div class="line"><span class="lineno">  254</span>    lseek(file, offset, SEEK_SET);</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA164, RPC_IntReply, RPC_Byte(1), RPC_End);</div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    sprintf(print, <span class="stringliteral">&quot;Downloading byte %ld&quot;</span>, offset);</div>
<div class="line"><span class="lineno">  260</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA220, RPC_IntReply, RPC_Ptr(print, strlen(print)),</div>
<div class="line"><span class="lineno">  261</span>        RPC_Short(strlen(print)), RPC_Short(0), RPC_Short(28),</div>
<div class="line"><span class="lineno">  262</span>        RPC_End);</div>
<div class="line"><span class="lineno">  263</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  266</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA026, RPC_IntReply, RPC_LongPtr(&amp;penPtr),</div>
<div class="line"><span class="lineno">  267</span>        RPC_Long(364), RPC_Long(4), RPC_End);</div>
<div class="line"><span class="lineno">  268</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>    printf(<span class="stringliteral">&quot;penPtr = %lu (%8.8lX)\n&quot;</span>, penPtr, penPtr);</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA026, RPC_IntReply, RPC_Ptr(print, 8),</div>
<div class="line"><span class="lineno">  273</span>        RPC_Long(penPtr), RPC_Long(8), RPC_End);</div>
<div class="line"><span class="lineno">  274</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  275</span>    <a class="code hl_function" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9">pi_dumpdata</a>(print, 8);</div>
<div class="line"><span class="lineno">  276</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>    signal(SIGINT, <a class="code hl_function" href="#aa9cb5ecf65cba7a6a236ab4ac254af4b">sighandler</a>);</div>
<div class="line"><span class="lineno">  279</span>    left    = SRAMlength - offset;</div>
<div class="line"><span class="lineno">  280</span>    i   = offset;</div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">while</span> (left &gt; 0) {</div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordtype">int</span>     len     = left;</div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordtype">char</span>    <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>[256];</div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordtype">double</span>  perc    = ((double) offset / SRAMlength) * 100.0;</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">if</span> (len &gt; 256)</div>
<div class="line"><span class="lineno">  287</span>            len = 256;</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="plu__args_8c.html#a1a6d0a9c086a2017365a2a0a182fe5e2">plu_quiet</a>) {</div>
<div class="line"><span class="lineno">  290</span>                    printf(<span class="stringliteral">&quot;\r   %ld of %ld bytes (%.2f%%)&quot;</span>, offset, SRAMlength, perc);</div>
<div class="line"><span class="lineno">  291</span>        }</div>
<div class="line"><span class="lineno">  292</span>        fflush(stdout);</div>
<div class="line"><span class="lineno">  293</span>        <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA026, RPC_IntReply, RPC_Ptr(<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, len),</div>
<div class="line"><span class="lineno">  294</span>            RPC_Long(offset + SRAMstart), RPC_Long(len),</div>
<div class="line"><span class="lineno">  295</span>            RPC_End);</div>
<div class="line"><span class="lineno">  296</span>        <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  297</span>        left -= len;</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>        <span class="comment">/* If the buffer only contains zeros, skip instead of</span></div>
<div class="line"><span class="lineno">  300</span><span class="comment">           writing, so that the file will be holey. */</span></div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordflow">for</span> (j = 0; j &lt; len; j++)</div>
<div class="line"><span class="lineno">  302</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>[j])</div>
<div class="line"><span class="lineno">  303</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  304</span>        <span class="keywordflow">if</span> (j == len)</div>
<div class="line"><span class="lineno">  305</span>            lseek(file, len, SEEK_CUR);</div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  307</span>            write(file, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, len);</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>        offset += len;</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a> || !(i++ % 4))</div>
<div class="line"><span class="lineno">  311</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a> || (<a class="code hl_function" href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b">dlp_OpenConduit</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>) &lt; 0)) {</div>
<div class="line"><span class="lineno">  312</span>                printf(<span class="stringliteral">&quot;\n   Operation cancelled!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  313</span>                <a class="code hl_function" href="dlp_8c.html#a9cac32ae742584335d86a9fcec40631a">dlp_AddSyncLogEntry</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, <span class="stringliteral">&quot;\npilot-getrom ended unexpectedly.\n&quot;</span></div>
<div class="line"><span class="lineno">  314</span>                            <span class="stringliteral">&quot;Entire RAM was not fetched.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  315</span>                <span class="keywordflow">goto</span> <a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a>;</div>
<div class="line"><span class="lineno">  316</span>            }</div>
<div class="line"><span class="lineno">  317</span>        <span class="keywordflow">if</span> (!(i % 8)) {</div>
<div class="line"><span class="lineno">  318</span>            sprintf(print, <span class="stringliteral">&quot;%ld&quot;</span>, offset);</div>
<div class="line"><span class="lineno">  319</span>            <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA220, RPC_IntReply,</div>
<div class="line"><span class="lineno">  320</span>                RPC_Ptr(print, strlen(print)),</div>
<div class="line"><span class="lineno">  321</span>                RPC_Short(strlen(print)), RPC_Short(92),</div>
<div class="line"><span class="lineno">  322</span>                RPC_Short(28), RPC_End);</div>
<div class="line"><span class="lineno">  323</span>            <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  324</span>        }</div>
<div class="line"><span class="lineno">  325</span>    }</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    end = time(NULL);</div>
<div class="line"><span class="lineno">  328</span>        timespent = (end-start);</div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="plu__args_8c.html#a1a6d0a9c086a2017365a2a0a182fe5e2">plu_quiet</a>) {</div>
<div class="line"><span class="lineno">  330</span>        printf(<span class="stringliteral">&quot;   RAM fetch complete\n&quot;</span>);</div>
<div class="line"><span class="lineno">  331</span>        printf(<span class="stringliteral">&quot;   RAM fetched in: %d:%02d:%02d\n&quot;</span>,timespent/3600, (timespent/60)%60, timespent%60);</div>
<div class="line"><span class="lineno">  332</span>    }</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span><a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a>:</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">if</span> (file &gt;=0) {</div>
<div class="line"><span class="lineno">  336</span>        close(file);</div>
<div class="line"><span class="lineno">  337</span>    }</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  339</span>}</div>
<div class="ttc" id="adebug_8c_html_ac942525fcc03cc9c77dfe0628ade03b9"><div class="ttname"><a href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9">pi_dumpdata</a></div><div class="ttdeci">void pi_dumpdata(const char *buf, size_t len)</div><div class="ttdef"><b>Definition</b> debug.c:222</div></div>
<div class="ttc" id="adlp_8c_html_a9cac32ae742584335d86a9fcec40631a"><div class="ttname"><a href="dlp_8c.html#a9cac32ae742584335d86a9fcec40631a">dlp_AddSyncLogEntry</a></div><div class="ttdeci">int dlp_AddSyncLogEntry(int sd, char *entry)</div><div class="ttdef"><b>Definition</b> dlp.c:1746</div></div>
<div class="ttc" id="adlp_8c_html_ae7892afecc1f271dac5596703412a63b"><div class="ttname"><a href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b">dlp_OpenConduit</a></div><div class="ttdeci">int dlp_OpenConduit(int sd)</div><div class="ttdef"><b>Definition</b> dlp.c:1880</div></div>
<div class="ttc" id="apilot-debug_8c_html_a0ab27356885000c0b9430ce5f9b4a4ec"><div class="ttname"><a href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a></div><div class="ttdeci">unsigned char buffer[0xffff]</div><div class="ttdef"><b>Definition</b> pilot-debug.c:767</div></div>
<div class="ttc" id="apilot-debug_8c_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition</b> pilot-debug.c:1566</div></div>
<div class="ttc" id="apilot-getrom_8c_html_a10d1322f531b82c4ee93422cee1684f4"><div class="ttname"><a href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a></div><div class="ttdeci">int cancel</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:52</div></div>
<div class="ttc" id="apilot-getrom_8c_html_aa9cb5ecf65cba7a6a236ab4ac254af4b"><div class="ttname"><a href="#aa9cb5ecf65cba7a6a236ab4ac254af4b">sighandler</a></div><div class="ttdeci">static void sighandler(int signo)</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:54</div></div>
<div class="ttc" id="apilot-getrom_8c_html_af9a73ae2eff1060ddfff730f812db4a2"><div class="ttname"><a href="#af9a73ae2eff1060ddfff730f812db4a2">check_romversion</a></div><div class="ttdeci">static int check_romversion(int sd, plu_romversion_t *version)</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:66</div></div>
<div class="ttc" id="aplu__args_8c_html_a1a6d0a9c086a2017365a2a0a182fe5e2"><div class="ttname"><a href="plu__args_8c.html#a1a6d0a9c086a2017365a2a0a182fe5e2">plu_quiet</a></div><div class="ttdeci">int plu_quiet</div><div class="ttdef"><b>Definition</b> plu_args.c:33</div></div>
<div class="ttc" id="asyspkt_8c_html_a8d9588d3d9c10a6470f60ec1158319ec"><div class="ttname"><a href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a></div><div class="ttdeci">int PackRPC(struct RPC_params *p, int trap, int reply,...)</div><div class="ttdef"><b>Definition</b> syspkt.c:835</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00767">buffer</a>, <a class="el" href="#l00052">cancel</a>, <a class="el" href="#l00066">check_romversion()</a>, <a class="el" href="#l01746">dlp_AddSyncLogEntry()</a>, <a class="el" href="#l01880">dlp_OpenConduit()</a>, <a class="el" href="#l01566">name</a>, <a class="el" href="#l00835">PackRPC()</a>, <a class="el" href="#l00222">pi_dumpdata()</a>, <a class="el" href="#l00033">plu_quiet</a>, <a class="el" href="#l00107">sd</a>, and <a class="el" href="#l00054">sighandler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00391">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_cgraph.png" border="0" usemap="#apilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_cgraph" alt=""/></div>
<map name="apilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_cgraph" id="apilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_cgraph">
<area shape="rect" title=" " alt="" coords="5,523,95,549"/>
<area shape="rect" href="pilot-getrom_8c.html#af9a73ae2eff1060ddfff730f812db4a2" title=" " alt="" coords="154,87,282,113"/>
<area shape="poly" title=" " alt="" coords="51,522,79,392,105,301,140,211,167,163,194,124,199,127,171,166,145,213,110,303,84,393,56,523"/>
<area shape="rect" href="dlp_8c.html#a9cac32ae742584335d86a9fcec40631a" title=" " alt="" coords="143,248,293,274"/>
<area shape="poly" title=" " alt="" coords="50,522,58,480,74,421,101,356,119,325,141,297,162,279,166,284,145,300,123,328,105,358,79,423,63,482,56,523"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="716,676,812,702"/>
<area shape="poly" title=" " alt="" coords="76,547,188,602,263,633,342,657,439,675,537,685,627,688,700,688,700,694,627,694,536,690,438,680,340,662,261,638,186,607,74,551"/>
<area shape="rect" href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b" title=" " alt="" coords="157,335,278,361"/>
<area shape="poly" title=" " alt="" coords="61,521,193,370,197,374,65,525"/>
<area shape="rect" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec" title=" " alt="" coords="178,727,258,753"/>
<area shape="poly" title=" " alt="" coords="58,548,68,579,86,621,111,666,144,706,165,720,162,724,141,710,107,669,81,624,63,581,52,550"/>
<area shape="rect" href="pilot-getrom_8c.html#aa9cb5ecf65cba7a6a236ab4ac254af4b" title=" " alt="" coords="178,776,258,802"/>
<area shape="poly" title=" " alt="" coords="55,548,62,590,77,647,104,709,122,738,144,763,164,776,161,780,141,767,118,741,99,712,72,649,57,591,50,549"/>
<area shape="rect" href="userland_8c.html#ae82e14b07cad44d7f86d1a3bffd28472" title=" " alt="" coords="341,20,468,46"/>
<area shape="poly" title=" " alt="" coords="256,84,351,49,353,54,257,89"/>
<area shape="rect" href="utils_8c.html#ab6082d4f9037299df5eb93840d48393b" title=" " alt="" coords="543,20,620,46"/>
<area shape="poly" title=" " alt="" coords="469,30,527,30,527,36,469,36"/>
<area shape="poly" title=" " alt="" coords="189,249,184,240,187,230,199,224,218,222,238,224,249,231,246,235,236,229,218,227,200,229,191,233,189,239,194,246"/>
<area shape="rect" href="dlp_8c.html#abc04e2934d3630d69e4bcbb45a072f16" title=" " alt="" coords="368,347,441,373"/>
<area shape="poly" title=" " alt="" coords="250,272,294,296,318,315,342,333,355,340,352,345,340,338,315,320,292,301,248,277"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="1055,474,1145,499"/>
<area shape="poly" title=" " alt="" coords="225,246,269,190,301,159,340,135,386,118,446,102,516,89,590,81,663,77,732,79,790,89,834,107,848,119,856,132,862,159,866,188,872,202,883,215,908,231,932,237,958,242,985,259,1026,308,1057,363,1080,415,1094,458,1089,460,1075,417,1052,365,1022,311,982,263,956,247,931,242,906,236,879,219,868,204,861,189,857,160,851,134,844,122,832,111,789,94,731,84,663,82,590,86,516,95,447,107,388,123,342,139,305,163,272,194,229,250"/>
<area shape="rect" href="dlp_8c.html#a0de7f4a564ecc2722587f714e85e4b19" title=" " alt="" coords="346,199,463,225"/>
<area shape="poly" title=" " alt="" coords="269,245,338,227,339,232,270,250"/>
<area shape="rect" href="dlp_8c.html#a0343d3907222faa9d3b51fde64afce0e" title=" " alt="" coords="345,150,464,175"/>
<area shape="poly" title=" " alt="" coords="237,246,283,216,340,184,350,179,353,184,342,189,286,220,240,250"/>
<area shape="rect" href="dlp_8c.html#a756cc365dac867567e63f818cd975268" title=" " alt="" coords="341,248,468,274"/>
<area shape="poly" title=" " alt="" coords="294,258,325,258,325,264,294,264"/>
<area shape="rect" href="socket_8c.html#a4abe9b686262eeec637d6990e57d8f6a" title=" " alt="" coords="351,298,458,323"/>
<area shape="poly" title=" " alt="" coords="270,272,339,290,338,296,269,277"/>
<area shape="rect" href="dlp_8c.html#adbcfa8ce4f9b2bcf9e7938eb2f27221d" title=" " alt="" coords="702,20,826,46"/>
<area shape="poly" title=" " alt="" coords="441,345,467,333,557,272,645,209,661,183,670,160,678,136,692,108,736,55,740,59,697,111,683,138,675,162,666,186,649,212,560,277,470,338,443,350"/>
<area shape="poly" title=" " alt="" coords="428,371,474,398,539,433,615,466,695,492,788,506,882,508,969,503,1040,494,1040,499,970,508,883,513,788,511,694,497,613,471,537,437,472,403,425,375"/>
<area shape="rect" href="dlp_8c.html#a469476bd7495dcaa314f1952f130f679" title=" " alt="" coords="516,375,647,401"/>
<area shape="poly" title=" " alt="" coords="442,363,501,372,500,378,441,368"/>
<area shape="rect" href="socket_8c.html#abc47198f50210793f9e8151cbef90c4d" title=" " alt="" coords="695,223,833,249"/>
<area shape="poly" title=" " alt="" coords="441,353,535,335,591,321,646,303,728,255,731,259,648,307,593,326,537,341,442,358"/>
<area shape="rect" href="dlp_8c.html#aecd93c7895b4c6c2282b911eaaf9a46e" title=" " alt="" coords="888,71,976,97"/>
<area shape="poly" title=" " alt="" coords="810,44,875,64,873,69,808,49"/>
<area shape="rect" href="socket_8c.html#ac087e3021464b4aa649a041c8f547088" title=" " alt="" coords="1067,23,1133,49"/>
<area shape="poly" title=" " alt="" coords="818,17,881,6,932,3,984,6,1052,20,1051,25,983,12,932,8,881,12,819,22"/>
<area shape="poly" title=" " alt="" coords="801,44,835,63,912,137,985,215,1023,281,1054,348,1093,458,1088,460,1049,350,1018,283,981,219,909,141,831,67,798,49"/>
<area shape="rect" href="socket_8c.html#a0eb81ed865386ef5f955a93f02426c82" title=" " alt="" coords="899,22,965,47"/>
<area shape="poly" title=" " alt="" coords="826,31,884,31,883,37,826,36"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="1217,248,1322,274"/>
<area shape="poly" title=" " alt="" coords="1135,39,1153,47,1170,58,1206,99,1233,147,1252,194,1264,232,1259,234,1247,196,1228,149,1202,102,1167,62,1151,51,1133,44"/>
<area shape="rect" href="socket_8c.html#a73c92624f86d6b9ff6bc7d316e72c64c" title=" " alt="" coords="1220,72,1318,98"/>
<area shape="poly" title=" " alt="" coords="1134,43,1209,65,1208,70,1133,48"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="1377,199,1482,225"/>
<area shape="poly" title=" " alt="" coords="1313,245,1370,227,1371,232,1315,250"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="1370,248,1489,274"/>
<area shape="poly" title=" " alt="" coords="1322,258,1354,258,1354,264,1322,264"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="1386,298,1473,323"/>
<area shape="poly" title=" " alt="" coords="1315,272,1372,290,1371,295,1313,277"/>
<area shape="poly" title=" " alt="" coords="1109,471,1247,284,1252,288,1113,475"/>
<area shape="rect" href="socket_8c.html#a78bf82c7be1ea4fa0fece28e9c58fa57" title=" " alt="" coords="1067,72,1133,98"/>
<area shape="poly" title=" " alt="" coords="967,42,1053,68,1051,73,965,47"/>
<area shape="poly" title=" " alt="" coords="1135,89,1153,96,1170,107,1200,136,1225,170,1259,233,1254,235,1221,173,1196,140,1167,111,1151,101,1133,94"/>
<area shape="poly" title=" " alt="" coords="1133,82,1204,82,1204,88,1133,88"/>
<area shape="poly" title=" " alt="" coords="599,399,641,430,667,446,696,459,787,481,881,491,968,492,1040,489,1040,495,968,498,881,496,786,486,694,464,665,451,638,435,596,403"/>
<area shape="rect" href="dlp_8c.html#a032b2d86af38002420c06e64d8742ee4" title=" " alt="" coords="717,122,811,147"/>
<area shape="poly" title=" " alt="" coords="592,373,644,304,668,256,677,235,692,209,736,157,740,160,697,212,682,237,673,259,649,306,597,376"/>
<area shape="rect" href="dlp_8c.html#a14b12dff7b24abac1f09697c7b3eaa13" title=" " alt="" coords="699,423,828,449"/>
<area shape="poly" title=" " alt="" coords="634,399,699,416,697,421,633,404"/>
<area shape="rect" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606" title=" " alt="" coords="714,324,814,350"/>
<area shape="poly" title=" " alt="" coords="630,372,700,352,701,357,631,377"/>
<area shape="rect" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc" title=" " alt="" coords="713,374,815,399"/>
<area shape="poly" title=" " alt="" coords="647,385,697,384,697,390,647,390"/>
<area shape="poly" title=" " alt="" coords="587,400,595,449,614,519,629,557,647,595,669,630,697,662,704,668,701,672,693,666,665,634,642,597,624,559,609,520,590,450,582,401"/>
<area shape="rect" href="socket_8c.html#a2e89f53f6dc64b669c778fcf29b27199" title=" " alt="" coords="900,274,964,299"/>
<area shape="poly" title=" " alt="" coords="612,372,645,354,659,342,668,330,678,319,694,309,743,293,794,284,843,280,885,280,885,286,844,286,795,289,744,298,696,314,681,323,672,334,662,345,648,358,615,377"/>
<area shape="poly" title=" " alt="" coords="618,372,645,354,661,332,668,311,676,289,693,266,708,254,712,258,697,270,680,291,673,312,665,334,649,358,621,376"/>
<area shape="rect" href="socket_8c.html#a6d145a62ddf40544ae37407640b0e353" title=" " alt="" coords="724,626,804,651"/>
<area shape="poly" title=" " alt="" coords="595,400,747,612,742,615,590,403"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="887,727,977,753"/>
<area shape="poly" title=" " alt="" coords="810,700,874,720,872,725,808,705"/>
<area shape="rect" href="socket_8c.html#aaa2992e844d3a1447f54a342dced4fa0" title=" " alt="" coords="1068,122,1132,147"/>
<area shape="poly" title=" " alt="" coords="946,271,1071,156,1075,160,950,275"/>
<area shape="poly" title=" " alt="" coords="1134,144,1170,164,1214,200,1249,235,1245,239,1210,204,1167,169,1131,149"/>
<area shape="poly" title=" " alt="" coords="1132,123,1207,100,1209,105,1133,128"/>
<area shape="poly" title=" " alt="" coords="781,247,824,281,852,297,882,309,927,319,974,323,1021,321,1068,316,1153,298,1220,277,1222,282,1154,303,1068,322,1022,327,974,328,926,324,880,314,850,302,821,285,778,251"/>
<area shape="poly" title=" " alt="" coords="805,647,881,661,966,677,1036,693,1068,695,1099,690,1132,677,1167,654,1187,629,1204,589,1220,540,1233,485,1252,375,1263,289,1268,290,1257,375,1238,487,1225,542,1209,591,1191,631,1170,658,1134,682,1100,696,1068,700,1035,698,965,682,881,666,804,652"/>
<area shape="rect" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5" title=" " alt="" coords="881,626,983,651"/>
<area shape="poly" title=" " alt="" coords="804,636,865,636,865,641,804,641"/>
<area shape="poly" title=" " alt="" coords="984,645,1028,649,1076,647,1125,635,1147,625,1167,611,1185,589,1201,554,1229,463,1249,365,1261,289,1267,290,1254,366,1234,464,1206,556,1189,591,1170,615,1150,630,1126,640,1077,652,1028,654,984,651"/>
<area shape="poly" title=" " alt="" coords="955,623,982,604,1034,555,1076,509,1080,513,1038,559,985,608,958,627"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="1031,575,1169,601"/>
<area shape="poly" title=" " alt="" coords="977,622,1040,603,1041,608,978,628"/>
<area shape="rect" href="dlp_8c.html#ae92dd2edab1c8ed95d762ea1725b5431" title=" " alt="" coords="535,172,628,198"/>
<area shape="poly" title=" " alt="" coords="464,200,520,192,521,197,464,205"/>
<area shape="poly" title=" " alt="" coords="465,155,701,137,701,142,465,160"/>
<area shape="poly" title=" " alt="" coords="465,167,520,175,520,180,465,173"/>
<area shape="poly" title=" " alt="" coords="441,245,467,235,538,203,540,207,469,240,443,250"/>
<area shape="poly" title=" " alt="" coords="442,294,585,243,694,208,764,199,836,197,977,204,1103,222,1202,242,1201,247,1103,227,976,209,836,202,765,205,695,213,587,248,443,300"/>
<area shape="poly" title=" " alt="" coords="279,349,353,354,352,359,279,354"/>
<area shape="poly" title=" " alt="" coords="231,359,279,416,315,453,359,491,408,527,462,557,520,577,580,585,765,585,807,583,849,577,930,556,1002,529,1059,504,1061,509,1004,534,932,561,850,582,807,588,765,590,580,590,519,583,460,562,405,532,355,495,312,457,275,419,227,363"/>
<area shape="poly" title=" " alt="" coords="223,360,232,409,253,476,268,512,288,547,313,578,343,604,386,629,434,645,484,656,534,660,630,658,708,648,709,653,631,663,534,666,483,661,433,650,384,633,339,609,309,582,284,550,264,515,248,478,227,410,218,361"/>
<area shape="poly" title=" " alt="" coords="234,333,291,285,314,258,339,234,346,229,349,234,343,238,318,261,295,288,238,337"/>
<area shape="poly" title=" " alt="" coords="238,332,265,312,291,285,306,258,312,234,320,209,339,185,342,182,346,186,343,188,325,212,317,235,311,260,295,288,268,316,241,337"/>
<area shape="poly" title=" " alt="" coords="242,332,340,283,352,278,354,283,342,287,244,337"/>
<area shape="poly" title=" " alt="" coords="278,333,336,321,337,327,279,338"/>
<area shape="poly" title=" " alt="" coords="189,336,184,326,187,317,199,310,218,308,238,311,249,317,246,322,236,316,218,314,200,316,191,320,189,326,194,333"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_icgraph.png" border="0" usemap="#apilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_icgraph" alt=""/></div>
<map name="apilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_icgraph" id="apilot-getrom_8c_a16b6c113ebaaf096fa74c2e8949ea40c_icgraph">
<area shape="rect" title=" " alt="" coords="103,5,192,31"/>
<area shape="rect" href="pilot-getrom_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="5,5,55,31"/>
<area shape="poly" title=" " alt="" coords="88,21,55,21,55,16,88,16"/>
</map>
</div>

</div>
</div>
<a id="a1d8f79b16f99255230068f8d6d442136" name="a1d8f79b16f99255230068f8d6d442136"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8f79b16f99255230068f8d6d442136">&#9670;&#160;</a></span>do_get_rom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_get_rom </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   87</span>{</div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordtype">int</span> i,</div>
<div class="line"><span class="lineno">   89</span>        file = -1,</div>
<div class="line"><span class="lineno">   90</span>        timespent = 0;</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <span class="keyword">struct  </span>RPC_params p;</div>
<div class="line"><span class="lineno">   93</span>    plu_romversion_t version;</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> ROMstart;</div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> ROMlength;</div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> offset;</div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> left;</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordtype">char</span>    <a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>[256],</div>
<div class="line"><span class="lineno">  101</span>        print[256];</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    time_t  start = time(NULL), end;</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="comment">/* Tell user (via Palm) that we are starting things up */</span></div>
<div class="line"><span class="lineno">  106</span>    <a class="code hl_function" href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b">dlp_OpenConduit</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>);</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#af9a73ae2eff1060ddfff730f812db4a2">check_romversion</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,&amp;version) &lt; 0) {</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  110</span>    }</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA23E, RPC_IntReply, RPC_Long(0xFFFFFFFF), RPC_End);</div>
<div class="line"><span class="lineno">  113</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, &amp;ROMstart);</div>
<div class="line"><span class="lineno">  114</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA23E, RPC_IntReply, RPC_Long(ROMstart), RPC_End);</div>
<div class="line"><span class="lineno">  115</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, &amp;ROMlength);</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="comment">/* As Steve said, &quot;Bummer.&quot; */</span></div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordflow">if</span> ((version.major == 3) &amp;&amp; (version.minor == 0)</div>
<div class="line"><span class="lineno">  120</span>        &amp;&amp; (ROMlength == 0x100000)) {</div>
<div class="line"><span class="lineno">  121</span>        ROMlength = 0x200000;</div>
<div class="line"><span class="lineno">  122</span>    }</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    snprintf(<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>),<span class="stringliteral">&quot;%s%s.rom&quot;</span>,</div>
<div class="line"><span class="lineno">  125</span>        (filename ? filename : <span class="stringliteral">&quot;pilot-&quot;</span>),</div>
<div class="line"><span class="lineno">  126</span>        version.<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="plu__args_8c.html#a1a6d0a9c086a2017365a2a0a182fe5e2">plu_quiet</a>) {</div>
<div class="line"><span class="lineno">  130</span>        printf(<span class="stringliteral">&quot;   Generating %s\n&quot;</span>, <a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div>
<div class="line"><span class="lineno">  131</span>    }</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    file = open(<a class="code hl_variable" href="pilot-debug_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, O_RDWR | O_CREAT, S_IRUSR | S_IWUSR);</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    offset = lseek(file, 0, SEEK_END);</div>
<div class="line"><span class="lineno">  136</span>    offset &amp;= ~255;</div>
<div class="line"><span class="lineno">  137</span>    lseek(file, offset, SEEK_SET);</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA164, RPC_IntReply, RPC_Byte(1), RPC_End);</div>
<div class="line"><span class="lineno">  140</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>    sprintf(print, <span class="stringliteral">&quot;Downloading byte %ld&quot;</span>, offset);</div>
<div class="line"><span class="lineno">  143</span>    <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA220, RPC_IntReply, RPC_Ptr(print, strlen(print)),</div>
<div class="line"><span class="lineno">  144</span>        RPC_Short(strlen(print)), RPC_Short(0), RPC_Short(28),</div>
<div class="line"><span class="lineno">  145</span>        RPC_End);</div>
<div class="line"><span class="lineno">  146</span>    <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>    signal(SIGINT, <a class="code hl_function" href="#aa9cb5ecf65cba7a6a236ab4ac254af4b">sighandler</a>);</div>
<div class="line"><span class="lineno">  149</span>    left = ROMlength - offset;</div>
<div class="line"><span class="lineno">  150</span>    i = offset;</div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">while</span> (left &gt; 0) {</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordtype">int</span>     len = left,</div>
<div class="line"><span class="lineno">  153</span>            j;</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordtype">char</span>    <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>[256];</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordtype">double</span>  perc = ((double) offset / ROMlength) * 100.0;</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">if</span> (len &gt; 256)</div>
<div class="line"><span class="lineno">  158</span>            len = 256;</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="plu__args_8c.html#a1a6d0a9c086a2017365a2a0a182fe5e2">plu_quiet</a>) {</div>
<div class="line"><span class="lineno">  161</span>            printf(<span class="stringliteral">&quot;\r   %ld of %ld bytes (%.2f%%)&quot;</span>, offset, ROMlength, perc);</div>
<div class="line"><span class="lineno">  162</span>        }</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>        fflush(stdout);</div>
<div class="line"><span class="lineno">  165</span>        <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA026, RPC_IntReply, RPC_Ptr(<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, len),</div>
<div class="line"><span class="lineno">  166</span>            RPC_Long(offset + ROMstart), RPC_Long(len),</div>
<div class="line"><span class="lineno">  167</span>            RPC_End);</div>
<div class="line"><span class="lineno">  168</span>        <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  169</span>        left -= len;</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>        <span class="comment">/* If the buffer only contains zeros, skip instead of</span></div>
<div class="line"><span class="lineno">  172</span><span class="comment">           writing, so that the file will be holey. */</span></div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordflow">for</span> (j = 0; j &lt; len; j++)</div>
<div class="line"><span class="lineno">  174</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>[j])</div>
<div class="line"><span class="lineno">  175</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  176</span>        <span class="keywordflow">if</span> (j == len)</div>
<div class="line"><span class="lineno">  177</span>            lseek(file, len, SEEK_CUR);</div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  179</span>            write(file, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, len);</div>
<div class="line"><span class="lineno">  180</span>        offset += len;</div>
<div class="line"><span class="lineno">  181</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a> || !(i++ % 8))</div>
<div class="line"><span class="lineno">  182</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a> || (<a class="code hl_function" href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b">dlp_OpenConduit</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>) &lt; 0)) {</div>
<div class="line"><span class="lineno">  183</span>                printf(<span class="stringliteral">&quot;\n   Operation cancelled!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  184</span>                <a class="code hl_function" href="dlp_8c.html#a9cac32ae742584335d86a9fcec40631a">dlp_AddSyncLogEntry</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, <span class="stringliteral">&quot;\npilot-getrom ended unexpectedly.\n&quot;</span></div>
<div class="line"><span class="lineno">  185</span>                            <span class="stringliteral">&quot;Entire ROM was not fetched.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>                <span class="keywordflow">goto</span> <a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a>;</div>
<div class="line"><span class="lineno">  187</span>            }</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span> (!(i % 16)) {</div>
<div class="line"><span class="lineno">  189</span>            sprintf(print, <span class="stringliteral">&quot;%ld&quot;</span>, offset);</div>
<div class="line"><span class="lineno">  190</span>            <a class="code hl_function" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec">PackRPC</a>(&amp;p, 0xA220, RPC_IntReply,</div>
<div class="line"><span class="lineno">  191</span>                RPC_Ptr(print, strlen(print)),</div>
<div class="line"><span class="lineno">  192</span>                RPC_Short(strlen(print)), RPC_Short(92),</div>
<div class="line"><span class="lineno">  193</span>                RPC_Short(28), RPC_End);</div>
<div class="line"><span class="lineno">  194</span>            <span class="comment">/* err = */</span> dlp_RPC(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, &amp;p, 0);</div>
<div class="line"><span class="lineno">  195</span>        }</div>
<div class="line"><span class="lineno">  196</span>    }</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    end = time(NULL);</div>
<div class="line"><span class="lineno">  199</span>    timespent = (end-start);</div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="plu__args_8c.html#a1a6d0a9c086a2017365a2a0a182fe5e2">plu_quiet</a>) {</div>
<div class="line"><span class="lineno">  201</span>        printf(<span class="stringliteral">&quot;\n   ROM fetch complete\n&quot;</span>);</div>
<div class="line"><span class="lineno">  202</span>        printf(<span class="stringliteral">&quot;   ROM fetched in: %d:%02d:%02d\n&quot;</span>,timespent/3600, (timespent/60)%60, timespent%60);</div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span><a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a>:</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span> (file&gt;=0) {</div>
<div class="line"><span class="lineno">  207</span>        close(file);</div>
<div class="line"><span class="lineno">  208</span>    }</div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  210</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00767">buffer</a>, <a class="el" href="#l00052">cancel</a>, <a class="el" href="#l00066">check_romversion()</a>, <a class="el" href="#l01746">dlp_AddSyncLogEntry()</a>, <a class="el" href="#l01880">dlp_OpenConduit()</a>, <a class="el" href="#l01566">name</a>, <a class="el" href="#l00835">PackRPC()</a>, <a class="el" href="#l00033">plu_quiet</a>, <a class="el" href="#l00107">sd</a>, and <a class="el" href="#l00054">sighandler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00391">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_cgraph.png" border="0" usemap="#apilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_cgraph" alt=""/></div>
<map name="apilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_cgraph" id="apilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_cgraph">
<area shape="rect" title=" " alt="" coords="5,468,95,494"/>
<area shape="rect" href="pilot-getrom_8c.html#af9a73ae2eff1060ddfff730f812db4a2" title=" " alt="" coords="154,257,282,283"/>
<area shape="poly" title=" " alt="" coords="59,466,141,357,193,293,197,296,145,360,63,469"/>
<area shape="rect" href="dlp_8c.html#a9cac32ae742584335d86a9fcec40631a" title=" " alt="" coords="143,468,293,494"/>
<area shape="poly" title=" " alt="" coords="95,478,127,478,127,484,95,484"/>
<area shape="rect" href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b" title=" " alt="" coords="157,395,278,420"/>
<area shape="poly" title=" " alt="" coords="72,465,142,429,156,423,158,428,144,434,75,470"/>
<area shape="rect" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec" title=" " alt="" coords="178,517,258,543"/>
<area shape="poly" title=" " alt="" coords="96,491,164,512,162,517,94,496"/>
<area shape="rect" href="pilot-getrom_8c.html#aa9cb5ecf65cba7a6a236ab4ac254af4b" title=" " alt="" coords="178,567,258,592"/>
<area shape="poly" title=" " alt="" coords="66,492,100,523,144,553,164,562,162,567,141,558,97,527,63,496"/>
<area shape="rect" href="userland_8c.html#ae82e14b07cad44d7f86d1a3bffd28472" title=" " alt="" coords="341,205,468,231"/>
<area shape="poly" title=" " alt="" coords="266,254,341,233,342,238,267,259"/>
<area shape="rect" href="utils_8c.html#ab6082d4f9037299df5eb93840d48393b" title=" " alt="" coords="543,205,620,231"/>
<area shape="poly" title=" " alt="" coords="469,216,527,216,527,221,469,221"/>
<area shape="poly" title=" " alt="" coords="189,469,184,459,187,450,199,444,218,441,238,444,249,451,246,455,236,449,218,447,200,449,191,453,189,459,194,466"/>
<area shape="rect" href="dlp_8c.html#abc04e2934d3630d69e4bcbb45a072f16" title=" " alt="" coords="368,505,441,531"/>
<area shape="poly" title=" " alt="" coords="286,492,353,505,352,510,285,497"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="1055,357,1145,383"/>
<area shape="poly" title=" " alt="" coords="277,492,295,503,313,524,322,546,329,567,343,591,384,641,419,678,460,708,517,734,602,761,638,766,672,767,743,760,833,744,915,729,947,715,981,687,1009,653,1032,616,1051,575,1065,534,1085,457,1094,398,1099,399,1090,458,1071,536,1056,577,1037,618,1014,656,985,691,950,720,917,734,833,749,744,765,672,773,637,772,601,766,515,739,457,712,416,682,380,645,339,594,324,570,317,548,309,527,291,507,275,497"/>
<area shape="rect" href="dlp_8c.html#a0de7f4a564ecc2722587f714e85e4b19" title=" " alt="" coords="346,407,463,432"/>
<area shape="poly" title=" " alt="" coords="259,465,348,435,350,440,260,470"/>
<area shape="rect" href="dlp_8c.html#a0343d3907222faa9d3b51fde64afce0e" title=" " alt="" coords="345,456,464,482"/>
<area shape="poly" title=" " alt="" coords="293,473,329,471,330,476,294,479"/>
<area shape="rect" href="dlp_8c.html#a756cc365dac867567e63f818cd975268" title=" " alt="" coords="341,357,468,383"/>
<area shape="poly" title=" " alt="" coords="239,465,291,431,315,411,340,392,348,388,350,392,342,396,318,415,295,435,242,470"/>
<area shape="rect" href="socket_8c.html#a4abe9b686262eeec637d6990e57d8f6a" title=" " alt="" coords="351,555,458,580"/>
<area shape="poly" title=" " alt="" coords="270,492,294,503,319,522,342,541,350,545,348,550,340,546,315,526,292,507,268,497"/>
<area shape="rect" href="dlp_8c.html#adbcfa8ce4f9b2bcf9e7938eb2f27221d" title=" " alt="" coords="702,156,826,182"/>
<area shape="poly" title=" " alt="" coords="441,507,487,493,542,470,598,437,623,417,645,394,658,374,666,356,672,322,676,285,682,264,692,242,712,214,734,191,738,194,716,218,697,245,687,266,681,286,677,322,671,358,662,377,649,397,626,421,601,441,545,474,489,498,442,512"/>
<area shape="poly" title=" " alt="" coords="443,529,469,540,533,571,580,598,629,622,695,642,778,664,846,679,878,681,910,676,944,664,981,643,998,612,1028,543,1086,397,1091,399,1032,545,1003,614,985,647,947,669,911,681,878,686,846,684,777,669,694,647,627,627,578,603,530,575,467,545,441,534"/>
<area shape="rect" href="dlp_8c.html#a469476bd7495dcaa314f1952f130f679" title=" " alt="" coords="516,509,647,535"/>
<area shape="poly" title=" " alt="" coords="442,516,501,518,501,523,442,522"/>
<area shape="rect" href="socket_8c.html#abc47198f50210793f9e8151cbef90c4d" title=" " alt="" coords="695,708,833,734"/>
<area shape="poly" title=" " alt="" coords="443,523,457,530,470,540,484,560,491,579,493,618,496,654,503,671,518,687,554,709,595,722,638,728,679,728,679,734,638,733,594,727,552,714,515,691,499,673,491,655,488,618,486,580,479,562,466,544,455,535,440,528"/>
<area shape="rect" href="dlp_8c.html#aecd93c7895b4c6c2282b911eaaf9a46e" title=" " alt="" coords="888,156,976,182"/>
<area shape="poly" title=" " alt="" coords="826,166,873,166,873,172,826,172"/>
<area shape="rect" href="socket_8c.html#ac087e3021464b4aa649a041c8f547088" title=" " alt="" coords="1067,56,1133,82"/>
<area shape="poly" title=" " alt="" coords="779,153,823,121,850,105,880,92,924,79,970,71,1051,66,1052,71,971,77,926,84,882,97,853,110,826,126,782,158"/>
<area shape="poly" title=" " alt="" coords="787,180,882,241,1063,347,1061,352,880,246,784,184"/>
<area shape="rect" href="socket_8c.html#a0eb81ed865386ef5f955a93f02426c82" title=" " alt="" coords="899,107,965,132"/>
<area shape="poly" title=" " alt="" coords="810,153,884,131,885,136,811,158"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="1217,231,1322,256"/>
<area shape="poly" title=" " alt="" coords="1135,73,1153,80,1170,91,1200,120,1225,153,1259,215,1254,217,1221,156,1196,123,1167,95,1151,85,1133,78"/>
<area shape="rect" href="socket_8c.html#a73c92624f86d6b9ff6bc7d316e72c64c" title=" " alt="" coords="1220,56,1318,82"/>
<area shape="poly" title=" " alt="" coords="1133,66,1204,66,1204,72,1133,72"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="1377,181,1482,207"/>
<area shape="poly" title=" " alt="" coords="1313,227,1370,210,1371,215,1315,233"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="1370,231,1489,256"/>
<area shape="poly" title=" " alt="" coords="1322,241,1354,241,1354,246,1322,246"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="1386,280,1473,306"/>
<area shape="poly" title=" " alt="" coords="1315,254,1372,273,1371,278,1313,260"/>
<area shape="poly" title=" " alt="" coords="1117,355,1237,264,1240,268,1120,359"/>
<area shape="rect" href="socket_8c.html#a78bf82c7be1ea4fa0fece28e9c58fa57" title=" " alt="" coords="1067,105,1133,131"/>
<area shape="poly" title=" " alt="" coords="966,117,1051,116,1051,121,966,122"/>
<area shape="poly" title=" " alt="" coords="1135,124,1170,140,1216,177,1251,216,1247,220,1212,181,1167,144,1132,129"/>
<area shape="poly" title=" " alt="" coords="1133,106,1208,84,1209,89,1134,111"/>
<area shape="poly" title=" " alt="" coords="612,507,645,488,668,465,678,454,694,444,832,415,1040,378,1041,383,833,420,696,449,681,458,672,469,648,492,615,511"/>
<area shape="rect" href="dlp_8c.html#a032b2d86af38002420c06e64d8742ee4" title=" " alt="" coords="717,357,811,383"/>
<area shape="poly" title=" " alt="" coords="618,506,645,488,661,466,668,445,676,423,693,400,708,389,712,393,697,404,680,426,673,447,665,469,649,492,621,511"/>
<area shape="rect" href="dlp_8c.html#a14b12dff7b24abac1f09697c7b3eaa13" title=" " alt="" coords="699,459,828,484"/>
<area shape="poly" title=" " alt="" coords="630,506,700,486,701,492,631,511"/>
<area shape="rect" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606" title=" " alt="" coords="714,508,814,534"/>
<area shape="poly" title=" " alt="" coords="647,519,698,519,698,524,647,524"/>
<area shape="rect" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc" title=" " alt="" coords="713,557,815,583"/>
<area shape="poly" title=" " alt="" coords="634,533,699,550,697,556,633,538"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="716,607,812,632"/>
<area shape="poly" title=" " alt="" coords="602,533,644,563,696,593,706,598,704,603,693,598,641,567,599,538"/>
<area shape="rect" href="socket_8c.html#a2e89f53f6dc64b669c778fcf29b27199" title=" " alt="" coords="900,5,964,31"/>
<area shape="poly" title=" " alt="" coords="589,508,616,459,644,395,654,357,657,323,656,263,657,235,661,206,672,175,693,142,712,119,735,99,786,66,838,43,884,27,886,32,840,47,788,71,738,103,716,123,697,145,677,177,666,207,662,235,662,263,663,324,659,358,649,396,621,461,593,510"/>
<area shape="poly" title=" " alt="" coords="597,533,742,694,738,698,593,537"/>
<area shape="rect" href="socket_8c.html#a6d145a62ddf40544ae37407640b0e353" title=" " alt="" coords="724,256,804,282"/>
<area shape="poly" title=" " alt="" coords="620,507,645,488,658,470,666,453,672,420,676,384,692,344,712,315,735,291,739,294,717,318,697,346,682,386,677,421,671,455,662,473,649,492,623,511"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="887,607,977,632"/>
<area shape="poly" title=" " alt="" coords="812,617,872,617,872,622,812,622"/>
<area shape="rect" href="socket_8c.html#aaa2992e844d3a1447f54a342dced4fa0" title=" " alt="" coords="1068,7,1132,32"/>
<area shape="poly" title=" " alt="" coords="964,16,1053,16,1053,22,964,21"/>
<area shape="poly" title=" " alt="" coords="1133,23,1152,30,1170,41,1206,83,1233,130,1252,177,1264,215,1259,217,1247,178,1228,133,1202,86,1167,46,1150,35,1131,28"/>
<area shape="poly" title=" " alt="" coords="1133,26,1209,49,1207,54,1132,31"/>
<area shape="poly" title=" " alt="" coords="833,722,870,721,908,715,947,704,982,687,1039,642,1089,589,1133,530,1170,470,1201,410,1225,355,1257,270,1262,272,1230,357,1206,412,1175,472,1137,533,1093,592,1042,646,985,691,949,709,909,720,870,726,833,728"/>
<area shape="poly" title=" " alt="" coords="804,264,1201,244,1201,250,805,270"/>
<area shape="rect" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5" title=" " alt="" coords="881,205,983,231"/>
<area shape="poly" title=" " alt="" coords="804,254,872,233,874,238,805,259"/>
<area shape="poly" title=" " alt="" coords="984,219,1201,236,1201,241,984,225"/>
<area shape="poly" title=" " alt="" coords="950,230,1075,345,1071,349,946,234"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="1031,155,1169,180"/>
<area shape="poly" title=" " alt="" coords="977,202,1040,183,1041,188,978,207"/>
<area shape="rect" href="dlp_8c.html#ae92dd2edab1c8ed95d762ea1725b5431" title=" " alt="" coords="535,357,628,383"/>
<area shape="poly" title=" " alt="" coords="453,403,520,385,521,390,454,409"/>
<area shape="poly" title=" " alt="" coords="454,453,701,384,702,390,455,458"/>
<area shape="poly" title=" " alt="" coords="446,453,467,443,491,422,515,400,534,388,537,393,518,404,494,426,470,447,448,458"/>
<area shape="poly" title=" " alt="" coords="469,368,520,368,520,373,469,373"/>
<area shape="poly" title=" " alt="" coords="412,580,425,613,446,656,477,700,496,719,518,735,610,782,699,814,783,831,824,833,865,832,904,826,943,815,982,800,1019,781,1057,757,1094,728,1167,657,1185,627,1202,584,1230,474,1250,358,1262,271,1267,272,1255,359,1235,475,1207,586,1190,629,1171,660,1097,732,1060,761,1022,786,984,805,945,820,905,831,865,837,824,839,783,836,697,819,608,787,515,739,493,723,473,704,442,659,420,615,407,582"/>
<area shape="poly" title=" " alt="" coords="275,419,295,429,311,445,320,461,328,477,343,492,355,500,353,504,339,496,324,480,315,464,307,448,291,434,272,423"/>
<area shape="poly" title=" " alt="" coords="237,392,282,365,311,352,340,342,438,324,539,315,640,313,738,316,912,334,1040,355,1039,360,912,339,737,321,640,318,539,320,439,329,342,347,313,357,285,370,239,397"/>
<area shape="poly" title=" " alt="" coords="228,392,272,344,304,319,340,298,388,281,438,269,540,257,634,255,709,260,708,265,633,261,540,262,439,275,390,287,342,303,307,323,276,348,231,396"/>
<area shape="poly" title=" " alt="" coords="279,409,331,412,331,417,279,414"/>
<area shape="poly" title=" " alt="" coords="262,418,294,429,350,448,349,453,292,434,260,424"/>
<area shape="poly" title=" " alt="" coords="278,393,325,383,326,388,279,398"/>
<area shape="poly" title=" " alt="" coords="279,419,295,430,307,444,314,458,320,487,325,514,332,528,343,542,345,544,342,548,339,545,327,531,320,516,315,488,309,460,303,447,291,433,276,423"/>
<area shape="poly" title=" " alt="" coords="189,396,184,386,187,376,199,370,218,368,238,371,249,377,246,382,236,376,218,373,200,375,191,380,189,385,194,393"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_icgraph.png" border="0" usemap="#apilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_icgraph" alt=""/></div>
<map name="apilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_icgraph" id="apilot-getrom_8c_a1d8f79b16f99255230068f8d6d442136_icgraph">
<area shape="rect" title=" " alt="" coords="103,5,192,31"/>
<area shape="rect" href="pilot-getrom_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="5,5,55,31"/>
<area shape="poly" title=" " alt="" coords="88,21,55,21,55,16,88,16"/>
</map>
</div>

</div>
</div>
<a id="a17688563ba8ead826569674e97b1c1c7" name="a17688563ba8ead826569674e97b1c1c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17688563ba8ead826569674e97b1c1c7">&#9670;&#160;</a></span>do_get_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_get_token </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>token</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  343</span>{</div>
<div class="line"><span class="lineno">  344</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> t = 0;</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordtype">size_t</span>  <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div>
<div class="line"><span class="lineno">  346</span>    <span class="keywordtype">char</span>    <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>[50];</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">if</span> (!token) {</div>
<div class="line"><span class="lineno">  349</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  350</span>    }</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>    <span class="comment">/* asking for trouble on aligned architectures */</span></div>
<div class="line"><span class="lineno">  353</span>    set_long(&amp;t,*((<span class="keywordtype">long</span> *)token));</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>    <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>);</div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="dlp_8c.html#a1a110d8bbe35329c26dcd941c9c2aca0">dlp_GetROMToken</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>, t, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, &amp;<a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) &lt; 0) {</div>
<div class="line"><span class="lineno">  357</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  358</span>    }</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    fprintf(stdout, <span class="stringliteral">&quot;Token for &#39;%s&#39; was: %s\n&quot;</span>, token, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  363</span>}</div>
<div class="ttc" id="adlp_8c_html_a1a110d8bbe35329c26dcd941c9c2aca0"><div class="ttname"><a href="dlp_8c.html#a1a110d8bbe35329c26dcd941c9c2aca0">dlp_GetROMToken</a></div><div class="ttdeci">int dlp_GetROMToken(int sd, unsigned long token, void *buffer, size_t *size)</div><div class="ttdef"><b>Definition</b> dlp.c:2331</div></div>
<div class="ttc" id="avalidate_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> validate.cc:81</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00767">buffer</a>, <a class="el" href="#l02331">dlp_GetROMToken()</a>, <a class="el" href="#l00107">sd</a>, and <a class="el" href="#l00081">size</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00391">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_cgraph.png" border="0" usemap="#apilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_cgraph" alt=""/></div>
<map name="apilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_cgraph" id="apilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,105,80"/>
<area shape="rect" href="dlp_8c.html#a1a110d8bbe35329c26dcd941c9c2aca0" title=" " alt="" coords="153,55,285,80"/>
<area shape="poly" title=" " alt="" coords="105,65,137,65,137,70,105,70"/>
<area shape="poly" title=" " alt="" coords="191,56,186,46,189,36,200,30,219,28,239,31,249,37,246,42,237,36,219,33,202,35,193,40,191,45,195,53"/>
<area shape="rect" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec" title=" " alt="" coords="346,5,427,31"/>
<area shape="poly" title=" " alt="" coords="265,51,331,32,332,37,266,57"/>
<area shape="rect" href="socket_8c.html#a4abe9b686262eeec637d6990e57d8f6a" title=" " alt="" coords="333,55,440,80"/>
<area shape="poly" title=" " alt="" coords="285,65,318,65,318,70,285,70"/>
<area shape="rect" href="utils_8c.html#a16173a2940fee2ae9756d00109d096ee" title=" " alt="" coords="352,104,422,130"/>
<area shape="poly" title=" " alt="" coords="266,78,338,100,336,105,265,84"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="488,55,594,80"/>
<area shape="poly" title=" " alt="" coords="441,65,473,65,473,70,441,70"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="649,5,754,31"/>
<area shape="poly" title=" " alt="" coords="585,51,642,34,643,39,586,57"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="642,55,761,80"/>
<area shape="poly" title=" " alt="" coords="594,65,626,65,626,70,594,70"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="658,104,745,130"/>
<area shape="poly" title=" " alt="" coords="586,78,644,97,643,102,585,84"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_icgraph.png" border="0" usemap="#apilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_icgraph" alt=""/></div>
<map name="apilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_icgraph" id="apilot-getrom_8c_a17688563ba8ead826569674e97b1c1c7_icgraph">
<area shape="rect" title=" " alt="" coords="103,5,202,31"/>
<area shape="rect" href="pilot-getrom_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="5,5,55,31"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="a1c1cbff6c9f48bc722a1d4fe5ed1fe97" name="a1c1cbff6c9f48bc722a1d4fe5ed1fe97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1cbff6c9f48bc722a1d4fe5ed1fe97">&#9670;&#160;</a></span>do_sysinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_sysinfo </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  366</span>{</div>
<div class="line"><span class="lineno">  367</span>    <span class="keyword">struct </span>SysInfo info;</div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>[256];</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="dlp_8c.html#a9f0c8f272d342b38d3c05c2e1906d08d">dlp_ReadSysInfo</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,&amp;info) &lt; 0) {</div>
<div class="line"><span class="lineno">  371</span>        fprintf(stderr,<span class="stringliteral">&quot;   ERROR: Could not read Palm System Information.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  372</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  373</span>    }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    memset(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>,0,<span class="keyword">sizeof</span>(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>));</div>
<div class="line"><span class="lineno">  377</span>    strncpy(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>,info.prodID,info.prodIDLength &lt; <span class="keyword">sizeof</span>(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>)-1 ? info.prodIDLength : sizeof(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>)-1);</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>        fprintf(stdout,<span class="stringliteral">&quot;ProdId..:%s\n&quot;</span>, <a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>);</div>
<div class="line"><span class="lineno">  380</span>        fprintf(stdout,<span class="stringliteral">&quot;ROM.....:%ld\n&quot;</span>, info.romVersion);</div>
<div class="line"><span class="lineno">  381</span>        fprintf(stdout,<span class="stringliteral">&quot;DLP.....:%d.%d\n&quot;</span>, info.dlpMajorVersion,info.dlpMinorVersion);</div>
<div class="line"><span class="lineno">  382</span>        fprintf(stdout,<span class="stringliteral">&quot;Compat..:%d.%d\n&quot;</span>, info.compatMajorVersion,info.compatMinorVersion);</div>
<div class="line"><span class="lineno">  383</span>        fprintf(stdout,<span class="stringliteral">&quot;Locale..:%ld\n&quot;</span>, info.locale);</div>
<div class="line"><span class="lineno">  384</span>        fprintf(stdout,<span class="stringliteral">&quot;MaxRec..:%ld\n&quot;</span>, info.maxRecSize);</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  387</span>}</div>
<div class="ttc" id="adlp_8c_html_a9f0c8f272d342b38d3c05c2e1906d08d"><div class="ttname"><a href="dlp_8c.html#a9f0c8f272d342b38d3c05c2e1906d08d">dlp_ReadSysInfo</a></div><div class="ttdeci">int dlp_ReadSysInfo(int sd, struct SysInfo *s)</div><div class="ttdef"><b>Definition</b> dlp.c:965</div></div>
<div class="ttc" id="apitcl_8c_html_a0dea8f1af961c5e9eb4425acd7c95409"><div class="ttname"><a href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a></div><div class="ttdeci">char buf[0xffff]</div><div class="ttdef"><b>Definition</b> pitcl.c:34</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00034">buf</a>, <a class="el" href="#l00965">dlp_ReadSysInfo()</a>, and <a class="el" href="#l00107">sd</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00391">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_cgraph.png" border="0" usemap="#apilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_cgraph" alt=""/></div>
<map name="apilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_cgraph" id="apilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_cgraph">
<area shape="rect" title=" " alt="" coords="5,633,90,659"/>
<area shape="rect" href="dlp_8c.html#a9f0c8f272d342b38d3c05c2e1906d08d" title=" " alt="" coords="138,633,259,659"/>
<area shape="poly" title=" " alt="" coords="90,644,122,644,122,649,90,649"/>
<area shape="poly" title=" " alt="" coords="172,634,167,625,170,615,181,609,198,607,217,609,227,616,224,620,215,614,198,612,183,614,175,619,173,624,177,632"/>
<area shape="rect" href="dlp_8c.html#abc04e2934d3630d69e4bcbb45a072f16" title=" " alt="" coords="334,469,407,495"/>
<area shape="poly" title=" " alt="" coords="212,631,343,504,347,508,215,635"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="1183,432,1288,458"/>
<area shape="poly" title=" " alt="" coords="247,630,307,618,388,614,491,617,729,632,850,636,963,634,1060,621,1100,611,1133,596,1166,570,1191,537,1210,502,1223,471,1228,473,1215,505,1195,540,1169,574,1136,600,1102,616,1061,627,964,639,850,641,729,637,491,623,388,619,307,623,248,635"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="1021,381,1111,407"/>
<area shape="poly" title=" " alt="" coords="202,632,239,553,269,502,305,455,389,364,426,329,462,298,501,272,545,249,597,227,660,205,698,194,730,190,762,193,800,205,816,214,826,225,849,249,899,284,951,316,1033,370,1030,375,948,320,896,288,845,254,823,229,813,218,798,210,761,198,730,195,700,199,661,210,599,232,547,253,504,277,465,303,429,333,393,368,309,459,273,505,244,555,207,634"/>
<area shape="rect" href="dlp_8c.html#a0de7f4a564ecc2722587f714e85e4b19" title=" " alt="" coords="312,683,429,708"/>
<area shape="poly" title=" " alt="" coords="247,657,309,675,308,680,245,662"/>
<area shape="rect" href="dlp_8c.html#a0343d3907222faa9d3b51fde64afce0e" title=" " alt="" coords="311,732,430,758"/>
<area shape="poly" title=" " alt="" coords="218,658,258,687,308,719,318,723,315,728,306,723,255,692,215,662"/>
<area shape="rect" href="dlp_8c.html#a756cc365dac867567e63f818cd975268" title=" " alt="" coords="307,633,434,659"/>
<area shape="poly" title=" " alt="" coords="259,644,292,644,292,649,259,649"/>
<area shape="rect" href="socket_8c.html#a4abe9b686262eeec637d6990e57d8f6a" title=" " alt="" coords="494,783,601,808"/>
<area shape="poly" title=" " alt="" coords="209,658,246,713,274,744,308,768,350,784,394,794,438,798,479,799,479,804,438,803,393,799,348,789,306,773,271,748,242,717,204,661"/>
<area shape="rect" href="dlp_8c.html#adbcfa8ce4f9b2bcf9e7938eb2f27221d" title=" " alt="" coords="668,68,792,94"/>
<area shape="poly" title=" " alt="" coords="382,467,705,104,709,107,386,471"/>
<area shape="poly" title=" " alt="" coords="407,475,949,408,1006,400,1006,405,950,413,408,481"/>
<area shape="rect" href="dlp_8c.html#a469476bd7495dcaa314f1952f130f679" title=" " alt="" coords="482,393,613,419"/>
<area shape="poly" title=" " alt="" coords="402,466,501,423,503,428,404,471"/>
<area shape="rect" href="socket_8c.html#abc47198f50210793f9e8151cbef90c4d" title=" " alt="" coords="661,569,799,595"/>
<area shape="poly" title=" " alt="" coords="408,490,667,562,665,567,407,495"/>
<area shape="rect" href="dlp_8c.html#aecd93c7895b4c6c2282b911eaaf9a46e" title=" " alt="" coords="854,107,942,132"/>
<area shape="poly" title=" " alt="" coords="789,92,840,104,839,109,788,97"/>
<area shape="rect" href="socket_8c.html#ac087e3021464b4aa649a041c8f547088" title=" " alt="" coords="1033,207,1099,232"/>
<area shape="poly" title=" " alt="" coords="792,66,830,63,871,65,913,74,951,92,964,103,972,116,978,142,983,169,989,181,999,193,1020,206,1017,211,996,198,984,184,978,170,972,143,967,118,960,107,948,96,911,79,871,70,830,69,792,72"/>
<area shape="poly" title=" " alt="" coords="745,92,788,139,849,192,876,209,900,220,924,230,951,249,981,278,1009,310,1051,367,1046,370,1005,313,977,282,948,254,921,235,898,224,874,214,845,196,785,143,741,96"/>
<area shape="rect" href="socket_8c.html#a0eb81ed865386ef5f955a93f02426c82" title=" " alt="" coords="865,5,931,31"/>
<area shape="poly" title=" " alt="" coords="766,65,850,33,852,38,768,70"/>
<area shape="poly" title=" " alt="" coords="1101,223,1119,230,1136,241,1172,283,1199,331,1218,378,1230,416,1225,418,1213,379,1194,333,1168,286,1133,246,1117,235,1099,228"/>
<area shape="rect" href="socket_8c.html#a73c92624f86d6b9ff6bc7d316e72c64c" title=" " alt="" coords="1186,207,1284,232"/>
<area shape="poly" title=" " alt="" coords="1099,217,1170,217,1170,222,1099,222"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="1343,383,1448,408"/>
<area shape="poly" title=" " alt="" coords="1279,429,1336,411,1337,416,1281,434"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="1336,432,1455,458"/>
<area shape="poly" title=" " alt="" coords="1288,442,1320,442,1320,448,1288,448"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="1352,481,1439,507"/>
<area shape="poly" title=" " alt="" coords="1281,456,1338,474,1337,479,1279,461"/>
<area shape="poly" title=" " alt="" coords="1112,405,1176,425,1175,430,1110,410"/>
<area shape="rect" href="socket_8c.html#a78bf82c7be1ea4fa0fece28e9c58fa57" title=" " alt="" coords="1033,157,1099,183"/>
<area shape="poly" title=" " alt="" coords="924,29,951,48,1004,97,1046,144,1042,147,1000,101,948,52,921,34"/>
<area shape="poly" title=" " alt="" coords="1100,173,1119,180,1136,192,1159,218,1178,247,1206,309,1224,369,1233,416,1228,417,1219,370,1201,311,1173,249,1155,221,1133,196,1117,185,1099,178"/>
<area shape="poly" title=" " alt="" coords="1100,177,1175,199,1174,204,1099,182"/>
<area shape="poly" title=" " alt="" coords="613,404,799,404,1006,395,1006,400,799,409,613,410"/>
<area shape="rect" href="dlp_8c.html#a032b2d86af38002420c06e64d8742ee4" title=" " alt="" coords="683,671,777,696"/>
<area shape="poly" title=" " alt="" coords="557,418,598,500,629,553,663,606,706,658,702,661,659,609,624,556,594,502,553,421"/>
<area shape="rect" href="dlp_8c.html#a14b12dff7b24abac1f09697c7b3eaa13" title=" " alt="" coords="665,220,794,246"/>
<area shape="poly" title=" " alt="" coords="553,392,592,327,622,288,659,255,665,251,668,255,662,259,626,292,596,330,558,394"/>
<area shape="rect" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606" title=" " alt="" coords="680,269,780,295"/>
<area shape="poly" title=" " alt="" coords="559,391,601,349,629,325,659,304,668,299,670,304,662,308,632,329,604,353,563,395"/>
<area shape="rect" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc" title=" " alt="" coords="679,319,781,344"/>
<area shape="poly" title=" " alt="" coords="576,390,660,353,674,348,676,353,662,358,578,395"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="682,368,778,394"/>
<area shape="poly" title=" " alt="" coords="613,394,666,387,667,392,614,400"/>
<area shape="rect" href="socket_8c.html#a2e89f53f6dc64b669c778fcf29b27199" title=" " alt="" coords="866,156,930,182"/>
<area shape="poly" title=" " alt="" coords="549,392,561,354,582,303,614,250,635,226,659,205,706,181,758,168,808,163,851,163,851,168,808,168,759,173,708,186,662,210,639,229,619,253,587,305,566,356,555,394"/>
<area shape="poly" title=" " alt="" coords="558,418,596,484,626,522,662,556,668,560,665,564,659,560,622,526,592,487,553,421"/>
<area shape="rect" href="socket_8c.html#a6d145a62ddf40544ae37407640b0e353" title=" " alt="" coords="690,520,770,546"/>
<area shape="poly" title=" " alt="" coords="569,417,699,509,696,513,566,422"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="853,331,943,356"/>
<area shape="poly" title=" " alt="" coords="777,368,838,354,839,359,778,373"/>
<area shape="rect" href="socket_8c.html#aaa2992e844d3a1447f54a342dced4fa0" title=" " alt="" coords="1034,256,1098,282"/>
<area shape="poly" title=" " alt="" coords="923,180,951,199,974,222,999,243,1020,253,1018,258,996,247,971,226,948,203,920,184"/>
<area shape="poly" title=" " alt="" coords="1082,280,1213,419,1209,422,1078,284"/>
<area shape="poly" title=" " alt="" coords="1098,257,1173,235,1175,240,1099,262"/>
<area shape="poly" title=" " alt="" coords="800,590,872,595,958,594,1048,581,1092,569,1133,552,1159,535,1182,514,1216,470,1221,473,1186,518,1163,539,1136,557,1094,574,1049,586,958,599,872,600,799,595"/>
<area shape="poly" title=" " alt="" coords="771,537,841,545,933,548,1034,542,1085,532,1134,518,1176,495,1210,467,1213,471,1179,500,1136,523,1086,538,1035,547,933,554,840,550,770,542"/>
<area shape="rect" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5" title=" " alt="" coords="847,483,949,508"/>
<area shape="poly" title=" " alt="" coords="770,521,831,508,832,513,771,527"/>
<area shape="poly" title=" " alt="" coords="945,480,997,468,1086,455,1167,447,1168,452,1086,460,998,473,946,485"/>
<area shape="poly" title=" " alt="" coords="920,480,948,461,971,442,996,424,1018,412,1021,416,999,428,975,446,951,466,923,484"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="997,483,1135,508"/>
<area shape="poly" title=" " alt="" coords="950,493,982,493,982,498,950,498"/>
<area shape="rect" href="dlp_8c.html#ae92dd2edab1c8ed95d762ea1725b5431" title=" " alt="" coords="501,681,594,707"/>
<area shape="poly" title=" " alt="" coords="430,692,486,692,486,697,430,698"/>
<area shape="poly" title=" " alt="" coords="431,739,517,732,612,717,677,699,678,704,613,722,517,737,431,745"/>
<area shape="poly" title=" " alt="" coords="417,729,486,709,487,714,419,734"/>
<area shape="poly" title=" " alt="" coords="422,657,487,675,486,680,420,662"/>
<area shape="poly" title=" " alt="" coords="602,796,709,795,777,790,850,780,925,764,999,740,1069,707,1133,664,1154,644,1172,620,1199,568,1217,515,1227,472,1232,474,1222,517,1204,570,1176,623,1158,647,1136,668,1072,712,1001,745,926,769,851,785,777,795,710,800,602,801"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_icgraph.png" border="0" usemap="#apilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_icgraph" alt=""/></div>
<map name="apilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_icgraph" id="apilot-getrom_8c_a1c1cbff6c9f48bc722a1d4fe5ed1fe97_icgraph">
<area shape="rect" title=" " alt="" coords="103,5,187,31"/>
<area shape="rect" href="pilot-getrom_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="5,5,55,31"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="ac0f2228420376f4db7e1274f2b41667c" name="ac0f2228420376f4db7e1274f2b41667c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0f2228420376f4db7e1274f2b41667c">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>argv</em></span>[]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  392</span>{</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordtype">int</span>     c,      <span class="comment">/* switch */</span></div>
<div class="line"><span class="lineno">  394</span>        <a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>      = -1;</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code hl_variable" href="namespacepisocktests.html#a8187411843a6284ffb964ef3fb9fcab3">args</a> = NULL;</div>
<div class="line"><span class="lineno">  397</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *filename = NULL;</div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordtype">char</span> *token = NULL;</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    <span class="keyword">enum</span> { mode_none, mode_getrom = <span class="charliteral">&#39;R&#39;</span>, mode_getram = <span class="charliteral">&#39;r&#39;</span>, mode_gettoken = <span class="charliteral">&#39;t&#39;</span>, mode_sysinfo=<span class="charliteral">&#39;s&#39;</span> } <a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a> = mode_none;</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>    poptContext <a class="code hl_variable" href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a>;</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    <span class="keyword">struct </span>poptOption <a class="code hl_variable" href="pilot-install-user_8c.html#a145180624d42b5fa57bff49541e32c6a">options</a>[] = {</div>
<div class="line"><span class="lineno">  405</span>        USERLAND_RESERVED_OPTIONS</div>
<div class="line"><span class="lineno">  406</span>        {<span class="stringliteral">&quot;token&quot;</span>, <span class="charliteral">&#39;t&#39;</span>, POPT_ARG_STRING, &amp;token, <span class="charliteral">&#39;t&#39;</span>, <span class="stringliteral">&quot;A ROM token to read (i.e. snum)&quot;</span>, <span class="stringliteral">&quot;token&quot;</span>},</div>
<div class="line"><span class="lineno">  407</span>        {<span class="stringliteral">&quot;sysinfo&quot;</span>,<span class="charliteral">&#39;s&#39;</span>,POPT_ARG_NONE,     NULL, <span class="charliteral">&#39;s&#39;</span>, <span class="stringliteral">&quot;Print SysInfo&quot;</span>, NULL},</div>
<div class="line"><span class="lineno">  408</span>        {<span class="stringliteral">&quot;ram&quot;</span>,    0 , POPT_ARG_NONE,     NULL, <span class="charliteral">&#39;r&#39;</span>, <span class="stringliteral">&quot;Read RAM&quot;</span>, NULL},</div>
<div class="line"><span class="lineno">  409</span>        {<span class="stringliteral">&quot;rom&quot;</span>,    0 , POPT_ARG_NONE,     NULL, <span class="charliteral">&#39;R&#39;</span>, <span class="stringliteral">&quot;Read ROM&quot;</span>, NULL},</div>
<div class="line"><span class="lineno">  410</span>        POPT_TABLEEND</div>
<div class="line"><span class="lineno">  411</span>    };</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="pilot-read-notepad_8c.html#ad785d8a8f8ff378aa21eb1fa7a6085df">progname</a> = NULL;</div>
<div class="line"><span class="lineno">  414</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *opthelp = NULL;</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>    <span class="comment">/* These are optimized away compile-time */</span></div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="#ab9c800875296f23bd616d7d273ff16d7">DEFAULT_MODE</a> == mode_getrom) {</div>
<div class="line"><span class="lineno">  418</span>        <a class="code hl_variable" href="pilot-read-notepad_8c.html#ad785d8a8f8ff378aa21eb1fa7a6085df">progname</a> = <span class="stringliteral">&quot;pilot-getrom&quot;</span>;</div>
<div class="line"><span class="lineno">  419</span>        opthelp=</div>
<div class="line"><span class="lineno">  420</span>        <span class="stringliteral">&quot;[filename]\n\n&quot;</span></div>
<div class="line"><span class="lineno">  421</span>        <span class="stringliteral">&quot;   Retrieves the ROM image from your Palm device.\n\n&quot;</span>;</div>
<div class="line"><span class="lineno">  422</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="#ab9c800875296f23bd616d7d273ff16d7">DEFAULT_MODE</a> == mode_gettoken) {</div>
<div class="line"><span class="lineno">  423</span>        <a class="code hl_variable" href="pilot-read-notepad_8c.html#ad785d8a8f8ff378aa21eb1fa7a6085df">progname</a>=<span class="stringliteral">&quot;pilot-getromtoken&quot;</span>;</div>
<div class="line"><span class="lineno">  424</span>        opthelp=</div>
<div class="line"><span class="lineno">  425</span>        <span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"><span class="lineno">  426</span>        <span class="stringliteral">&quot;   Reads a ROM token from a Palm Handheld device.\n&quot;</span></div>
<div class="line"><span class="lineno">  427</span>        <span class="stringliteral">&quot;   Tokens you may currently extract are:\n&quot;</span></div>
<div class="line"><span class="lineno">  428</span>        <span class="stringliteral">&quot;       adcc:  Entropy for internal A-&gt;D convertor calibration\n&quot;</span></div>
<div class="line"><span class="lineno">  429</span>        <span class="stringliteral">&quot;       irda:  Present only on memory card w/IrDA support\n&quot;</span></div>
<div class="line"><span class="lineno">  430</span>        <span class="stringliteral">&quot;       snum:  Device serial number (from Memory Card Flash ID)\n\n&quot;</span></div>
<div class="line"><span class="lineno">  431</span>        <span class="stringliteral">&quot;   Example arguments:\n&quot;</span></div>
<div class="line"><span class="lineno">  432</span>        <span class="stringliteral">&quot;      -p /dev/pilot -t snum\n\n&quot;</span>;</div>
<div class="line"><span class="lineno">  433</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="#ab9c800875296f23bd616d7d273ff16d7">DEFAULT_MODE</a> == mode_getram) {</div>
<div class="line"><span class="lineno">  434</span>        <a class="code hl_variable" href="pilot-read-notepad_8c.html#ad785d8a8f8ff378aa21eb1fa7a6085df">progname</a>=<span class="stringliteral">&quot;pilot-getram&quot;</span>;</div>
<div class="line"><span class="lineno">  435</span>        opthelp=</div>
<div class="line"><span class="lineno">  436</span>        <span class="stringliteral">&quot;[filename]\n\n&quot;</span></div>
<div class="line"><span class="lineno">  437</span>        <span class="stringliteral">&quot;   Retrieves the RAM image from your Palm device\n\n&quot;</span>;</div>
<div class="line"><span class="lineno">  438</span>    }</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="pilot-read-notepad_8c.html#ad785d8a8f8ff378aa21eb1fa7a6085df">progname</a>) {</div>
<div class="line"><span class="lineno">  441</span>        fprintf(stderr,<span class="stringliteral">&quot;   ERROR: Compile-time error.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  443</span>    }</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>    <a class="code hl_variable" href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a> = poptGetContext(<a class="code hl_variable" href="pilot-read-notepad_8c.html#ad785d8a8f8ff378aa21eb1fa7a6085df">progname</a>, argc, argv, <a class="code hl_variable" href="pilot-install-user_8c.html#a145180624d42b5fa57bff49541e32c6a">options</a>, 0);</div>
<div class="line"><span class="lineno">  449</span>    poptSetOtherOptionHelp(<a class="code hl_variable" href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a>,opthelp);</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordflow">if</span> (argc &lt; 2) {</div>
<div class="line"><span class="lineno">  452</span>        poptPrintUsage(<a class="code hl_variable" href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a>,stderr,0);</div>
<div class="line"><span class="lineno">  453</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  454</span>    }</div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">while</span> ((c = poptGetNextOpt(<a class="code hl_variable" href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a>)) &gt;= 0) {</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordflow">switch</span>(c) {</div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span> :</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span> :</div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span> :</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span> :</div>
<div class="line"><span class="lineno">  461</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a> != mode_none) {</div>
<div class="line"><span class="lineno">  462</span>                fprintf(stderr,<span class="stringliteral">&quot;   ERROR: Use only one of --ram, --rom, and --token.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  463</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  464</span>            }</div>
<div class="line"><span class="lineno">  465</span>            <a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a> =c;</div>
<div class="line"><span class="lineno">  466</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  467</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  468</span>            fprintf(stderr,<span class="stringliteral">&quot;   ERROR: Unhandled option %d.\n&quot;</span>,c);</div>
<div class="line"><span class="lineno">  469</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  470</span>        }</div>
<div class="line"><span class="lineno">  471</span>    }</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">if</span> ( c &lt; -1) {</div>
<div class="line"><span class="lineno">  474</span>        <a class="code hl_function" href="plu__args_8c.html#a29735d17d05c84591f8b2a47fb3e3ef4">plu_badoption</a>(<a class="code hl_variable" href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a>,c);</div>
<div class="line"><span class="lineno">  475</span>    }</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a> == mode_none) {</div>
<div class="line"><span class="lineno">  478</span>        <a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a> = <a class="code hl_define" href="#ab9c800875296f23bd616d7d273ff16d7">DEFAULT_MODE</a>;</div>
<div class="line"><span class="lineno">  479</span>    }</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a>) {</div>
<div class="line"><span class="lineno">  482</span>    <span class="keywordflow">case</span> mode_getrom:</div>
<div class="line"><span class="lineno">  483</span>    <span class="keywordflow">case</span> mode_getram:</div>
<div class="line"><span class="lineno">  484</span>        <a class="code hl_variable" href="namespacepisocktests.html#a8187411843a6284ffb964ef3fb9fcab3">args</a> = poptGetArgs(<a class="code hl_variable" href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a>);</div>
<div class="line"><span class="lineno">  485</span>        <span class="keywordflow">if</span> (args &amp;&amp; args[0] &amp;&amp; args[1]) {</div>
<div class="line"><span class="lineno">  486</span>            fprintf(stderr,<span class="stringliteral">&quot;   ERROR: Specify at most one filename.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  487</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  488</span>        }</div>
<div class="line"><span class="lineno">  489</span>        <span class="keywordflow">if</span> (args &amp;&amp; args[0]) {</div>
<div class="line"><span class="lineno">  490</span>            filename = <a class="code hl_variable" href="namespacepisocktests.html#a8187411843a6284ffb964ef3fb9fcab3">args</a>[0];</div>
<div class="line"><span class="lineno">  491</span>        }</div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  493</span>    <span class="keywordflow">case</span> mode_gettoken:</div>
<div class="line"><span class="lineno">  494</span>        <span class="keywordflow">if</span> (!token) {</div>
<div class="line"><span class="lineno">  495</span>            fprintf(stderr,<span class="stringliteral">&quot;   ERROR: Must specify a token.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  496</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  497</span>        }</div>
<div class="line"><span class="lineno">  498</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  499</span>    <span class="keywordflow">case</span> mode_sysinfo:</div>
<div class="line"><span class="lineno">  500</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">case</span> mode_none:</div>
<div class="line"><span class="lineno">  502</span>        <span class="comment">/* impossible */</span></div>
<div class="line"><span class="lineno">  503</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  504</span>    }</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a>) {</div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">case</span> mode_getrom:</div>
<div class="line"><span class="lineno">  510</span>        printf(</div>
<div class="line"><span class="lineno">  511</span>        <span class="stringliteral">&quot;   NOTICE: Use of this program may place you in violation\n&quot;</span></div>
<div class="line"><span class="lineno">  512</span>        <span class="stringliteral">&quot;           of your license agreement with Palm Computing.\n\n&quot;</span></div>
<div class="line"><span class="lineno">  513</span>        <span class="stringliteral">&quot;           Please read your Palm Computing handbook (\&quot;Software\n&quot;</span></div>
<div class="line"><span class="lineno">  514</span>        <span class="stringliteral">&quot;           License Agreement\&quot;) before running this program.\n\n&quot;</span>);</div>
<div class="line"><span class="lineno">  515</span>        <span class="comment">/* FALLTHRU */</span></div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">case</span> mode_getram:</div>
<div class="line"><span class="lineno">  517</span>        printf(</div>
<div class="line"><span class="lineno">  518</span>        <span class="stringliteral">&quot;   WARNING: Please completely back up your Palm (with pilot-xfer -b)\n&quot;</span></div>
<div class="line"><span class="lineno">  519</span>        <span class="stringliteral">&quot;            before using this program!\n\n&quot;</span>);</div>
<div class="line"><span class="lineno">  520</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">case</span> mode_sysinfo:</div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">case</span> mode_none:</div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">case</span> mode_gettoken:</div>
<div class="line"><span class="lineno">  524</span>        <span class="comment">/* nothing to do */</span></div>
<div class="line"><span class="lineno">  525</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  526</span>    }</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>    <a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a> = <a class="code hl_function" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc">plu_connect</a>();</div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a> &lt; 0) {</div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  532</span>    }</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a>) {</div>
<div class="line"><span class="lineno">  535</span>    <span class="keywordflow">case</span> mode_getrom:</div>
<div class="line"><span class="lineno">  536</span>        c = <a class="code hl_function" href="#a1d8f79b16f99255230068f8d6d442136">do_get_rom</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,filename);</div>
<div class="line"><span class="lineno">  537</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">case</span> mode_gettoken:</div>
<div class="line"><span class="lineno">  539</span>        c = <a class="code hl_function" href="#a17688563ba8ead826569674e97b1c1c7">do_get_token</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,token);</div>
<div class="line"><span class="lineno">  540</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  541</span>    <span class="keywordflow">case</span> mode_getram:</div>
<div class="line"><span class="lineno">  542</span>        c = <a class="code hl_function" href="#a16b6c113ebaaf096fa74c2e8949ea40c">do_get_ram</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,filename);</div>
<div class="line"><span class="lineno">  543</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  544</span>    <span class="keywordflow">case</span> mode_sysinfo:</div>
<div class="line"><span class="lineno">  545</span>        c = <a class="code hl_function" href="#a1c1cbff6c9f48bc722a1d4fe5ed1fe97">do_sysinfo</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>);</div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  547</span>    <span class="keywordflow">case</span> mode_none:</div>
<div class="line"><span class="lineno">  548</span>        <span class="comment">/* impossible */</span></div>
<div class="line"><span class="lineno">  549</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  550</span>    }</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    <a class="code hl_function" href="dlp_8c.html#a27617d8e73e875c7df186ee02fd96b43">dlp_EndOfSync</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,0);</div>
<div class="line"><span class="lineno">  553</span>    <a class="code hl_function" href="socket_8c.html#acc90bbb82f9a58d3635166976e9f3484">pi_close</a>(<a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>);</div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">return</span> c;</div>
<div class="line"><span class="lineno">  555</span>}</div>
<div class="ttc" id="adlp_8c_html_a27617d8e73e875c7df186ee02fd96b43"><div class="ttname"><a href="dlp_8c.html#a27617d8e73e875c7df186ee02fd96b43">dlp_EndOfSync</a></div><div class="ttdeci">int dlp_EndOfSync(int sd, int status)</div><div class="ttdef"><b>Definition</b> dlp.c:1908</div></div>
<div class="ttc" id="anamespacepisocktests_html_a8187411843a6284ffb964ef3fb9fcab3"><div class="ttname"><a href="namespacepisocktests.html#a8187411843a6284ffb964ef3fb9fcab3">pisocktests.args</a></div><div class="ttdeci">args</div><div class="ttdef"><b>Definition</b> pisocktests.py:162</div></div>
<div class="ttc" id="apd-tty_8c_html_a1ea5d0cb93f22f7d0fdf804bd68c3326"><div class="ttname"><a href="pd-tty_8c.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a></div><div class="ttdeci">static int mode</div><div class="ttdef"><b>Definition</b> pd-tty.c:194</div></div>
<div class="ttc" id="apilot-getrom_8c_html_a16b6c113ebaaf096fa74c2e8949ea40c"><div class="ttname"><a href="#a16b6c113ebaaf096fa74c2e8949ea40c">do_get_ram</a></div><div class="ttdeci">int do_get_ram(int sd, const char *filename)</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:214</div></div>
<div class="ttc" id="apilot-getrom_8c_html_a17688563ba8ead826569674e97b1c1c7"><div class="ttname"><a href="#a17688563ba8ead826569674e97b1c1c7">do_get_token</a></div><div class="ttdeci">int do_get_token(int sd, const char *token)</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:342</div></div>
<div class="ttc" id="apilot-getrom_8c_html_a1c1cbff6c9f48bc722a1d4fe5ed1fe97"><div class="ttname"><a href="#a1c1cbff6c9f48bc722a1d4fe5ed1fe97">do_sysinfo</a></div><div class="ttdeci">int do_sysinfo(int sd)</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:365</div></div>
<div class="ttc" id="apilot-getrom_8c_html_a1d8f79b16f99255230068f8d6d442136"><div class="ttname"><a href="#a1d8f79b16f99255230068f8d6d442136">do_get_rom</a></div><div class="ttdeci">int do_get_rom(int sd, const char *filename)</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:86</div></div>
<div class="ttc" id="apilot-getrom_8c_html_ab9c800875296f23bd616d7d273ff16d7"><div class="ttname"><a href="#ab9c800875296f23bd616d7d273ff16d7">DEFAULT_MODE</a></div><div class="ttdeci">#define DEFAULT_MODE</div><div class="ttdef"><b>Definition</b> pilot-getrom.c:47</div></div>
<div class="ttc" id="apilot-install-memo_8c_html_a2443128754f8d7ca4b43f362af82eca9"><div class="ttname"><a href="pilot-install-memo_8c.html#a2443128754f8d7ca4b43f362af82eca9">po</a></div><div class="ttdeci">poptContext po</div><div class="ttdef"><b>Definition</b> pilot-install-memo.c:31</div></div>
<div class="ttc" id="apilot-install-user_8c_html_a145180624d42b5fa57bff49541e32c6a"><div class="ttname"><a href="pilot-install-user_8c.html#a145180624d42b5fa57bff49541e32c6a">options</a></div><div class="ttdeci">const struct poptOption options[]</div><div class="ttdef"><b>Definition</b> pilot-install-user.c:33</div></div>
<div class="ttc" id="apilot-read-notepad_8c_html_ad785d8a8f8ff378aa21eb1fa7a6085df"><div class="ttname"><a href="pilot-read-notepad_8c.html#ad785d8a8f8ff378aa21eb1fa7a6085df">progname</a></div><div class="ttdeci">const char * progname</div><div class="ttdef"><b>Definition</b> pilot-read-notepad.c:48</div></div>
<div class="ttc" id="aplu__args_8c_html_a29735d17d05c84591f8b2a47fb3e3ef4"><div class="ttname"><a href="plu__args_8c.html#a29735d17d05c84591f8b2a47fb3e3ef4">plu_badoption</a></div><div class="ttdeci">void plu_badoption(poptContext pc, int optc)</div><div class="ttdef"><b>Definition</b> plu_args.c:72</div></div>
<div class="ttc" id="asocket_8c_html_acc90bbb82f9a58d3635166976e9f3484"><div class="ttname"><a href="socket_8c.html#acc90bbb82f9a58d3635166976e9f3484">pi_close</a></div><div class="ttdeci">int pi_close(int pi_sd)</div><div class="ttdef"><b>Definition</b> socket.c:1415</div></div>
<div class="ttc" id="auserland_8c_html_a21d841df63f1c93b1fc98b4b4a8b0bbc"><div class="ttname"><a href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc">plu_connect</a></div><div class="ttdeci">int plu_connect()</div><div class="ttdef"><b>Definition</b> userland.c:37</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00047">DEFAULT_MODE</a>, <a class="el" href="#l01908">dlp_EndOfSync()</a>, <a class="el" href="#l00214">do_get_ram()</a>, <a class="el" href="#l00086">do_get_rom()</a>, <a class="el" href="#l00342">do_get_token()</a>, <a class="el" href="#l00365">do_sysinfo()</a>, <a class="el" href="#l00194">mode</a>, <a class="el" href="#l00033">options</a>, <a class="el" href="#l01415">pi_close()</a>, <a class="el" href="#l00072">plu_badoption()</a>, <a class="el" href="#l00037">plu_connect()</a>, <a class="el" href="#l00031">po</a>, <a class="el" href="#l00048">progname</a>, and <a class="el" href="#l00107">sd</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_ac0f2228420376f4db7e1274f2b41667c_cgraph.png" border="0" usemap="#apilot-getrom_8c_ac0f2228420376f4db7e1274f2b41667c_cgraph" alt=""/></div>
<map name="apilot-getrom_8c_ac0f2228420376f4db7e1274f2b41667c_cgraph" id="apilot-getrom_8c_ac0f2228420376f4db7e1274f2b41667c_cgraph">
<area shape="rect" title=" " alt="" coords="5,610,55,636"/>
<area shape="rect" href="dlp_8c.html#a27617d8e73e875c7df186ee02fd96b43" title=" " alt="" coords="599,666,712,692"/>
<area shape="poly" title=" " alt="" coords="55,623,584,670,584,676,55,628"/>
<area shape="rect" href="pilot-getrom_8c.html#a16b6c113ebaaf096fa74c2e8949ea40c" title=" " alt="" coords="417,296,506,321"/>
<area shape="poly" title=" " alt="" coords="31,609,37,577,50,533,71,486,101,444,134,415,171,389,211,369,252,351,332,327,401,313,402,318,334,332,254,356,213,373,174,394,137,419,105,448,75,489,55,535,42,578,36,610"/>
<area shape="rect" href="pilot-getrom_8c.html#a1d8f79b16f99255230068f8d6d442136" title=" " alt="" coords="417,362,506,388"/>
<area shape="poly" title=" " alt="" coords="34,609,59,558,78,527,101,499,137,464,169,442,204,424,251,406,328,386,401,376,402,381,329,391,253,411,207,429,172,446,140,469,105,502,82,530,63,560,39,611"/>
<area shape="rect" href="pilot-getrom_8c.html#a17688563ba8ead826569674e97b1c1c7" title=" " alt="" coords="104,513,203,539"/>
<area shape="poly" title=" " alt="" coords="46,608,123,546,126,550,49,612"/>
<area shape="rect" href="pilot-getrom_8c.html#a1c1cbff6c9f48bc722a1d4fe5ed1fe97" title=" " alt="" coords="111,580,196,605"/>
<area shape="poly" title=" " alt="" coords="55,615,95,604,97,609,56,620"/>
<area shape="rect" href="socket_8c.html#acc90bbb82f9a58d3635166976e9f3484" title=" " alt="" coords="427,1000,496,1025"/>
<area shape="poly" title=" " alt="" coords="36,636,56,723,77,780,105,834,138,881,168,914,203,940,253,968,293,984,335,995,412,1007,411,1013,334,1001,291,989,251,972,200,945,164,918,133,884,100,837,72,782,51,725,31,637"/>
<area shape="rect" href="plu__args_8c.html#a29735d17d05c84591f8b2a47fb3e3ef4" title=" " alt="" coords="103,1074,204,1100"/>
<area shape="poly" title=" " alt="" coords="35,637,41,719,54,843,75,968,89,1018,105,1054,113,1063,109,1067,100,1057,84,1020,70,969,49,844,36,720,29,637"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="108,797,199,823"/>
<area shape="poly" title=" " alt="" coords="42,635,137,783,133,785,38,638"/>
<area shape="poly" title=" " alt="" coords="623,668,617,658,621,648,634,642,655,640,678,642,691,649,688,654,677,647,655,645,635,647,625,652,622,657,628,665"/>
<area shape="rect" href="dlp_8c.html#abc04e2934d3630d69e4bcbb45a072f16" title=" " alt="" coords="810,265,883,291"/>
<area shape="poly" title=" " alt="" coords="668,665,701,628,733,578,745,546,752,518,756,466,760,415,767,386,781,353,798,324,819,300,823,303,803,327,785,355,773,387,766,415,761,467,757,518,750,548,737,581,705,631,672,668"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="1340,721,1446,747"/>
<area shape="poly" title=" " alt="" coords="712,686,783,695,1086,718,1325,729,1325,735,1085,724,783,701,712,691"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="1161,404,1250,429"/>
<area shape="poly" title=" " alt="" coords="712,686,758,689,810,687,862,676,886,666,909,653,920,643,927,632,934,608,939,582,946,568,956,555,989,531,1019,520,1051,512,1087,496,1134,466,1174,437,1177,442,1137,471,1090,500,1052,517,1021,525,991,536,960,559,950,571,944,583,939,609,932,634,924,646,912,657,888,671,863,681,810,692,758,694,712,691"/>
<area shape="rect" href="dlp_8c.html#a0de7f4a564ecc2722587f714e85e4b19" title=" " alt="" coords="788,465,905,491"/>
<area shape="poly" title=" " alt="" coords="667,664,821,500,825,504,671,668"/>
<area shape="rect" href="dlp_8c.html#a0343d3907222faa9d3b51fde64afce0e" title=" " alt="" coords="787,366,906,392"/>
<area shape="poly" title=" " alt="" coords="668,665,700,627,733,578,743,553,748,529,750,486,755,445,765,424,781,402,783,400,786,404,785,405,769,427,760,447,755,487,753,530,748,554,737,581,704,631,672,668"/>
<area shape="rect" href="dlp_8c.html#a756cc365dac867567e63f818cd975268" title=" " alt="" coords="783,416,910,441"/>
<area shape="poly" title=" " alt="" coords="667,664,699,627,733,578,746,543,752,512,759,482,781,451,784,448,787,452,785,454,764,484,757,513,752,544,737,581,703,630,671,668"/>
<area shape="rect" href="socket_8c.html#a4abe9b686262eeec637d6990e57d8f6a" title=" " alt="" coords="793,617,900,643"/>
<area shape="poly" title=" " alt="" coords="708,663,778,645,780,650,709,668"/>
<area shape="rect" href="dlp_8c.html#adbcfa8ce4f9b2bcf9e7938eb2f27221d" title=" " alt="" coords="962,569,1085,595"/>
<area shape="poly" title=" " alt="" coords="863,289,887,318,913,353,939,402,961,454,1011,554,1006,556,956,456,934,405,908,355,883,321,859,293"/>
<area shape="poly" title=" " alt="" coords="884,274,927,274,980,278,1036,289,1090,308,1119,325,1146,346,1187,390,1183,393,1142,350,1116,329,1088,312,1034,294,979,283,927,279,884,279"/>
<area shape="rect" href="dlp_8c.html#a469476bd7495dcaa314f1952f130f679" title=" " alt="" coords="958,113,1089,139"/>
<area shape="poly" title=" " alt="" coords="856,263,897,213,925,183,957,156,975,144,978,149,960,160,929,187,901,216,860,266"/>
<area shape="rect" href="socket_8c.html#abc47198f50210793f9e8151cbef90c4d" title=" " alt="" coords="1137,164,1275,189"/>
<area shape="poly" title=" " alt="" coords="883,265,1142,192,1143,197,884,270"/>
<area shape="rect" href="dlp_8c.html#aecd93c7895b4c6c2282b911eaaf9a46e" title=" " alt="" coords="1162,518,1250,544"/>
<area shape="poly" title=" " alt="" coords="1072,566,1146,545,1148,550,1073,571"/>
<area shape="rect" href="socket_8c.html#ac087e3021464b4aa649a041c8f547088" title=" " alt="" coords="1173,670,1239,696"/>
<area shape="poly" title=" " alt="" coords="1050,593,1169,660,1167,665,1047,598"/>
<area shape="poly" title=" " alt="" coords="1056,566,1087,548,1116,522,1143,493,1185,440,1189,444,1147,497,1120,526,1090,552,1059,571"/>
<area shape="poly" title=" " alt="" coords="1240,690,1329,714,1327,719,1239,695"/>
<area shape="rect" href="socket_8c.html#a73c92624f86d6b9ff6bc7d316e72c64c" title=" " alt="" coords="1344,873,1442,899"/>
<area shape="poly" title=" " alt="" coords="1221,695,1372,860,1368,864,1217,698"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="1518,1076,1624,1101"/>
<area shape="poly" title=" " alt="" coords="1406,746,1435,795,1466,860,1475,891,1479,919,1480,968,1486,1013,1496,1036,1513,1062,1516,1065,1512,1068,1509,1065,1491,1039,1481,1015,1475,968,1474,919,1470,892,1461,862,1430,797,1401,749"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="1511,1025,1631,1051"/>
<area shape="poly" title=" " alt="" coords="1405,746,1557,1010,1552,1013,1400,749"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="1527,721,1615,747"/>
<area shape="poly" title=" " alt="" coords="1446,731,1512,731,1512,737,1446,737"/>
<area shape="poly" title=" " alt="" coords="1221,428,1277,505,1339,615,1382,706,1377,708,1334,617,1273,507,1216,432"/>
<area shape="poly" title=" " alt="" coords="1039,137,1064,168,1091,207,1107,240,1115,268,1124,295,1139,327,1161,361,1184,390,1180,393,1157,364,1134,330,1119,297,1110,269,1102,242,1086,210,1060,171,1035,141"/>
<area shape="rect" href="dlp_8c.html#a032b2d86af38002420c06e64d8742ee4" title=" " alt="" coords="1159,290,1253,316"/>
<area shape="poly" title=" " alt="" coords="1040,137,1182,277,1178,281,1036,141"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="1158,38,1254,64"/>
<area shape="poly" title=" " alt="" coords="1056,110,1157,68,1159,73,1058,115"/>
<area shape="poly" title=" " alt="" coords="1073,137,1143,157,1142,162,1072,142"/>
<area shape="rect" href="socket_8c.html#a6d145a62ddf40544ae37407640b0e353" title=" " alt="" coords="1166,113,1246,139"/>
<area shape="poly" title=" " alt="" coords="1089,123,1150,123,1150,129,1089,129"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="1348,38,1438,64"/>
<area shape="poly" title=" " alt="" coords="1254,49,1333,49,1333,54,1254,54"/>
<area shape="poly" title=" " alt="" coords="1220,188,1249,226,1277,277,1302,336,1323,398,1356,521,1378,629,1391,705,1385,706,1373,630,1351,522,1318,400,1297,338,1273,279,1244,229,1216,191"/>
<area shape="poly" title=" " alt="" coords="1248,131,1263,138,1277,150,1303,194,1325,259,1344,336,1359,421,1381,586,1392,705,1387,706,1376,587,1354,422,1339,337,1320,260,1298,197,1273,153,1261,143,1245,136"/>
<area shape="rect" href="dlp_8c.html#ae92dd2edab1c8ed95d762ea1725b5431" title=" " alt="" coords="977,417,1070,443"/>
<area shape="poly" title=" " alt="" coords="896,462,962,444,963,449,898,467"/>
<area shape="poly" title=" " alt="" coords="906,364,1143,314,1144,319,907,369"/>
<area shape="poly" title=" " alt="" coords="895,390,963,410,962,415,893,395"/>
<area shape="poly" title=" " alt="" coords="911,426,962,427,962,432,911,432"/>
<area shape="poly" title=" " alt="" coords="901,639,959,649,1117,649,1216,650,1276,655,1327,679,1368,709,1365,713,1324,684,1274,661,1216,656,1117,655,958,654,900,645"/>
<area shape="poly" title=" " alt="" coords="469,294,510,232,540,194,574,159,625,110,668,74,716,46,782,22,830,11,880,5,978,5,1069,16,1144,32,1142,37,1069,22,978,11,880,10,831,16,784,27,719,51,672,78,629,114,578,163,544,198,514,235,473,297"/>
<area shape="rect" href="pilot-getrom_8c.html#af9a73ae2eff1060ddfff730f812db4a2" title=" " alt="" coords="592,173,719,199"/>
<area shape="poly" title=" " alt="" coords="473,293,515,251,543,228,574,208,584,203,587,207,577,212,547,232,518,255,477,297"/>
<area shape="rect" href="dlp_8c.html#a9cac32ae742584335d86a9fcec40631a" title=" " alt="" coords="580,369,730,395"/>
<area shape="poly" title=" " alt="" coords="499,320,606,361,604,366,497,325"/>
<area shape="rect" href="dlp_8c.html#ae7892afecc1f271dac5596703412a63b" title=" " alt="" coords="595,296,716,321"/>
<area shape="poly" title=" " alt="" coords="507,306,579,306,579,311,507,311"/>
<area shape="rect" href="syspkt_8c.html#a8d9588d3d9c10a6470f60ec1158319ec" title=" " alt="" coords="615,418,696,444"/>
<area shape="poly" title=" " alt="" coords="489,320,529,348,544,364,553,379,562,392,577,405,601,417,599,422,574,410,558,395,548,381,540,367,526,352,486,324"/>
<area shape="rect" href="pilot-getrom_8c.html#aa9cb5ecf65cba7a6a236ab4ac254af4b" title=" " alt="" coords="615,222,696,248"/>
<area shape="poly" title=" " alt="" coords="490,293,575,257,599,248,601,253,577,262,492,298"/>
<area shape="rect" href="userland_8c.html#ae82e14b07cad44d7f86d1a3bffd28472" title=" " alt="" coords="783,37,910,63"/>
<area shape="poly" title=" " alt="" coords="669,171,717,128,782,80,801,68,804,73,784,84,721,132,672,175"/>
<area shape="poly" title=" " alt="" coords="678,366,782,308,804,296,806,301,784,312,681,371"/>
<area shape="poly" title=" " alt="" coords="705,366,783,351,833,348,884,349,985,360,1076,377,1149,396,1147,402,1075,383,984,365,884,354,833,353,783,357,706,371"/>
<area shape="poly" title=" " alt="" coords="714,393,736,404,752,416,761,428,770,440,785,452,791,456,788,460,781,456,767,444,757,431,748,420,734,408,711,398"/>
<area shape="poly" title=" " alt="" coords="731,378,771,378,771,383,731,384"/>
<area shape="poly" title=" " alt="" coords="712,393,777,409,776,414,711,398"/>
<area shape="poly" title=" " alt="" coords="720,393,737,404,834,602,830,604,733,408,717,398"/>
<area shape="poly" title=" " alt="" coords="623,370,617,361,621,351,634,345,655,342,678,345,691,352,688,356,677,350,655,348,635,350,625,354,622,360,628,367"/>
<area shape="poly" title=" " alt="" coords="716,296,794,284,795,289,717,302"/>
<area shape="poly" title=" " alt="" coords="678,293,725,269,782,250,870,233,941,227,975,230,1010,238,1048,253,1090,275,1133,321,1187,390,1183,393,1129,324,1087,279,1046,258,1009,244,974,235,941,232,871,238,784,255,727,274,680,298"/>
<area shape="poly" title=" " alt="" coords="679,293,733,258,794,209,839,166,887,129,918,113,958,98,1008,89,1060,89,1109,96,1152,106,1151,111,1108,101,1060,94,1009,94,959,103,921,118,890,134,842,170,798,213,737,263,681,297"/>
<area shape="poly" title=" " alt="" coords="718,318,737,331,750,346,757,362,762,392,767,423,773,437,785,452,787,454,784,458,781,456,769,440,762,424,757,393,752,363,745,349,733,335,715,323"/>
<area shape="poly" title=" " alt="" coords="704,320,736,330,803,357,801,362,734,335,702,325"/>
<area shape="poly" title=" " alt="" coords="717,320,737,331,754,349,762,367,769,385,785,403,789,406,786,410,781,407,765,388,757,369,749,352,733,335,715,324"/>
<area shape="poly" title=" " alt="" coords="718,318,737,331,754,352,764,372,772,411,774,453,778,477,786,502,809,556,833,602,828,604,804,558,780,504,773,478,769,454,766,412,759,374,749,355,733,335,715,322"/>
<area shape="poly" title=" " alt="" coords="623,297,617,287,621,277,634,271,655,269,678,272,691,278,688,283,677,277,655,274,635,276,625,281,622,287,628,294"/>
<area shape="poly" title=" " alt="" coords="490,360,509,348,526,332,536,316,542,300,547,269,553,239,561,223,574,208,577,205,581,209,578,212,565,226,558,241,552,270,547,302,541,318,530,336,512,352,493,364"/>
<area shape="poly" title=" " alt="" coords="507,374,564,376,564,382,507,379"/>
<area shape="poly" title=" " alt="" coords="496,359,575,330,593,324,595,329,577,335,498,364"/>
<area shape="poly" title=" " alt="" coords="507,386,601,413,600,418,506,391"/>
<area shape="poly" title=" " alt="" coords="488,360,526,332,540,313,548,294,557,276,574,257,600,244,602,248,577,261,561,279,553,296,545,315,530,336,491,364"/>
<area shape="rect" href="dlp_8c.html#a1a110d8bbe35329c26dcd941c9c2aca0" title=" " alt="" coords="395,492,528,517"/>
<area shape="poly" title=" " alt="" coords="203,520,380,508,380,513,204,525"/>
<area shape="poly" title=" " alt="" coords="480,516,522,547,577,577,628,594,681,607,778,622,777,627,680,612,626,599,575,582,519,552,477,520"/>
<area shape="poly" title=" " alt="" coords="490,489,575,453,599,444,601,449,577,458,492,494"/>
<area shape="poly" title=" " alt="" coords="434,493,429,483,432,474,443,467,462,465,481,468,492,474,489,479,479,473,461,470,445,472,436,477,434,483,438,490"/>
<area shape="rect" href="utils_8c.html#a16173a2940fee2ae9756d00109d096ee" title=" " alt="" coords="620,468,690,493"/>
<area shape="poly" title=" " alt="" coords="528,494,604,484,605,489,528,499"/>
<area shape="rect" href="dlp_8c.html#a9f0c8f272d342b38d3c05c2e1906d08d" title=" " alt="" coords="595,541,716,567"/>
<area shape="poly" title=" " alt="" coords="196,587,579,557,579,562,196,592"/>
<area shape="poly" title=" " alt="" coords="688,538,712,524,733,504,746,485,754,467,760,432,765,396,781,353,799,325,819,301,823,304,803,328,785,355,770,397,765,433,759,468,751,487,737,508,715,528,691,543"/>
<area shape="poly" title=" " alt="" coords="717,563,829,584,959,605,1007,609,1049,610,1120,606,1154,606,1191,609,1230,618,1276,634,1305,649,1331,668,1373,708,1369,712,1328,673,1302,654,1274,639,1229,623,1190,614,1154,611,1120,611,1049,615,1007,614,958,610,828,590,716,569"/>
<area shape="poly" title=" " alt="" coords="716,541,910,501,999,479,1088,453,1151,432,1152,438,1089,458,1001,484,911,506,717,546"/>
<area shape="poly" title=" " alt="" coords="689,538,797,494,799,499,691,543"/>
<area shape="poly" title=" " alt="" coords="686,538,711,524,733,504,749,478,755,453,762,427,781,402,784,399,788,403,785,405,767,430,760,454,754,480,737,508,714,528,689,543"/>
<area shape="poly" title=" " alt="" coords="681,538,733,504,747,490,756,477,766,464,781,450,787,447,790,451,785,455,770,468,761,480,751,493,737,508,684,543"/>
<area shape="poly" title=" " alt="" coords="691,565,799,609,797,613,689,570"/>
<area shape="poly" title=" " alt="" coords="623,542,617,533,621,523,634,517,655,514,678,517,691,524,688,528,677,522,655,520,635,522,625,526,622,532,628,539"/>
<area shape="poly" title=" " alt="" coords="468,998,637,704,641,707,473,1000"/>
<area shape="poly" title=" " alt="" coords="496,998,575,975,709,945,768,937,845,934,1025,934,1156,940,1183,938,1211,932,1240,920,1273,902,1298,879,1326,841,1375,759,1380,762,1330,844,1302,882,1277,907,1243,925,1212,937,1184,943,1156,945,1025,939,845,939,769,942,710,950,576,981,497,1003"/>
<area shape="poly" title=" " alt="" coords="497,1021,561,1040,647,1062,745,1079,845,1086,1207,1086,1503,1086,1503,1091,1207,1091,845,1091,745,1084,646,1067,560,1046,496,1027"/>
<area shape="poly" title=" " alt="" coords="497,1014,648,1027,845,1035,1207,1035,1496,1035,1496,1041,1207,1041,845,1041,647,1032,496,1019"/>
<area shape="poly" title=" " alt="" coords="496,1006,647,993,845,985,1025,985,1096,985,1152,982,1206,973,1274,953,1321,931,1361,906,1364,910,1324,936,1276,958,1208,978,1152,988,1096,990,1025,990,845,990,648,998,497,1012"/>
<area shape="rect" href="socket_8c.html#ab636d5244f935701991791240583295a" title=" " alt="" coords="576,1176,735,1201"/>
<area shape="poly" title=" " alt="" coords="471,1024,510,1091,540,1129,577,1163,583,1166,580,1171,574,1167,536,1133,505,1094,467,1027"/>
<area shape="rect" href="socket_8c.html#af6e9a4a5aabc48480dbd6961d24819ec" title=" " alt="" coords="601,1126,710,1152"/>
<area shape="poly" title=" " alt="" coords="477,1024,520,1063,577,1105,601,1118,599,1122,574,1110,517,1067,474,1028"/>
<area shape="poly" title=" " alt="" coords="158,796,186,735,236,644,269,594,306,543,348,496,394,453,429,433,461,425,492,418,526,399,541,382,549,365,557,348,574,331,580,327,583,331,577,335,562,351,554,367,545,385,529,403,494,423,462,430,431,438,397,457,352,499,310,547,273,597,241,647,191,737,163,798"/>
<area shape="poly" title=" " alt="" coords="179,794,251,757,613,572,616,576,253,762,181,799"/>
<area shape="poly" title=" " alt="" coords="167,821,203,862,254,907,294,933,336,956,413,992,411,996,333,961,291,937,250,911,200,866,163,825"/>
<area shape="rect" href="socket_8c.html#a822f6b3639c99cb43468b11ff7c41799" title=" " alt="" coords="252,772,347,797"/>
<area shape="poly" title=" " alt="" coords="199,799,236,793,237,798,200,805"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="268,821,331,847"/>
<area shape="poly" title=" " alt="" coords="200,815,254,824,253,829,199,820"/>
<area shape="rect" href="socket_8c.html#a251bfe75de5f2d1c4ff58701c887a4e0" title=" " alt="" coords="265,870,334,896"/>
<area shape="poly" title=" " alt="" coords="182,821,260,861,258,865,180,826"/>
<area shape="rect" href="socket_8c.html#aa2d1d1b59340099588ea7bc15508745b" title=" " alt="" coords="1167,1213,1244,1239"/>
<area shape="poly" title=" " alt="" coords="163,822,198,887,224,927,254,966,332,1052,397,1117,432,1143,471,1167,519,1189,577,1211,655,1233,736,1247,818,1254,898,1255,1043,1247,1151,1233,1152,1238,1044,1253,898,1261,818,1259,735,1252,654,1239,575,1217,517,1194,469,1172,429,1147,394,1121,328,1056,250,969,219,930,193,890,158,825"/>
<area shape="poly" title=" " alt="" coords="348,782,654,782,1025,782,1106,778,1187,770,1325,746,1325,751,1187,775,1106,784,1025,787,654,787,348,787"/>
<area shape="poly" title=" " alt="" coords="335,796,349,807,386,851,416,899,438,946,453,984,448,986,433,948,411,902,382,854,346,811,331,800"/>
<area shape="rect" href="socket_8c.html#a74cb1559592c8a983bfe0c9b0d04e689" title=" " alt="" coords="421,721,502,747"/>
<area shape="poly" title=" " alt="" coords="342,769,406,749,407,754,344,774"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="974,822,1073,848"/>
<area shape="poly" title=" " alt="" coords="331,831,959,833,959,838,331,837"/>
<area shape="poly" title=" " alt="" coords="1073,832,1168,825,1222,815,1274,801,1321,779,1361,754,1364,758,1324,784,1276,806,1223,820,1168,830,1073,838"/>
<area shape="poly" title=" " alt="" coords="335,881,654,883,1025,883,1097,883,1154,877,1208,863,1274,834,1302,818,1328,797,1369,757,1373,761,1331,801,1305,822,1276,839,1210,868,1155,883,1098,888,1025,889,654,889,335,886"/>
<area shape="rect" href="socket_8c.html#aeb6cb5d5a1d0d9e5ed6222318ec7e2fe" title=" " alt="" coords="1340,1188,1446,1213"/>
<area shape="poly" title=" " alt="" coords="1245,1218,1325,1207,1325,1212,1245,1223"/>
<area shape="rect" href="socket_8c.html#adb4121505778ba4f07deb4ffd88a8a5e" title=" " alt="" coords="1355,1237,1431,1263"/>
<area shape="poly" title=" " alt="" coords="1245,1228,1340,1241,1339,1246,1245,1234"/>
<area shape="rect" href="socket_8c.html#aeb10f9e94747279130170a2e215372b2" title=" " alt="" coords="1323,1126,1463,1152"/>
<area shape="poly" title=" " alt="" coords="1234,1210,1349,1156,1351,1161,1237,1215"/>
<area shape="poly" title=" " alt="" coords="1440,1123,1509,1104,1510,1109,1442,1128"/>
<area shape="poly" title=" " alt="" coords="1411,1124,1456,1094,1510,1061,1521,1055,1524,1060,1513,1066,1458,1098,1414,1128"/>
</map>
</div>

</div>
</div>
<a id="aa9cb5ecf65cba7a6a236ab4ac254af4b" name="aa9cb5ecf65cba7a6a236ab4ac254af4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9cb5ecf65cba7a6a236ab4ac254af4b">&#9670;&#160;</a></span>sighandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sighandler </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>signo</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   55</span>{</div>
<div class="line"><span class="lineno">   56</span>    <a class="code hl_variable" href="#a10d1322f531b82c4ee93422cee1684f4">cancel</a> = 1;</div>
<div class="line"><span class="lineno">   57</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00052">cancel</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00214">do_get_ram()</a>, and <a class="el" href="#l00086">do_get_rom()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pilot-getrom_8c_aa9cb5ecf65cba7a6a236ab4ac254af4b_icgraph.png" border="0" usemap="#apilot-getrom_8c_aa9cb5ecf65cba7a6a236ab4ac254af4b_icgraph" alt=""/></div>
<map name="apilot-getrom_8c_aa9cb5ecf65cba7a6a236ab4ac254af4b_icgraph" id="apilot-getrom_8c_aa9cb5ecf65cba7a6a236ab4ac254af4b_icgraph">
<area shape="rect" title=" " alt="" coords="240,31,320,56"/>
<area shape="rect" href="pilot-getrom_8c.html#a16b6c113ebaaf096fa74c2e8949ea40c" title=" " alt="" coords="103,5,192,31"/>
<area shape="poly" title=" " alt="" coords="224,36,192,29,193,24,225,30"/>
<area shape="rect" href="pilot-getrom_8c.html#a1d8f79b16f99255230068f8d6d442136" title=" " alt="" coords="103,55,192,80"/>
<area shape="poly" title=" " alt="" coords="225,56,193,62,192,57,224,51"/>
<area shape="rect" href="pilot-getrom_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="5,31,55,56"/>
<area shape="poly" title=" " alt="" coords="88,34,55,41,54,36,87,28"/>
<area shape="poly" title=" " alt="" coords="87,58,54,51,55,46,88,53"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a10d1322f531b82c4ee93422cee1684f4" name="a10d1322f531b82c4ee93422cee1684f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10d1322f531b82c4ee93422cee1684f4">&#9670;&#160;</a></span>cancel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cancel = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#l00214">do_get_ram()</a>, <a class="el" href="#l00086">do_get_rom()</a>, <a class="el" href="#l01488">palm_install_VFS()</a>, <a class="el" href="#l01183">pi_file_install_VFS()</a>, <a class="el" href="#l00706">pi_file_retrieve_VFS()</a>, <a class="el" href="#l00042">pi_file_retrieve_VFS()</a>, and <a class="el" href="#l00054">sighandler()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="pilot-getrom_8c.html">pilot-getrom.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
