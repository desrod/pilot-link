<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pilot-link: libpisock/net.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pilot-link
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('net_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">net.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;pi-debug.h&quot;</code><br />
<code>#include &quot;pi-source.h&quot;</code><br />
<code>#include &quot;pi-net.h&quot;</code><br />
<code>#include &quot;pi-error.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for net.c:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c__incl.png" border="0" usemap="#alibpisock_2net_8c" alt=""/></div>
<map name="alibpisock_2net_8c" id="alibpisock_2net_8c">
<area shape="rect" title=" " alt="" coords="290,5,395,31"/>
<area shape="rect" title=" " alt="" coords="5,79,69,105"/>
<area shape="poly" title=" " alt="" coords="290,33,84,81,83,75,289,28"/>
<area shape="rect" title=" " alt="" coords="92,79,152,105"/>
<area shape="poly" title=" " alt="" coords="306,34,168,78,167,73,304,29"/>
<area shape="rect" title=" " alt="" coords="177,79,238,105"/>
<area shape="poly" title=" " alt="" coords="321,34,245,74,243,69,318,29"/>
<area shape="rect" title=" " alt="" coords="262,79,326,105"/>
<area shape="poly" title=" " alt="" coords="337,33,313,67,309,64,332,30"/>
<area shape="rect" title=" " alt="" coords="351,79,432,105"/>
<area shape="poly" title=" " alt="" coords="353,30,377,65,373,68,348,33"/>
<area shape="rect" title=" " alt="" coords="457,79,542,105"/>
<area shape="poly" title=" " alt="" coords="370,29,460,70,458,75,368,34"/>
<area shape="rect" title=" " alt="" coords="566,79,630,105"/>
<area shape="poly" title=" " alt="" coords="386,29,552,75,551,80,385,34"/>
<area shape="rect" title=" " alt="" coords="655,79,726,105"/>
<area shape="poly" title=" " alt="" coords="396,27,640,76,639,81,395,32"/>
</map>
</div>
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8490cece6f735d9351836466119034d9" id="r_a8490cece6f735d9351836466119034d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8490cece6f735d9351836466119034d9">PI_NET_TIMEOUT</a>&#160;&#160;&#160;30*1000</td></tr>
<tr class="separator:a8490cece6f735d9351836466119034d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa1aa11043c32d2b6ea7a60cadadccb94" id="r_aa1aa11043c32d2b6ea7a60cadadccb94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1aa11043c32d2b6ea7a60cadadccb94">net_dump</a> (unsigned char *header, unsigned char *data)</td></tr>
<tr class="separator:aa1aa11043c32d2b6ea7a60cadadccb94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd2d98d388794603edc8c3ba56e7f85" id="r_a8bd2d98d388794603edc8c3ba56e7f85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8bd2d98d388794603edc8c3ba56e7f85">net_dump_header</a> (unsigned char *data, int rxtx, int <a class="el" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>)</td></tr>
<tr class="separator:a8bd2d98d388794603edc8c3ba56e7f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ffb223a4717a7d4cd0821832515128" id="r_ae2ffb223a4717a7d4cd0821832515128"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2ffb223a4717a7d4cd0821832515128">net_flush</a> (pi_socket_t *ps, int <a class="el" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>)</td></tr>
<tr class="separator:ae2ffb223a4717a7d4cd0821832515128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acecc8f37f30eaa1114f7a7da0e18354b" id="r_acecc8f37f30eaa1114f7a7da0e18354b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acecc8f37f30eaa1114f7a7da0e18354b">net_getsockopt</a> (pi_socket_t *ps, int level, int option_name, void *option_value, size_t *option_len)</td></tr>
<tr class="separator:acecc8f37f30eaa1114f7a7da0e18354b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ccbd795f5d579a721b9d3632e46cfeb" id="r_a2ccbd795f5d579a721b9d3632e46cfeb"><td class="memItemLeft" align="right" valign="top">pi_protocol_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ccbd795f5d579a721b9d3632e46cfeb">net_protocol</a> (void)</td></tr>
<tr class="separator:a2ccbd795f5d579a721b9d3632e46cfeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a2ae2a8ee5d0d85021e0d761b908d26" id="r_a0a2ae2a8ee5d0d85021e0d761b908d26"><td class="memItemLeft" align="right" valign="top">static pi_protocol_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a2ae2a8ee5d0d85021e0d761b908d26">net_protocol_dup</a> (pi_protocol_t *prot)</td></tr>
<tr class="separator:a0a2ae2a8ee5d0d85021e0d761b908d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c96a76b0124c6c9a9ca6a63f9068078" id="r_a1c96a76b0124c6c9a9ca6a63f9068078"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c96a76b0124c6c9a9ca6a63f9068078">net_protocol_free</a> (pi_protocol_t *prot)</td></tr>
<tr class="separator:a1c96a76b0124c6c9a9ca6a63f9068078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c20ece547e720eec693b02b39774c8b" id="r_a6c20ece547e720eec693b02b39774c8b"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a> (pi_socket_t *ps, pi_buffer_t *msg, size_t len, int <a class="el" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>)</td></tr>
<tr class="separator:a6c20ece547e720eec693b02b39774c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228af3513fa40c477512b1d69eea2112" id="r_a228af3513fa40c477512b1d69eea2112"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a228af3513fa40c477512b1d69eea2112">net_rx_handshake</a> (pi_socket_t *ps)</td></tr>
<tr class="separator:a228af3513fa40c477512b1d69eea2112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f55f647bcd923b897bf8061d4e739ee" id="r_a3f55f647bcd923b897bf8061d4e739ee"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f55f647bcd923b897bf8061d4e739ee">net_setsockopt</a> (pi_socket_t *ps, int level, int option_name, const void *option_value, size_t *option_len)</td></tr>
<tr class="separator:a3f55f647bcd923b897bf8061d4e739ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1670601987b6494055bea1a75938955e" id="r_a1670601987b6494055bea1a75938955e"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1670601987b6494055bea1a75938955e">net_tx</a> (pi_socket_t *ps, const unsigned char *msg, size_t len, int <a class="el" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>)</td></tr>
<tr class="separator:a1670601987b6494055bea1a75938955e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a024f8bd13770fb4b83bd6994aa0e93" id="r_a6a024f8bd13770fb4b83bd6994aa0e93"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a024f8bd13770fb4b83bd6994aa0e93">net_tx_handshake</a> (pi_socket_t *ps)</td></tr>
<tr class="separator:a6a024f8bd13770fb4b83bd6994aa0e93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8490cece6f735d9351836466119034d9" name="a8490cece6f735d9351836466119034d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8490cece6f735d9351836466119034d9">&#9670;&#160;</a></span>PI_NET_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PI_NET_TIMEOUT&#160;&#160;&#160;30*1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#l00407">net_rx()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa1aa11043c32d2b6ea7a60cadadccb94" name="aa1aa11043c32d2b6ea7a60cadadccb94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1aa11043c32d2b6ea7a60cadadccb94">&#9670;&#160;</a></span>net_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void net_dump </td>
          <td>(</td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>header</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  703</span>{</div>
<div class="line"><span class="lineno">  704</span>    <span class="keywordtype">size_t</span>  <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>    <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = get_long(&amp;header[PI_NET_OFFSET_SIZE]);</div>
<div class="line"><span class="lineno">  707</span>    <a class="code hl_function" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9">pi_dumpdata</a>((<span class="keywordtype">char</span> *)data, <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>);</div>
<div class="line"><span class="lineno">  708</span>}</div>
<div class="ttc" id="adebug_8c_html_ac942525fcc03cc9c77dfe0628ade03b9"><div class="ttname"><a href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9">pi_dumpdata</a></div><div class="ttdeci">void pi_dumpdata(const char *buf, size_t len)</div><div class="ttdef"><b>Definition</b> debug.c:222</div></div>
<div class="ttc" id="avalidate_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> validate.cc:81</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00222">pi_dumpdata()</a>, and <a class="el" href="#l00081">size</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00407">net_rx()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_aa1aa11043c32d2b6ea7a60cadadccb94_cgraph.png" border="0" usemap="#anet_8c_aa1aa11043c32d2b6ea7a60cadadccb94_cgraph" alt=""/></div>
<map name="anet_8c_aa1aa11043c32d2b6ea7a60cadadccb94_cgraph" id="anet_8c_aa1aa11043c32d2b6ea7a60cadadccb94_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,84,31"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="132,5,227,31"/>
<area shape="poly" title=" " alt="" coords="84,16,116,16,116,21,84,21"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="275,5,365,31"/>
<area shape="poly" title=" " alt="" coords="227,16,259,16,259,21,227,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_aa1aa11043c32d2b6ea7a60cadadccb94_icgraph.png" border="0" usemap="#anet_8c_aa1aa11043c32d2b6ea7a60cadadccb94_icgraph" alt=""/></div>
<map name="anet_8c_aa1aa11043c32d2b6ea7a60cadadccb94_icgraph" id="anet_8c_aa1aa11043c32d2b6ea7a60cadadccb94_icgraph">
<area shape="rect" title=" " alt="" coords="1959,223,2038,248"/>
<area shape="rect" href="net_8c.html#a6c20ece547e720eec693b02b39774c8b" title=" " alt="" coords="1854,223,1911,248"/>
<area shape="poly" title=" " alt="" coords="1944,238,1912,238,1912,233,1944,233"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1714,148,1806,174"/>
<area shape="poly" title=" " alt="" coords="1846,217,1781,177,1784,172,1849,212"/>
<area shape="rect" href="net_8c.html#a228af3513fa40c477512b1d69eea2112" title=" " alt="" coords="1347,223,1474,248"/>
<area shape="poly" title=" " alt="" coords="1838,238,1475,238,1475,233,1838,233"/>
<area shape="rect" href="net_8c.html#a6a024f8bd13770fb4b83bd6994aa0e93" title=" " alt="" coords="1347,333,1474,359"/>
<area shape="poly" title=" " alt="" coords="1839,248,1470,335,1469,330,1838,243"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1522,136,1666,162"/>
<area shape="poly" title=" " alt="" coords="1698,159,1666,157,1666,151,1698,154"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,85,783,111"/>
<area shape="poly" title=" " alt="" coords="1520,135,1474,126,1353,107,1300,102,1232,101,1044,101,783,101,783,96,1044,96,1232,96,1300,97,1354,102,1475,121,1521,130"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1360,136,1461,162"/>
<area shape="poly" title=" " alt="" coords="1506,152,1461,152,1461,146,1506,146"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,55,651,80"/>
<area shape="poly" title=" " alt="" coords="683,89,650,83,651,78,684,84"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,108,613,117,612,111,683,102"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,5,612,31"/>
<area shape="poly" title=" " alt="" coords="707,79,649,45,612,29,614,24,652,40,710,74"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,136,1299,162"/>
<area shape="poly" title=" " alt="" coords="1344,152,1299,152,1299,146,1344,146"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,136,1114,162"/>
<area shape="poly" title=" " alt="" coords="1146,152,1114,152,1114,146,1146,146"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,216,929,242"/>
<area shape="poly" title=" " alt="" coords="990,170,979,175,903,218,901,213,976,170,988,165"/>
<area shape="poly" title=" " alt="" coords="852,207,754,113,758,109,856,203"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,240,772,266"/>
<area shape="poly" title=" " alt="" coords="816,243,773,250,772,245,815,237"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,203,640,228"/>
<area shape="poly" title=" " alt="" coords="694,244,639,231,641,226,695,239"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,259,637,264,637,258,694,254"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,301,637,327"/>
<area shape="poly" title=" " alt="" coords="696,274,652,293,625,303,623,298,650,288,694,269"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,404,633,430"/>
<area shape="poly" title=" " alt="" coords="719,279,603,405,599,402,715,276"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,153,625,179"/>
<area shape="poly" title=" " alt="" coords="710,233,649,192,624,181,627,176,652,188,713,228"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,240,476,281"/>
<area shape="poly" title=" " alt="" coords="524,299,473,284,474,279,526,294"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,404,436,430"/>
<area shape="poly" title=" " alt="" coords="526,420,437,420,437,414,526,414"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,453,450,479"/>
<area shape="poly" title=" " alt="" coords="527,435,451,456,450,450,526,430"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,503,435,528"/>
<area shape="poly" title=" " alt="" coords="559,442,522,468,477,494,437,509,435,504,475,489,519,464,556,437"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,552,424,578"/>
<area shape="poly" title=" " alt="" coords="572,444,533,494,507,521,478,543,452,556,426,563,424,558,450,551,475,539,503,517,529,491,567,441"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,305,424,331"/>
<area shape="poly" title=" " alt="" coords="556,396,519,370,475,345,424,326,426,321,477,340,522,365,559,392"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,355,424,380"/>
<area shape="poly" title=" " alt="" coords="526,404,424,376,425,371,528,398"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,404,273,430"/>
<area shape="poly" title=" " alt="" coords="336,451,272,433,274,428,338,446"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,453,275,479"/>
<area shape="poly" title=" " alt="" coords="333,469,275,469,275,464,333,464"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,429,127,455"/>
<area shape="poly" title=" " alt="" coords="162,430,128,435,127,430,161,424"/>
<area shape="poly" title=" " alt="" coords="159,459,126,454,127,449,160,454"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,503,250,528"/>
<area shape="poly" title=" " alt="" coords="348,518,250,518,250,513,348,513"/>
<area shape="poly" title=" " alt="" coords="1374,217,1298,175,1272,165,1274,160,1300,170,1377,212"/>
<area shape="rect" href="inet_8c.html#addba3dbe3eee187ecb6af12da94e12de" title=" " alt="" coords="1178,185,1283,211"/>
<area shape="poly" title=" " alt="" coords="1331,222,1283,212,1284,206,1332,217"/>
<area shape="rect" href="serial_8c.html#afd1f0015559a46379c5a5302589450fa" title=" " alt="" coords="1173,235,1288,260"/>
<area shape="poly" title=" " alt="" coords="1332,243,1289,246,1288,241,1332,238"/>
<area shape="rect" href="usb_8c.html#a22b05dc9bd4af901e301699fd78ca936" title=" " alt="" coords="1178,284,1283,310"/>
<area shape="poly" title=" " alt="" coords="1357,256,1271,286,1270,281,1355,251"/>
<area shape="rect" href="inet_8c.html#a4eb490f2821f8a144bd9940e66d11354" title=" " alt="" coords="993,185,1098,211"/>
<area shape="poly" title=" " alt="" coords="1162,201,1098,201,1098,196,1162,196"/>
<area shape="poly" title=" " alt="" coords="978,213,930,222,929,217,977,208"/>
<area shape="rect" href="serial_8c.html#ae73e19d76cbb99f66343c25eef4f73eb" title=" " alt="" coords="988,235,1103,260"/>
<area shape="poly" title=" " alt="" coords="1157,250,1103,250,1103,245,1157,245"/>
<area shape="poly" title=" " alt="" coords="972,242,929,237,930,232,973,237"/>
<area shape="rect" href="usb_8c.html#a68c518ca08dac477013ed3b56ee8c174" title=" " alt="" coords="993,284,1098,310"/>
<area shape="poly" title=" " alt="" coords="1162,300,1098,300,1098,294,1162,294"/>
<area shape="poly" title=" " alt="" coords="990,281,976,275,908,245,910,240,978,270,992,276"/>
<area shape="rect" href="inet_8c.html#a11fa9878cd5a0b710987f3b3468fbbc8" title=" " alt="" coords="1174,333,1286,359"/>
<area shape="poly" title=" " alt="" coords="1332,349,1287,349,1287,344,1332,344"/>
<area shape="rect" href="usb_8c.html#a0589e9bb1b983864e59ba5d8cdca033f" title=" " alt="" coords="1174,383,1286,408"/>
<area shape="poly" title=" " alt="" coords="1347,366,1281,385,1279,379,1345,361"/>
<area shape="poly" title=" " alt="" coords="1163,327,1160,324,1141,298,1135,273,1129,248,1112,224,1096,214,1099,209,1116,220,1134,246,1140,272,1146,296,1164,320,1167,323"/>
<area shape="poly" title=" " alt="" coords="1171,379,1160,374,1106,342,1063,312,1066,308,1109,338,1163,369,1173,374"/>
</map>
</div>

</div>
</div>
<a id="a8bd2d98d388794603edc8c3ba56e7f85" name="a8bd2d98d388794603edc8c3ba56e7f85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bd2d98d388794603edc8c3ba56e7f85">&#9670;&#160;</a></span>net_dump_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void net_dump_header </td>
          <td>(</td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>rxtx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sd</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  679</span>{</div>
<div class="line"><span class="lineno">  680</span>    LOG((PI_DBG_NET, PI_DBG_LVL_NONE,</div>
<div class="line"><span class="lineno">  681</span>        <span class="stringliteral">&quot;NET %s sd=%i type=%d txid=0x%.2x len=0x%.4x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  682</span>        rxtx ? <span class="stringliteral">&quot;TX&quot;</span> : <span class="stringliteral">&quot;RX&quot;</span>,</div>
<div class="line"><span class="lineno">  683</span>        <a class="code hl_variable" href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a>,</div>
<div class="line"><span class="lineno">  684</span>        get_byte(&amp;data[PI_NET_OFFSET_TYPE]),</div>
<div class="line"><span class="lineno">  685</span>        get_byte(&amp;data[PI_NET_OFFSET_TXID]),</div>
<div class="line"><span class="lineno">  686</span>        get_long(&amp;data[PI_NET_OFFSET_SIZE])));</div>
<div class="line"><span class="lineno">  687</span>}</div>
<div class="ttc" id="apilot-xfer_8c_html_a06b0afe769d54ae94259d8532bc878b0"><div class="ttname"><a href="pilot-xfer_8c.html#a06b0afe769d54ae94259d8532bc878b0">sd</a></div><div class="ttdeci">int sd</div><div class="ttdef"><b>Definition</b> pilot-xfer.c:107</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00107">sd</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00407">net_rx()</a>, and <a class="el" href="#l00305">net_tx()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a8bd2d98d388794603edc8c3ba56e7f85_icgraph.png" border="0" usemap="#anet_8c_a8bd2d98d388794603edc8c3ba56e7f85_icgraph" alt=""/></div>
<map name="anet_8c_a8bd2d98d388794603edc8c3ba56e7f85_icgraph" id="anet_8c_a8bd2d98d388794603edc8c3ba56e7f85_icgraph">
<area shape="rect" title=" " alt="" coords="1971,265,2096,291"/>
<area shape="rect" href="net_8c.html#a6c20ece547e720eec693b02b39774c8b" title=" " alt="" coords="1866,240,1923,266"/>
<area shape="poly" title=" " alt="" coords="1955,267,1923,261,1924,255,1956,261"/>
<area shape="rect" href="net_8c.html#a1670601987b6494055bea1a75938955e" title=" " alt="" coords="1866,289,1923,315"/>
<area shape="poly" title=" " alt="" coords="1956,294,1924,300,1924,295,1955,289"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1708,215,1800,240"/>
<area shape="poly" title=" " alt="" coords="1850,248,1800,238,1801,233,1851,242"/>
<area shape="rect" href="net_8c.html#a228af3513fa40c477512b1d69eea2112" title=" " alt="" coords="1691,264,1818,290"/>
<area shape="poly" title=" " alt="" coords="1851,263,1819,269,1818,263,1850,258"/>
<area shape="rect" href="net_8c.html#a6a024f8bd13770fb4b83bd6994aa0e93" title=" " alt="" coords="1691,337,1818,363"/>
<area shape="poly" title=" " alt="" coords="1864,277,1776,339,1773,335,1861,272"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1499,112,1643,138"/>
<area shape="poly" title=" " alt="" coords="1724,207,1686,179,1641,153,1614,141,1616,136,1644,148,1689,175,1727,203"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,61,783,87"/>
<area shape="poly" title=" " alt="" coords="1499,111,1375,88,1303,80,1232,77,1044,77,783,77,783,72,1044,72,1232,72,1304,75,1376,83,1500,106"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1348,112,1450,138"/>
<area shape="poly" title=" " alt="" coords="1484,128,1450,128,1450,122,1484,122"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,5,651,31"/>
<area shape="poly" title=" " alt="" coords="689,58,624,34,626,29,690,53"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,55,612,80"/>
<area shape="poly" title=" " alt="" coords="683,74,612,71,613,66,683,69"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="685,92,613,113,612,108,683,87"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,213,1299,239"/>
<area shape="poly" title=" " alt="" coords="1374,150,1340,177,1300,203,1274,215,1272,210,1298,199,1337,173,1370,146"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,213,1114,239"/>
<area shape="poly" title=" " alt="" coords="1146,229,1114,229,1114,224,1146,224"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,219,929,244"/>
<area shape="poly" title=" " alt="" coords="962,232,930,233,929,227,962,226"/>
<area shape="poly" title=" " alt="" coords="855,208,752,89,756,86,859,205"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,241,772,267"/>
<area shape="poly" title=" " alt="" coords="816,245,773,252,772,247,815,239"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,351,640,376"/>
<area shape="poly" title=" " alt="" coords="721,280,690,312,652,342,631,353,629,348,649,337,687,308,717,277"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,153,637,179"/>
<area shape="poly" title=" " alt="" coords="711,234,649,192,626,182,629,177,652,188,714,229"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,203,637,228"/>
<area shape="poly" title=" " alt="" coords="694,245,636,230,638,225,695,240"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,252,633,278"/>
<area shape="poly" title=" " alt="" coords="694,260,634,264,633,259,694,255"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,301,625,327"/>
<area shape="poly" title=" " alt="" coords="696,275,652,293,625,303,623,298,650,288,694,270"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,88,476,129"/>
<area shape="poly" title=" " alt="" coords="529,198,523,194,508,181,498,168,489,156,475,143,456,132,459,127,478,139,493,152,502,165,512,177,526,189,532,193"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,301,436,327"/>
<area shape="poly" title=" " alt="" coords="528,283,437,307,436,302,526,278"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,351,450,376"/>
<area shape="poly" title=" " alt="" coords="532,287,526,291,512,304,503,316,493,329,478,342,452,354,450,349,475,337,489,325,498,313,508,300,523,287,529,283"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,400,435,426"/>
<area shape="poly" title=" " alt="" coords="530,288,526,291,509,315,503,340,497,365,490,378,478,391,458,403,437,410,435,405,456,398,475,387,485,375,492,363,498,339,504,313,522,287,526,284"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,153,424,179"/>
<area shape="poly" title=" " alt="" coords="529,247,523,243,508,230,498,217,489,204,475,192,449,180,424,173,425,168,451,175,478,188,493,201,503,214,512,226,526,239,532,243"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,203,424,228"/>
<area shape="poly" title=" " alt="" coords="526,252,424,224,425,219,528,246"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,252,424,278"/>
<area shape="poly" title=" " alt="" coords="526,268,425,268,425,262,526,262"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,351,273,376"/>
<area shape="poly" title=" " alt="" coords="334,366,273,366,273,361,334,361"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,301,275,327"/>
<area shape="poly" title=" " alt="" coords="336,349,272,330,274,325,338,343"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,327,127,352"/>
<area shape="poly" title=" " alt="" coords="161,357,127,351,128,346,162,351"/>
<area shape="poly" title=" " alt="" coords="160,327,127,332,126,327,159,322"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,400,250,426"/>
<area shape="poly" title=" " alt="" coords="348,416,250,416,250,410,348,410"/>
<area shape="poly" title=" " alt="" coords="1687,263,1642,254,1550,243,1457,236,1300,230,1300,224,1457,231,1550,238,1643,249,1688,257"/>
<area shape="rect" href="inet_8c.html#addba3dbe3eee187ecb6af12da94e12de" title=" " alt="" coords="1518,264,1624,290"/>
<area shape="poly" title=" " alt="" coords="1675,280,1624,280,1624,274,1675,274"/>
<area shape="rect" href="serial_8c.html#afd1f0015559a46379c5a5302589450fa" title=" " alt="" coords="1513,163,1629,188"/>
<area shape="poly" title=" " alt="" coords="1697,260,1689,255,1674,243,1665,232,1641,210,1607,191,1609,187,1644,205,1668,229,1678,240,1692,251,1700,255"/>
<area shape="rect" href="usb_8c.html#a22b05dc9bd4af901e301699fd78ca936" title=" " alt="" coords="1518,313,1624,339"/>
<area shape="poly" title=" " alt="" coords="1690,297,1622,315,1621,310,1689,292"/>
<area shape="rect" href="inet_8c.html#a4eb490f2821f8a144bd9940e66d11354" title=" " alt="" coords="1347,264,1451,290"/>
<area shape="poly" title=" " alt="" coords="1503,280,1452,280,1452,274,1503,274"/>
<area shape="poly" title=" " alt="" coords="1331,278,1170,272,977,254,929,246,930,240,978,249,1170,266,1331,273"/>
<area shape="rect" href="serial_8c.html#ae73e19d76cbb99f66343c25eef4f73eb" title=" " alt="" coords="1173,163,1288,188"/>
<area shape="poly" title=" " alt="" coords="1497,178,1288,178,1288,173,1497,173"/>
<area shape="poly" title=" " alt="" coords="1158,181,1071,189,978,203,918,221,917,215,977,198,1071,184,1157,176"/>
<area shape="rect" href="usb_8c.html#a68c518ca08dac477013ed3b56ee8c174" title=" " alt="" coords="1347,315,1451,340"/>
<area shape="poly" title=" " alt="" coords="1503,329,1452,330,1452,324,1503,324"/>
<area shape="poly" title=" " alt="" coords="1331,326,1169,309,1072,294,977,273,908,247,910,242,978,268,1073,289,1169,304,1332,321"/>
<area shape="rect" href="inet_8c.html#a11fa9878cd5a0b710987f3b3468fbbc8" title=" " alt="" coords="1515,363,1627,388"/>
<area shape="poly" title=" " alt="" coords="1676,364,1628,370,1627,365,1675,358"/>
<area shape="rect" href="usb_8c.html#a0589e9bb1b983864e59ba5d8cdca033f" title=" " alt="" coords="1515,412,1627,438"/>
<area shape="poly" title=" " alt="" coords="1713,373,1644,403,1615,414,1613,409,1642,398,1711,368"/>
<area shape="poly" title=" " alt="" coords="1506,358,1498,354,1483,341,1473,329,1464,317,1450,304,1430,293,1433,288,1453,300,1468,313,1477,326,1486,338,1501,349,1508,354"/>
<area shape="poly" title=" " alt="" coords="1508,408,1498,403,1450,372,1413,343,1417,338,1453,368,1501,399,1510,403"/>
<area shape="poly" title=" " alt="" coords="1862,282,1817,254,1793,243,1796,238,1819,249,1865,278"/>
<area shape="poly" title=" " alt="" coords="1850,297,1818,291,1819,286,1851,292"/>
<area shape="poly" title=" " alt="" coords="1852,319,1795,339,1793,334,1850,314"/>
</map>
</div>

</div>
</div>
<a id="ae2ffb223a4717a7d4cd0821832515128" name="ae2ffb223a4717a7d4cd0821832515128"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2ffb223a4717a7d4cd0821832515128">&#9670;&#160;</a></span>net_flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int net_flush </td>
          <td>(</td>
          <td class="paramtype">pi_socket_t *</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  278</span>{</div>
<div class="line"><span class="lineno">  279</span>    pi_protocol_t   *prot,</div>
<div class="line"><span class="lineno">  280</span>            *next;</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>    prot = <a class="code hl_function" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3">pi_protocol</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">if</span> (prot == NULL)</div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>    next = <a class="code hl_function" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368">pi_protocol_next</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordflow">if</span> (next == NULL)</div>
<div class="line"><span class="lineno">  288</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">return</span> next-&gt;flush(ps, <a class="code hl_variable" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div>
<div class="line"><span class="lineno">  291</span>}</div>
<div class="ttc" id="adarwinusb_8c_html_a1cbb17ede73ea044a04a129bf4d86976"><div class="ttname"><a href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a></div><div class="ttdeci">unsigned short flags</div><div class="ttdef"><b>Definition</b> darwinusb.c:311</div></div>
<div class="ttc" id="asocket_8c_html_a0d734c11092254f751f06eda9d35d7b3"><div class="ttname"><a href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3">pi_protocol</a></div><div class="ttdeci">pi_protocol_t * pi_protocol(int pi_sd, int level)</div><div class="ttdef"><b>Definition</b> socket.c:659</div></div>
<div class="ttc" id="asocket_8c_html_a415df518818c6813556c5607b29e833e"><div class="ttname"><a href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a></div><div class="ttdeci">int pi_set_error(int pi_sd, int error_code)</div><div class="ttdef"><b>Definition</b> socket.c:1625</div></div>
<div class="ttc" id="asocket_8c_html_a8fe4e2f277f57446a40cc3ccf20dd368"><div class="ttname"><a href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368">pi_protocol_next</a></div><div class="ttdeci">pi_protocol_t * pi_protocol_next(int pi_sd, int level)</div><div class="ttdef"><b>Definition</b> socket.c:672</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00311">flags</a>, <a class="el" href="#l00659">pi_protocol()</a>, <a class="el" href="#l00672">pi_protocol_next()</a>, and <a class="el" href="#l01625">pi_set_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00135">net_protocol()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_ae2ffb223a4717a7d4cd0821832515128_cgraph.png" border="0" usemap="#anet_8c_ae2ffb223a4717a7d4cd0821832515128_cgraph" alt=""/></div>
<map name="anet_8c_ae2ffb223a4717a7d4cd0821832515128_cgraph" id="anet_8c_ae2ffb223a4717a7d4cd0821832515128_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,80,80"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="144,5,228,31"/>
<area shape="poly" title=" " alt="" coords="79,52,131,34,133,39,81,57"/>
<area shape="rect" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368" title=" " alt="" coords="128,104,244,130"/>
<area shape="poly" title=" " alt="" coords="81,78,133,96,131,101,79,83"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="141,55,230,80"/>
<area shape="poly" title=" " alt="" coords="80,65,126,65,126,70,80,70"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="324,55,429,80"/>
<area shape="poly" title=" " alt="" coords="229,26,310,48,309,53,228,32"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="308,5,445,31"/>
<area shape="poly" title=" " alt="" coords="228,16,292,16,292,21,228,21"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="516,5,622,31"/>
<area shape="poly" title=" " alt="" coords="429,51,501,33,502,38,430,57"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="509,55,629,80"/>
<area shape="poly" title=" " alt="" coords="430,65,494,65,494,70,430,70"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="525,104,613,130"/>
<area shape="poly" title=" " alt="" coords="430,78,511,99,510,105,429,84"/>
<area shape="poly" title=" " alt="" coords="238,101,309,82,310,87,239,106"/>
<area shape="rect" href="socket_8c.html#af71c99cb810ee32e115acfeebcc4fdcd" title=" " alt="" coords="292,104,461,130"/>
<area shape="poly" title=" " alt="" coords="245,114,276,114,276,120,245,120"/>
<area shape="poly" title=" " alt="" coords="231,65,308,65,308,70,231,70"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_ae2ffb223a4717a7d4cd0821832515128_icgraph.png" border="0" usemap="#anet_8c_ae2ffb223a4717a7d4cd0821832515128_icgraph" alt=""/></div>
<map name="anet_8c_ae2ffb223a4717a7d4cd0821832515128_icgraph" id="anet_8c_ae2ffb223a4717a7d4cd0821832515128_icgraph">
<area shape="rect" title=" " alt="" coords="1828,105,1902,131"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1688,105,1780,131"/>
<area shape="poly" title=" " alt="" coords="1813,121,1780,121,1780,116,1813,116"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1496,105,1640,131"/>
<area shape="poly" title=" " alt="" coords="1672,121,1640,121,1640,116,1672,116"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,80,783,106"/>
<area shape="poly" title=" " alt="" coords="1481,111,1363,100,1232,95,1044,96,783,96,783,90,1044,90,1232,90,1363,95,1481,105"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1347,131,1448,156"/>
<area shape="poly" title=" " alt="" coords="1481,134,1449,139,1448,133,1481,128"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,5,651,31"/>
<area shape="poly" title=" " alt="" coords="704,74,650,45,625,34,627,29,652,40,707,69"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,55,612,80"/>
<area shape="poly" title=" " alt="" coords="683,86,612,74,613,69,684,81"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,104,613,116,612,110,683,99"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,131,1299,156"/>
<area shape="poly" title=" " alt="" coords="1331,146,1300,146,1300,141,1331,141"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,131,1114,156"/>
<area shape="poly" title=" " alt="" coords="1146,146,1114,146,1114,141,1146,141"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,131,929,156"/>
<area shape="poly" title=" " alt="" coords="962,146,930,146,930,141,962,141"/>
<area shape="poly" title=" " alt="" coords="827,127,777,109,779,104,829,122"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,228,772,254"/>
<area shape="poly" title=" " alt="" coords="850,167,762,230,759,225,847,163"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,153,640,179"/>
<area shape="poly" title=" " alt="" coords="704,222,650,193,625,182,627,177,652,188,707,217"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,203,637,228"/>
<area shape="poly" title=" " alt="" coords="694,236,637,226,638,221,694,231"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,251,637,260,637,255,694,245"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,301,633,327"/>
<area shape="poly" title=" " alt="" coords="705,264,652,293,627,303,625,298,650,288,703,260"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,351,625,376"/>
<area shape="poly" title=" " alt="" coords="724,268,693,306,652,342,627,355,624,350,649,337,689,302,720,265"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,138,476,178"/>
<area shape="poly" title=" " alt="" coords="529,247,523,243,508,230,498,217,489,205,475,192,456,181,459,177,478,188,493,201,502,214,512,226,526,239,532,243"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,203,436,228"/>
<area shape="poly" title=" " alt="" coords="529,296,523,292,508,279,498,266,489,254,475,242,436,225,438,220,478,237,493,250,503,263,512,275,526,288,532,292"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,252,450,278"/>
<area shape="poly" title=" " alt="" coords="526,301,450,281,451,275,527,296"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,301,435,327"/>
<area shape="poly" title=" " alt="" coords="526,317,436,317,436,312,526,312"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,351,424,376"/>
<area shape="poly" title=" " alt="" coords="528,333,425,360,424,355,526,327"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,400,424,426"/>
<area shape="poly" title=" " alt="" coords="532,336,526,340,512,353,503,365,493,378,478,391,451,404,425,411,424,406,449,399,475,387,489,375,498,362,508,349,523,336,529,332"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,449,424,475"/>
<area shape="poly" title=" " alt="" coords="530,337,526,340,509,364,503,389,497,415,490,428,478,440,452,455,425,462,424,457,450,450,475,436,485,424,492,413,498,388,504,362,522,336,526,333"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,203,273,228"/>
<area shape="poly" title=" " alt="" coords="336,250,272,232,274,226,338,245"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,252,275,278"/>
<area shape="poly" title=" " alt="" coords="333,268,275,268,275,262,333,262"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,228,127,254"/>
<area shape="poly" title=" " alt="" coords="162,228,128,234,127,228,161,223"/>
<area shape="poly" title=" " alt="" coords="159,258,126,253,127,247,160,252"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,301,250,327"/>
<area shape="poly" title=" " alt="" coords="348,317,250,317,250,312,348,312"/>
</map>
</div>

</div>
</div>
<a id="acecc8f37f30eaa1114f7a7da0e18354b" name="acecc8f37f30eaa1114f7a7da0e18354b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acecc8f37f30eaa1114f7a7da0e18354b">&#9670;&#160;</a></span>net_getsockopt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int net_getsockopt </td>
          <td>(</td>
          <td class="paramtype">pi_socket_t *</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>level</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>option_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>option_value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>option_len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  575</span>{</div>
<div class="line"><span class="lineno">  576</span>    pi_protocol_t *prot;</div>
<div class="line"><span class="lineno">  577</span>    pi_net_data_t *data;</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>    prot = <a class="code hl_function" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3">pi_protocol</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  580</span>    <span class="keywordflow">if</span> (prot == NULL)</div>
<div class="line"><span class="lineno">  581</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>    data = (pi_net_data_t *)prot-&gt;data;</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>    <span class="keywordflow">switch</span> (option_name) {</div>
<div class="line"><span class="lineno">  586</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacepisock.html#a1fdae609401c653f1d16b373d316b4c2">PI_NET_TYPE</a>:</div>
<div class="line"><span class="lineno">  587</span>            <span class="keywordflow">if</span> (*option_len != <span class="keyword">sizeof</span> (data-&gt;type)) {</div>
<div class="line"><span class="lineno">  588</span>                errno = EINVAL;</div>
<div class="line"><span class="lineno">  589</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_ARGUMENT);</div>
<div class="line"><span class="lineno">  590</span>            }</div>
<div class="line"><span class="lineno">  591</span>            memcpy (option_value, &amp;data-&gt;type,</div>
<div class="line"><span class="lineno">  592</span>                sizeof (data-&gt;type));</div>
<div class="line"><span class="lineno">  593</span>            *option_len = <span class="keyword">sizeof</span> (data-&gt;type);</div>
<div class="line"><span class="lineno">  594</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  595</span>    }</div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  598</span>}</div>
<div class="ttc" id="anamespacepisock_html_a1fdae609401c653f1d16b373d316b4c2"><div class="ttname"><a href="namespacepisock.html#a1fdae609401c653f1d16b373d316b4c2">pisock.PI_NET_TYPE</a></div><div class="ttdeci">PI_NET_TYPE</div><div class="ttdef"><b>Definition</b> pisock.py:107</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00659">pi_protocol()</a>, and <a class="el" href="#l01625">pi_set_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00135">net_protocol()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_acecc8f37f30eaa1114f7a7da0e18354b_cgraph.png" border="0" usemap="#anet_8c_acecc8f37f30eaa1114f7a7da0e18354b_cgraph" alt=""/></div>
<map name="anet_8c_acecc8f37f30eaa1114f7a7da0e18354b_cgraph" id="anet_8c_acecc8f37f30eaa1114f7a7da0e18354b_cgraph">
<area shape="rect" title=" " alt="" coords="5,80,116,106"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="166,104,250,130"/>
<area shape="poly" title=" " alt="" coords="117,99,151,105,150,110,116,104"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="164,55,253,80"/>
<area shape="poly" title=" " alt="" coords="116,81,148,75,149,80,117,86"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="317,55,422,80"/>
<area shape="poly" title=" " alt="" coords="250,101,310,83,311,88,252,107"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="301,104,438,130"/>
<area shape="poly" title=" " alt="" coords="251,114,286,114,286,120,251,120"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="493,5,599,31"/>
<area shape="poly" title=" " alt="" coords="418,51,482,33,484,38,419,57"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="486,55,606,80"/>
<area shape="poly" title=" " alt="" coords="423,65,471,65,471,70,423,70"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="502,104,590,130"/>
<area shape="poly" title=" " alt="" coords="419,78,489,98,487,103,418,84"/>
<area shape="poly" title=" " alt="" coords="253,65,302,65,302,70,253,70"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_acecc8f37f30eaa1114f7a7da0e18354b_icgraph.png" border="0" usemap="#anet_8c_acecc8f37f30eaa1114f7a7da0e18354b_icgraph" alt=""/></div>
<map name="anet_8c_acecc8f37f30eaa1114f7a7da0e18354b_icgraph" id="anet_8c_acecc8f37f30eaa1114f7a7da0e18354b_icgraph">
<area shape="rect" title=" " alt="" coords="1828,105,1938,131"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1688,105,1780,131"/>
<area shape="poly" title=" " alt="" coords="1812,121,1780,121,1780,116,1812,116"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1496,105,1640,131"/>
<area shape="poly" title=" " alt="" coords="1672,121,1640,121,1640,116,1672,116"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,80,783,106"/>
<area shape="poly" title=" " alt="" coords="1481,111,1363,100,1232,95,1044,96,783,96,783,90,1044,90,1232,90,1363,95,1481,105"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1347,131,1448,156"/>
<area shape="poly" title=" " alt="" coords="1481,134,1449,139,1448,133,1481,128"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,5,651,31"/>
<area shape="poly" title=" " alt="" coords="704,74,650,45,625,34,627,29,652,40,707,69"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,55,612,80"/>
<area shape="poly" title=" " alt="" coords="683,86,612,74,613,69,684,81"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,104,613,116,612,110,683,99"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,131,1299,156"/>
<area shape="poly" title=" " alt="" coords="1331,146,1300,146,1300,141,1331,141"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,131,1114,156"/>
<area shape="poly" title=" " alt="" coords="1146,146,1114,146,1114,141,1146,141"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,131,929,156"/>
<area shape="poly" title=" " alt="" coords="962,146,930,146,930,141,962,141"/>
<area shape="poly" title=" " alt="" coords="827,127,777,109,779,104,829,122"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,228,772,254"/>
<area shape="poly" title=" " alt="" coords="850,167,762,230,759,225,847,163"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,153,640,179"/>
<area shape="poly" title=" " alt="" coords="704,222,650,193,625,182,627,177,652,188,707,217"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,203,637,228"/>
<area shape="poly" title=" " alt="" coords="694,236,637,226,638,221,694,231"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,251,637,260,637,255,694,245"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,301,633,327"/>
<area shape="poly" title=" " alt="" coords="705,264,652,293,627,303,625,298,650,288,703,260"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,351,625,376"/>
<area shape="poly" title=" " alt="" coords="724,268,693,306,652,342,627,355,624,350,649,337,689,302,720,265"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,138,476,178"/>
<area shape="poly" title=" " alt="" coords="529,247,523,243,508,230,498,217,489,205,475,192,456,181,459,177,478,188,493,201,502,214,512,226,526,239,532,243"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,203,436,228"/>
<area shape="poly" title=" " alt="" coords="529,296,523,292,508,279,498,266,489,254,475,242,436,225,438,220,478,237,493,250,503,263,512,275,526,288,532,292"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,252,450,278"/>
<area shape="poly" title=" " alt="" coords="526,301,450,281,451,275,527,296"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,301,435,327"/>
<area shape="poly" title=" " alt="" coords="526,317,436,317,436,312,526,312"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,351,424,376"/>
<area shape="poly" title=" " alt="" coords="528,333,425,360,424,355,526,327"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,400,424,426"/>
<area shape="poly" title=" " alt="" coords="532,336,526,340,512,353,503,365,493,378,478,391,451,404,425,411,424,406,449,399,475,387,489,375,498,362,508,349,523,336,529,332"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,449,424,475"/>
<area shape="poly" title=" " alt="" coords="530,337,526,340,509,364,503,389,497,415,490,428,478,440,452,455,425,462,424,457,450,450,475,436,485,424,492,413,498,388,504,362,522,336,526,333"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,203,273,228"/>
<area shape="poly" title=" " alt="" coords="336,250,272,232,274,226,338,245"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,252,275,278"/>
<area shape="poly" title=" " alt="" coords="333,268,275,268,275,262,333,262"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,228,127,254"/>
<area shape="poly" title=" " alt="" coords="162,228,128,234,127,228,161,223"/>
<area shape="poly" title=" " alt="" coords="159,258,126,253,127,247,160,252"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,301,250,327"/>
<area shape="poly" title=" " alt="" coords="348,317,250,317,250,312,348,312"/>
</map>
</div>

</div>
</div>
<a id="a2ccbd795f5d579a721b9d3632e46cfeb" name="a2ccbd795f5d579a721b9d3632e46cfeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ccbd795f5d579a721b9d3632e46cfeb">&#9670;&#160;</a></span>net_protocol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pi_protocol_t * net_protocol </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  136</span>{</div>
<div class="line"><span class="lineno">  137</span>    pi_protocol_t *prot = NULL;</div>
<div class="line"><span class="lineno">  138</span>    pi_net_data_t *data = NULL;</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    prot = (pi_protocol_t *)malloc (<span class="keyword">sizeof</span> (pi_protocol_t));    </div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">if</span> (prot != NULL) {</div>
<div class="line"><span class="lineno">  142</span>        data = (pi_net_data_t *)malloc (<span class="keyword">sizeof</span> (pi_net_data_t));</div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">if</span> (data == NULL) {</div>
<div class="line"><span class="lineno">  144</span>            free(prot);</div>
<div class="line"><span class="lineno">  145</span>            prot = NULL;</div>
<div class="line"><span class="lineno">  146</span>        }</div>
<div class="line"><span class="lineno">  147</span>    }</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">if</span> (prot != NULL &amp;&amp; data != NULL) {</div>
<div class="line"><span class="lineno">  150</span>        prot-&gt;level         = <a class="code hl_variable" href="namespacepisock.html#acbbe446cf37085b1d604fa3679557593">PI_LEVEL_NET</a>;</div>
<div class="line"><span class="lineno">  151</span>        prot-&gt;dup       = <a class="code hl_function" href="#a0a2ae2a8ee5d0d85021e0d761b908d26">net_protocol_dup</a>;</div>
<div class="line"><span class="lineno">  152</span>        prot-&gt;free      = <a class="code hl_function" href="#a1c96a76b0124c6c9a9ca6a63f9068078">net_protocol_free</a>;</div>
<div class="line"><span class="lineno">  153</span>        prot-&gt;read      = <a class="code hl_function" href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a>;</div>
<div class="line"><span class="lineno">  154</span>        prot-&gt;write         = <a class="code hl_function" href="#a1670601987b6494055bea1a75938955e">net_tx</a>;</div>
<div class="line"><span class="lineno">  155</span>        prot-&gt;flush     = <a class="code hl_function" href="#ae2ffb223a4717a7d4cd0821832515128">net_flush</a>;</div>
<div class="line"><span class="lineno">  156</span>        prot-&gt;getsockopt    = <a class="code hl_function" href="#acecc8f37f30eaa1114f7a7da0e18354b">net_getsockopt</a>;</div>
<div class="line"><span class="lineno">  157</span>        prot-&gt;setsockopt    = <a class="code hl_function" href="#a3f55f647bcd923b897bf8061d4e739ee">net_setsockopt</a>;</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        data-&gt;type      = PI_NET_TYPE_DATA;</div>
<div class="line"><span class="lineno">  160</span>        data-&gt;split_writes  = 1;        <span class="comment">/* write packet header and data separately */</span></div>
<div class="line"><span class="lineno">  161</span>        data-&gt;write_chunksize   = 4096;     <span class="comment">/* and push data in 4k chunks. Required for some USB devices */</span></div>
<div class="line"><span class="lineno">  162</span>        data-&gt;txid      = 0x00;</div>
<div class="line"><span class="lineno">  163</span>        prot-&gt;data      = data;</div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">return</span> prot;</div>
<div class="line"><span class="lineno">  167</span>}</div>
<div class="ttc" id="anamespacepisock_html_acbbe446cf37085b1d604fa3679557593"><div class="ttname"><a href="namespacepisock.html#acbbe446cf37085b1d604fa3679557593">pisock.PI_LEVEL_NET</a></div><div class="ttdeci">PI_LEVEL_NET</div><div class="ttdef"><b>Definition</b> pisock.py:82</div></div>
<div class="ttc" id="anet_8c_html_a0a2ae2a8ee5d0d85021e0d761b908d26"><div class="ttname"><a href="#a0a2ae2a8ee5d0d85021e0d761b908d26">net_protocol_dup</a></div><div class="ttdeci">static pi_protocol_t * net_protocol_dup(pi_protocol_t *prot)</div><div class="ttdef"><b>Definition</b> net.c:60</div></div>
<div class="ttc" id="anet_8c_html_a1670601987b6494055bea1a75938955e"><div class="ttname"><a href="#a1670601987b6494055bea1a75938955e">net_tx</a></div><div class="ttdeci">ssize_t net_tx(pi_socket_t *ps, const unsigned char *msg, size_t len, int flags)</div><div class="ttdef"><b>Definition</b> net.c:305</div></div>
<div class="ttc" id="anet_8c_html_a1c96a76b0124c6c9a9ca6a63f9068078"><div class="ttname"><a href="#a1c96a76b0124c6c9a9ca6a63f9068078">net_protocol_free</a></div><div class="ttdeci">static void net_protocol_free(pi_protocol_t *prot)</div><div class="ttdef"><b>Definition</b> net.c:111</div></div>
<div class="ttc" id="anet_8c_html_a3f55f647bcd923b897bf8061d4e739ee"><div class="ttname"><a href="#a3f55f647bcd923b897bf8061d4e739ee">net_setsockopt</a></div><div class="ttdeci">static int net_setsockopt(pi_socket_t *ps, int level, int option_name, const void *option_value, size_t *option_len)</div><div class="ttdef"><b>Definition</b> net.c:613</div></div>
<div class="ttc" id="anet_8c_html_a6c20ece547e720eec693b02b39774c8b"><div class="ttname"><a href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a></div><div class="ttdeci">ssize_t net_rx(pi_socket_t *ps, pi_buffer_t *msg, size_t len, int flags)</div><div class="ttdef"><b>Definition</b> net.c:407</div></div>
<div class="ttc" id="anet_8c_html_acecc8f37f30eaa1114f7a7da0e18354b"><div class="ttname"><a href="#acecc8f37f30eaa1114f7a7da0e18354b">net_getsockopt</a></div><div class="ttdeci">static int net_getsockopt(pi_socket_t *ps, int level, int option_name, void *option_value, size_t *option_len)</div><div class="ttdef"><b>Definition</b> net.c:573</div></div>
<div class="ttc" id="anet_8c_html_ae2ffb223a4717a7d4cd0821832515128"><div class="ttname"><a href="#ae2ffb223a4717a7d4cd0821832515128">net_flush</a></div><div class="ttdeci">static int net_flush(pi_socket_t *ps, int flags)</div><div class="ttdef"><b>Definition</b> net.c:277</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00277">net_flush()</a>, <a class="el" href="#l00573">net_getsockopt()</a>, <a class="el" href="#l00060">net_protocol_dup()</a>, <a class="el" href="#l00111">net_protocol_free()</a>, <a class="el" href="#l00407">net_rx()</a>, <a class="el" href="#l00613">net_setsockopt()</a>, and <a class="el" href="#l00305">net_tx()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00431">protocol_queue_build()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a2ccbd795f5d579a721b9d3632e46cfeb_cgraph.png" border="0" usemap="#anet_8c_a2ccbd795f5d579a721b9d3632e46cfeb_cgraph" alt=""/></div>
<map name="anet_8c_a2ccbd795f5d579a721b9d3632e46cfeb_cgraph" id="anet_8c_a2ccbd795f5d579a721b9d3632e46cfeb_cgraph">
<area shape="rect" title=" " alt="" coords="5,209,98,234"/>
<area shape="rect" href="net_8c.html#ae2ffb223a4717a7d4cd0821832515128" title=" " alt="" coords="169,133,244,158"/>
<area shape="poly" title=" " alt="" coords="78,206,164,163,166,168,81,211"/>
<area shape="rect" href="net_8c.html#acecc8f37f30eaa1114f7a7da0e18354b" title=" " alt="" coords="151,33,262,58"/>
<area shape="poly" title=" " alt="" coords="55,207,86,142,112,102,144,68,148,64,151,69,147,72,116,106,91,144,60,209"/>
<area shape="rect" href="net_8c.html#a0a2ae2a8ee5d0d85021e0d761b908d26" title=" " alt="" coords="146,358,266,384"/>
<area shape="poly" title=" " alt="" coords="62,233,94,287,119,318,147,345,152,348,149,352,144,349,115,321,90,290,57,236"/>
<area shape="rect" href="net_8c.html#a1c96a76b0124c6c9a9ca6a63f9068078" title=" " alt="" coords="146,407,267,433"/>
<area shape="poly" title=" " alt="" coords="59,234,70,266,88,309,113,354,148,394,151,397,147,401,144,398,109,357,83,311,65,268,54,236"/>
<area shape="rect" href="net_8c.html#a6c20ece547e720eec693b02b39774c8b" title=" " alt="" coords="178,309,235,334"/>
<area shape="poly" title=" " alt="" coords="75,233,174,298,171,302,72,237"/>
<area shape="rect" href="net_8c.html#a3f55f647bcd923b897bf8061d4e739ee" title=" " alt="" coords="151,82,262,108"/>
<area shape="poly" title=" " alt="" coords="60,207,94,164,118,140,144,118,152,113,155,117,147,122,121,144,98,168,64,210"/>
<area shape="rect" href="net_8c.html#a1670601987b6494055bea1a75938955e" title=" " alt="" coords="178,209,235,234"/>
<area shape="poly" title=" " alt="" coords="98,219,162,219,162,224,98,224"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="335,57,419,82"/>
<area shape="poly" title=" " alt="" coords="239,130,266,118,333,87,335,92,268,123,241,135"/>
<area shape="rect" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368" title=" " alt="" coords="319,209,435,234"/>
<area shape="poly" title=" " alt="" coords="238,157,334,200,332,204,236,161"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="527,158,617,184"/>
<area shape="poly" title=" " alt="" coords="244,143,333,144,440,150,512,159,512,164,439,155,333,149,244,148"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="705,258,810,284"/>
<area shape="poly" title=" " alt="" coords="420,70,471,77,532,91,597,112,658,143,686,166,709,192,744,243,740,246,705,195,682,170,655,148,595,117,531,96,470,82,419,75"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="503,359,641,385"/>
<area shape="poly" title=" " alt="" coords="389,82,490,244,556,345,551,348,485,247,384,84"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="865,209,970,234"/>
<area shape="poly" title=" " alt="" coords="801,255,858,237,859,242,803,260"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="858,258,977,284"/>
<area shape="poly" title=" " alt="" coords="810,268,842,268,842,274,810,274"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="874,307,961,333"/>
<area shape="poly" title=" " alt="" coords="803,282,860,300,859,305,801,287"/>
<area shape="poly" title=" " alt="" coords="434,232,488,243,594,256,689,264,689,270,593,262,487,248,433,238"/>
<area shape="rect" href="socket_8c.html#af71c99cb810ee32e115acfeebcc4fdcd" title=" " alt="" coords="487,207,657,233"/>
<area shape="poly" title=" " alt="" coords="436,219,472,218,472,224,436,224"/>
<area shape="poly" title=" " alt="" coords="618,178,658,193,699,218,733,246,729,250,696,222,655,197,616,183"/>
<area shape="poly" title=" " alt="" coords="262,51,320,59,319,64,261,56"/>
<area shape="poly" title=" " alt="" coords="239,30,280,16,332,6,387,4,414,9,440,18,480,43,514,77,540,112,559,143,555,146,536,115,510,80,477,47,438,23,413,14,387,10,332,11,282,21,240,35"/>
<area shape="poly" title=" " alt="" coords="217,307,265,245,318,164,359,95,363,97,322,167,269,248,221,310"/>
<area shape="poly" title=" " alt="" coords="222,306,263,276,314,243,323,239,325,243,316,248,266,280,226,310"/>
<area shape="poly" title=" " alt="" coords="236,324,279,328,332,328,387,318,414,308,438,294,449,283,456,272,462,246,467,219,474,206,486,193,511,178,514,183,489,197,478,209,472,221,467,247,461,274,454,287,441,298,416,313,389,323,332,333,278,334,235,329"/>
<area shape="rect" href="net_8c.html#aa1aa11043c32d2b6ea7a60cadadccb94" title=" " alt="" coords="338,561,416,586"/>
<area shape="poly" title=" " alt="" coords="236,324,254,332,269,344,286,369,294,394,295,443,295,490,302,515,317,540,328,550,324,554,313,543,297,517,290,491,290,443,289,395,281,372,265,347,251,336,234,329"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="524,510,620,536"/>
<area shape="poly" title=" " alt="" coords="236,325,254,332,269,344,283,363,289,383,291,420,294,456,302,473,317,489,338,503,361,514,411,528,462,532,509,530,509,535,462,537,410,533,359,519,335,508,313,493,298,476,289,458,286,421,284,384,278,366,265,347,251,337,234,330"/>
<area shape="rect" href="net_8c.html#a8bd2d98d388794603edc8c3ba56e7f85" title=" " alt="" coords="315,258,439,284"/>
<area shape="poly" title=" " alt="" coords="235,311,316,286,318,291,236,316"/>
<area shape="rect" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606" title=" " alt="" coords="327,610,427,636"/>
<area shape="poly" title=" " alt="" coords="236,324,254,332,269,344,289,377,298,410,298,442,294,473,290,504,290,534,297,565,317,597,318,598,314,601,313,600,292,567,284,535,284,503,288,472,292,441,292,410,284,379,265,347,251,336,234,329"/>
<area shape="rect" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc" title=" " alt="" coords="326,659,428,685"/>
<area shape="poly" title=" " alt="" coords="237,324,254,331,269,344,292,384,301,423,300,460,293,498,287,534,286,571,294,608,317,647,318,647,314,651,313,650,289,610,281,571,282,534,288,497,294,460,296,423,287,386,265,347,251,336,234,329"/>
<area shape="rect" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5" title=" " alt="" coords="326,359,428,385"/>
<area shape="poly" title=" " alt="" coords="236,327,318,352,316,357,235,333"/>
<area shape="rect" href="socket_8c.html#ac046ff247e07d169f5445f2343a06da3" title=" " alt="" coords="326,409,428,434"/>
<area shape="poly" title=" " alt="" coords="237,328,268,343,284,357,293,370,302,383,317,395,323,399,320,404,313,400,298,386,289,373,280,361,266,348,234,332"/>
<area shape="poly" title=" " alt="" coords="416,561,508,537,510,542,418,566"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="712,510,802,536"/>
<area shape="poly" title=" " alt="" coords="620,520,697,520,697,526,620,526"/>
<area shape="poly" title=" " alt="" coords="428,356,691,286,692,291,429,361"/>
<area shape="poly" title=" " alt="" coords="429,370,488,370,488,375,429,375"/>
<area shape="poly" title=" " alt="" coords="413,357,437,338,450,320,456,302,459,266,463,230,471,211,486,193,511,178,514,182,489,197,475,214,468,231,464,266,461,303,454,322,441,342,416,361"/>
<area shape="poly" title=" " alt="" coords="429,426,479,429,537,427,598,417,655,395,684,375,707,349,741,296,746,299,712,352,687,379,658,400,600,422,538,433,479,434,428,431"/>
<area shape="poly" title=" " alt="" coords="428,406,503,387,504,392,430,411"/>
<area shape="poly" title=" " alt="" coords="424,406,437,396,454,370,461,345,462,320,459,295,457,270,459,245,467,219,486,193,511,177,514,181,489,197,472,221,464,246,463,270,465,295,467,320,466,346,459,373,441,399,428,410"/>
<area shape="poly" title=" " alt="" coords="261,84,319,75,320,81,262,89"/>
<area shape="poly" title=" " alt="" coords="241,79,266,69,289,54,314,42,349,33,378,29,406,31,440,42,477,62,509,89,556,144,552,147,505,93,474,67,438,47,405,36,378,34,350,38,316,47,292,58,268,73,244,84"/>
<area shape="poly" title=" " alt="" coords="222,206,265,169,349,91,353,95,269,173,225,210"/>
<area shape="poly" title=" " alt="" coords="235,219,303,219,303,224,235,224"/>
<area shape="poly" title=" " alt="" coords="235,211,315,194,419,180,512,172,512,177,419,185,315,199,236,217"/>
<area shape="poly" title=" " alt="" coords="223,233,246,260,269,295,279,318,284,339,287,376,294,410,302,427,317,445,342,457,392,473,510,505,509,510,390,478,340,462,313,449,298,430,288,412,282,377,279,339,274,319,265,298,242,264,219,237"/>
<area shape="poly" title=" " alt="" coords="236,227,317,251,315,256,235,232"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a2ccbd795f5d579a721b9d3632e46cfeb_icgraph.png" border="0" usemap="#anet_8c_a2ccbd795f5d579a721b9d3632e46cfeb_icgraph" alt=""/></div>
<map name="anet_8c_a2ccbd795f5d579a721b9d3632e46cfeb_icgraph" id="anet_8c_a2ccbd795f5d579a721b9d3632e46cfeb_icgraph">
<area shape="rect" title=" " alt="" coords="1688,105,1780,131"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1496,105,1640,131"/>
<area shape="poly" title=" " alt="" coords="1672,121,1640,121,1640,116,1672,116"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,80,783,106"/>
<area shape="poly" title=" " alt="" coords="1481,111,1363,100,1232,95,1044,96,783,96,783,90,1044,90,1232,90,1363,95,1481,105"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1347,131,1448,156"/>
<area shape="poly" title=" " alt="" coords="1481,134,1449,139,1448,133,1481,128"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,5,651,31"/>
<area shape="poly" title=" " alt="" coords="704,74,650,45,625,34,627,29,652,40,707,69"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,55,612,80"/>
<area shape="poly" title=" " alt="" coords="683,86,612,74,613,69,684,81"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,104,613,116,612,110,683,99"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,131,1299,156"/>
<area shape="poly" title=" " alt="" coords="1331,146,1300,146,1300,141,1331,141"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,131,1114,156"/>
<area shape="poly" title=" " alt="" coords="1146,146,1114,146,1114,141,1146,141"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,131,929,156"/>
<area shape="poly" title=" " alt="" coords="962,146,930,146,930,141,962,141"/>
<area shape="poly" title=" " alt="" coords="827,127,777,109,779,104,829,122"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,228,772,254"/>
<area shape="poly" title=" " alt="" coords="850,167,762,230,759,225,847,163"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,153,640,179"/>
<area shape="poly" title=" " alt="" coords="704,222,650,193,625,182,627,177,652,188,707,217"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,203,637,228"/>
<area shape="poly" title=" " alt="" coords="694,236,637,226,638,221,694,231"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,251,637,260,637,255,694,245"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,301,633,327"/>
<area shape="poly" title=" " alt="" coords="705,264,652,293,627,303,625,298,650,288,703,260"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,351,625,376"/>
<area shape="poly" title=" " alt="" coords="724,268,693,306,652,342,627,355,624,350,649,337,689,302,720,265"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,138,476,178"/>
<area shape="poly" title=" " alt="" coords="529,247,523,243,508,230,498,217,489,205,475,192,456,181,459,177,478,188,493,201,502,214,512,226,526,239,532,243"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,203,436,228"/>
<area shape="poly" title=" " alt="" coords="529,296,523,292,508,279,498,266,489,254,475,242,436,225,438,220,478,237,493,250,503,263,512,275,526,288,532,292"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,252,450,278"/>
<area shape="poly" title=" " alt="" coords="526,301,450,281,451,275,527,296"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,301,435,327"/>
<area shape="poly" title=" " alt="" coords="526,317,436,317,436,312,526,312"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,351,424,376"/>
<area shape="poly" title=" " alt="" coords="528,333,425,360,424,355,526,327"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,400,424,426"/>
<area shape="poly" title=" " alt="" coords="532,336,526,340,512,353,503,365,493,378,478,391,451,404,425,411,424,406,449,399,475,387,489,375,498,362,508,349,523,336,529,332"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,449,424,475"/>
<area shape="poly" title=" " alt="" coords="530,337,526,340,509,364,503,389,497,415,490,428,478,440,452,455,425,462,424,457,450,450,475,436,485,424,492,413,498,388,504,362,522,336,526,333"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,203,273,228"/>
<area shape="poly" title=" " alt="" coords="336,250,272,232,274,226,338,245"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,252,275,278"/>
<area shape="poly" title=" " alt="" coords="333,268,275,268,275,262,333,262"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,228,127,254"/>
<area shape="poly" title=" " alt="" coords="162,228,128,234,127,228,161,223"/>
<area shape="poly" title=" " alt="" coords="159,258,126,253,127,247,160,252"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,301,250,327"/>
<area shape="poly" title=" " alt="" coords="348,317,250,317,250,312,348,312"/>
</map>
</div>

</div>
</div>
<a id="a0a2ae2a8ee5d0d85021e0d761b908d26" name="a0a2ae2a8ee5d0d85021e0d761b908d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a2ae2a8ee5d0d85021e0d761b908d26">&#9670;&#160;</a></span>net_protocol_dup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pi_protocol_t * net_protocol_dup </td>
          <td>(</td>
          <td class="paramtype">pi_protocol_t *</td>          <td class="paramname"><span class="paramname"><em>prot</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   61</span>{</div>
<div class="line"><span class="lineno">   62</span>    pi_protocol_t *new_prot = NULL;</div>
<div class="line"><span class="lineno">   63</span>    pi_net_data_t   *data = NULL,</div>
<div class="line"><span class="lineno">   64</span>            *new_data = NULL;</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    ASSERT(prot != NULL);</div>
<div class="line"><span class="lineno">   67</span>    </div>
<div class="line"><span class="lineno">   68</span>    new_prot = (pi_protocol_t *)malloc (<span class="keyword">sizeof</span> (pi_protocol_t));</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">if</span> (new_prot != NULL) {</div>
<div class="line"><span class="lineno">   70</span>        new_data = (pi_net_data_t *)malloc (<span class="keyword">sizeof</span> (pi_net_data_t));</div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">if</span> (new_data == NULL) {</div>
<div class="line"><span class="lineno">   72</span>            free(new_prot);</div>
<div class="line"><span class="lineno">   73</span>            new_prot = NULL;</div>
<div class="line"><span class="lineno">   74</span>        }</div>
<div class="line"><span class="lineno">   75</span>    }</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">if</span> (new_prot != NULL &amp;&amp; new_data != NULL) {</div>
<div class="line"><span class="lineno">   78</span>        new_prot-&gt;level     = prot-&gt;level;</div>
<div class="line"><span class="lineno">   79</span>        new_prot-&gt;dup       = prot-&gt;dup;</div>
<div class="line"><span class="lineno">   80</span>        new_prot-&gt;free      = prot-&gt;free;</div>
<div class="line"><span class="lineno">   81</span>        new_prot-&gt;read      = prot-&gt;read;</div>
<div class="line"><span class="lineno">   82</span>        new_prot-&gt;write     = prot-&gt;write;</div>
<div class="line"><span class="lineno">   83</span>        new_prot-&gt;flush     = prot-&gt;flush;</div>
<div class="line"><span class="lineno">   84</span>        new_prot-&gt;getsockopt    = prot-&gt;getsockopt;</div>
<div class="line"><span class="lineno">   85</span>        new_prot-&gt;setsockopt    = prot-&gt;setsockopt;</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>        data            = (pi_net_data_t *)prot-&gt;data;</div>
<div class="line"><span class="lineno">   88</span>        new_data-&gt;type      = data-&gt;type;</div>
<div class="line"><span class="lineno">   89</span>        new_data-&gt;split_writes  = data-&gt;split_writes;</div>
<div class="line"><span class="lineno">   90</span>        new_data-&gt;write_chunksize   = data-&gt;write_chunksize;</div>
<div class="line"><span class="lineno">   91</span>        new_data-&gt;txid      = data-&gt;txid;</div>
<div class="line"><span class="lineno">   92</span>        new_prot-&gt;data      = new_data;</div>
<div class="line"><span class="lineno">   93</span>    }</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">return</span> new_prot;</div>
<div class="line"><span class="lineno">   96</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00135">net_protocol()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a0a2ae2a8ee5d0d85021e0d761b908d26_icgraph.png" border="0" usemap="#anet_8c_a0a2ae2a8ee5d0d85021e0d761b908d26_icgraph" alt=""/></div>
<map name="anet_8c_a0a2ae2a8ee5d0d85021e0d761b908d26_icgraph" id="anet_8c_a0a2ae2a8ee5d0d85021e0d761b908d26_icgraph">
<area shape="rect" title=" " alt="" coords="1828,105,1948,131"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1688,105,1780,131"/>
<area shape="poly" title=" " alt="" coords="1813,121,1780,121,1780,116,1813,116"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1496,105,1640,131"/>
<area shape="poly" title=" " alt="" coords="1672,121,1640,121,1640,116,1672,116"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,80,783,106"/>
<area shape="poly" title=" " alt="" coords="1481,111,1363,100,1232,95,1044,96,783,96,783,90,1044,90,1232,90,1363,95,1481,105"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1347,131,1448,156"/>
<area shape="poly" title=" " alt="" coords="1481,134,1449,139,1448,133,1481,128"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,5,651,31"/>
<area shape="poly" title=" " alt="" coords="704,74,650,45,625,34,627,29,652,40,707,69"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,55,612,80"/>
<area shape="poly" title=" " alt="" coords="683,86,612,74,613,69,684,81"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,104,613,116,612,110,683,99"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,131,1299,156"/>
<area shape="poly" title=" " alt="" coords="1331,146,1300,146,1300,141,1331,141"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,131,1114,156"/>
<area shape="poly" title=" " alt="" coords="1146,146,1114,146,1114,141,1146,141"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,131,929,156"/>
<area shape="poly" title=" " alt="" coords="962,146,930,146,930,141,962,141"/>
<area shape="poly" title=" " alt="" coords="827,127,777,109,779,104,829,122"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,228,772,254"/>
<area shape="poly" title=" " alt="" coords="850,167,762,230,759,225,847,163"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,153,640,179"/>
<area shape="poly" title=" " alt="" coords="704,222,650,193,625,182,627,177,652,188,707,217"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,203,637,228"/>
<area shape="poly" title=" " alt="" coords="694,236,637,226,638,221,694,231"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,251,637,260,637,255,694,245"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,301,633,327"/>
<area shape="poly" title=" " alt="" coords="705,264,652,293,627,303,625,298,650,288,703,260"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,351,625,376"/>
<area shape="poly" title=" " alt="" coords="724,268,693,306,652,342,627,355,624,350,649,337,689,302,720,265"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,138,476,178"/>
<area shape="poly" title=" " alt="" coords="529,247,523,243,508,230,498,217,489,205,475,192,456,181,459,177,478,188,493,201,502,214,512,226,526,239,532,243"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,203,436,228"/>
<area shape="poly" title=" " alt="" coords="529,296,523,292,508,279,498,266,489,254,475,242,436,225,438,220,478,237,493,250,503,263,512,275,526,288,532,292"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,252,450,278"/>
<area shape="poly" title=" " alt="" coords="526,301,450,281,451,275,527,296"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,301,435,327"/>
<area shape="poly" title=" " alt="" coords="526,317,436,317,436,312,526,312"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,351,424,376"/>
<area shape="poly" title=" " alt="" coords="528,333,425,360,424,355,526,327"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,400,424,426"/>
<area shape="poly" title=" " alt="" coords="532,336,526,340,512,353,503,365,493,378,478,391,451,404,425,411,424,406,449,399,475,387,489,375,498,362,508,349,523,336,529,332"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,449,424,475"/>
<area shape="poly" title=" " alt="" coords="530,337,526,340,509,364,503,389,497,415,490,428,478,440,452,455,425,462,424,457,450,450,475,436,485,424,492,413,498,388,504,362,522,336,526,333"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,203,273,228"/>
<area shape="poly" title=" " alt="" coords="336,250,272,232,274,226,338,245"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,252,275,278"/>
<area shape="poly" title=" " alt="" coords="333,268,275,268,275,262,333,262"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,228,127,254"/>
<area shape="poly" title=" " alt="" coords="162,228,128,234,127,228,161,223"/>
<area shape="poly" title=" " alt="" coords="159,258,126,253,127,247,160,252"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,301,250,327"/>
<area shape="poly" title=" " alt="" coords="348,317,250,317,250,312,348,312"/>
</map>
</div>

</div>
</div>
<a id="a1c96a76b0124c6c9a9ca6a63f9068078" name="a1c96a76b0124c6c9a9ca6a63f9068078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c96a76b0124c6c9a9ca6a63f9068078">&#9670;&#160;</a></span>net_protocol_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void net_protocol_free </td>
          <td>(</td>
          <td class="paramtype">pi_protocol_t *</td>          <td class="paramname"><span class="paramname"><em>prot</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  112</span>{</div>
<div class="line"><span class="lineno">  113</span>    ASSERT (prot != NULL);</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">if</span> (prot != NULL) {</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">if</span> (prot-&gt;data != NULL)</div>
<div class="line"><span class="lineno">  117</span>            free(prot-&gt;data);</div>
<div class="line"><span class="lineno">  118</span>        free(prot);</div>
<div class="line"><span class="lineno">  119</span>    }</div>
<div class="line"><span class="lineno">  120</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#l00135">net_protocol()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a1c96a76b0124c6c9a9ca6a63f9068078_icgraph.png" border="0" usemap="#anet_8c_a1c96a76b0124c6c9a9ca6a63f9068078_icgraph" alt=""/></div>
<map name="anet_8c_a1c96a76b0124c6c9a9ca6a63f9068078_icgraph" id="anet_8c_a1c96a76b0124c6c9a9ca6a63f9068078_icgraph">
<area shape="rect" title=" " alt="" coords="1828,105,1949,131"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1688,105,1780,131"/>
<area shape="poly" title=" " alt="" coords="1812,121,1781,121,1781,116,1812,116"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1496,105,1640,131"/>
<area shape="poly" title=" " alt="" coords="1672,121,1640,121,1640,116,1672,116"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,80,783,106"/>
<area shape="poly" title=" " alt="" coords="1481,111,1363,100,1232,95,1044,96,783,96,783,90,1044,90,1232,90,1363,95,1481,105"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1347,131,1448,156"/>
<area shape="poly" title=" " alt="" coords="1481,134,1449,139,1448,133,1481,128"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,5,651,31"/>
<area shape="poly" title=" " alt="" coords="704,74,650,45,625,34,627,29,652,40,707,69"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,55,612,80"/>
<area shape="poly" title=" " alt="" coords="683,86,612,74,613,69,684,81"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,104,613,116,612,110,683,99"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,131,1299,156"/>
<area shape="poly" title=" " alt="" coords="1331,146,1300,146,1300,141,1331,141"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,131,1114,156"/>
<area shape="poly" title=" " alt="" coords="1146,146,1114,146,1114,141,1146,141"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,131,929,156"/>
<area shape="poly" title=" " alt="" coords="962,146,930,146,930,141,962,141"/>
<area shape="poly" title=" " alt="" coords="827,127,777,109,779,104,829,122"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,228,772,254"/>
<area shape="poly" title=" " alt="" coords="850,167,762,230,759,225,847,163"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,153,640,179"/>
<area shape="poly" title=" " alt="" coords="704,222,650,193,625,182,627,177,652,188,707,217"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,203,637,228"/>
<area shape="poly" title=" " alt="" coords="694,236,637,226,638,221,694,231"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,251,637,260,637,255,694,245"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,301,633,327"/>
<area shape="poly" title=" " alt="" coords="705,264,652,293,627,303,625,298,650,288,703,260"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,351,625,376"/>
<area shape="poly" title=" " alt="" coords="724,268,693,306,652,342,627,355,624,350,649,337,689,302,720,265"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,138,476,178"/>
<area shape="poly" title=" " alt="" coords="529,247,523,243,508,230,498,217,489,205,475,192,456,181,459,177,478,188,493,201,502,214,512,226,526,239,532,243"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,203,436,228"/>
<area shape="poly" title=" " alt="" coords="529,296,523,292,508,279,498,266,489,254,475,242,436,225,438,220,478,237,493,250,503,263,512,275,526,288,532,292"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,252,450,278"/>
<area shape="poly" title=" " alt="" coords="526,301,450,281,451,275,527,296"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,301,435,327"/>
<area shape="poly" title=" " alt="" coords="526,317,436,317,436,312,526,312"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,351,424,376"/>
<area shape="poly" title=" " alt="" coords="528,333,425,360,424,355,526,327"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,400,424,426"/>
<area shape="poly" title=" " alt="" coords="532,336,526,340,512,353,503,365,493,378,478,391,451,404,425,411,424,406,449,399,475,387,489,375,498,362,508,349,523,336,529,332"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,449,424,475"/>
<area shape="poly" title=" " alt="" coords="530,337,526,340,509,364,503,389,497,415,490,428,478,440,452,455,425,462,424,457,450,450,475,436,485,424,492,413,498,388,504,362,522,336,526,333"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,203,273,228"/>
<area shape="poly" title=" " alt="" coords="336,250,272,232,274,226,338,245"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,252,275,278"/>
<area shape="poly" title=" " alt="" coords="333,268,275,268,275,262,333,262"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,228,127,254"/>
<area shape="poly" title=" " alt="" coords="162,228,128,234,127,228,161,223"/>
<area shape="poly" title=" " alt="" coords="159,258,126,253,127,247,160,252"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,301,250,327"/>
<area shape="poly" title=" " alt="" coords="348,317,250,317,250,312,348,312"/>
</map>
</div>

</div>
</div>
<a id="a6c20ece547e720eec693b02b39774c8b" name="a6c20ece547e720eec693b02b39774c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c20ece547e720eec693b02b39774c8b">&#9670;&#160;</a></span>net_rx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t net_rx </td>
          <td>(</td>
          <td class="paramtype">pi_socket_t *</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pi_buffer_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  408</span>{</div>
<div class="line"><span class="lineno">  409</span>    <span class="keywordtype">int</span>     bytes, </div>
<div class="line"><span class="lineno">  410</span>        total_bytes, </div>
<div class="line"><span class="lineno">  411</span>        packet_len,</div>
<div class="line"><span class="lineno">  412</span>        timeout,</div>
<div class="line"><span class="lineno">  413</span>        honor_rx_timeout;</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordtype">size_t</span>  <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div>
<div class="line"><span class="lineno">  415</span>    pi_protocol_t   *prot,</div>
<div class="line"><span class="lineno">  416</span>            *next;</div>
<div class="line"><span class="lineno">  417</span>    pi_buffer_t *header;</div>
<div class="line"><span class="lineno">  418</span>    pi_net_data_t *data;</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>    prot = <a class="code hl_function" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3">pi_protocol</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  421</span>    <span class="keywordflow">if</span> (prot == NULL)</div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  423</span>    </div>
<div class="line"><span class="lineno">  424</span>    data = (pi_net_data_t *)prot-&gt;data;</div>
<div class="line"><span class="lineno">  425</span>    next = <a class="code hl_function" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368">pi_protocol_next</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">if</span> (next == NULL)</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>    <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(honor_rx_timeout);</div>
<div class="line"><span class="lineno">  430</span>    <a class="code hl_function" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5">pi_getsockopt</a>(ps-&gt;sd, PI_LEVEL_SOCK, PI_SOCK_HONOR_RX_TIMEOUT,</div>
<div class="line"><span class="lineno">  431</span>        &amp;honor_rx_timeout, &amp;<a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>);</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>    timeout = honor_rx_timeout ? <a class="code hl_define" href="#a8490cece6f735d9351836466119034d9">PI_NET_TIMEOUT</a> : 0;</div>
<div class="line"><span class="lineno">  434</span>    <a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(timeout);</div>
<div class="line"><span class="lineno">  435</span>    <a class="code hl_function" href="socket_8c.html#ac046ff247e07d169f5445f2343a06da3">pi_setsockopt</a>(ps-&gt;sd, PI_LEVEL_DEV, PI_DEV_TIMEOUT, </div>
<div class="line"><span class="lineno">  436</span>              &amp;timeout, &amp;<a class="code hl_variable" href="validate_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>);</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>    header = <a class="code hl_function" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc">pi_buffer_new</a> (PI_NET_HEADER_LEN);</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">if</span> (header == NULL) {</div>
<div class="line"><span class="lineno">  440</span>        errno = ENOMEM;</div>
<div class="line"><span class="lineno">  441</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_MEMORY);</div>
<div class="line"><span class="lineno">  442</span>    }</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>    <span class="comment">/* loop until we find a non-tickle packet (if the other end</span></div>
<div class="line"><span class="lineno">  445</span><span class="comment">       sends us a tickle, we would receive it prior to getting</span></div>
<div class="line"><span class="lineno">  446</span><span class="comment">       the expected reply to one of our commands, so we need</span></div>
<div class="line"><span class="lineno">  447</span><span class="comment">       to make sure tickle packets don&#39;t get in the way) */</span></div>
<div class="line"><span class="lineno">  448</span>    total_bytes = 0;</div>
<div class="line"><span class="lineno">  449</span>    <span class="keywordflow">while</span> (!total_bytes) {</div>
<div class="line"><span class="lineno">  450</span>        <span class="keywordflow">if</span> (data-&gt;txid == 0) {  </div>
<div class="line"><span class="lineno">  451</span>            <span class="comment">/* Peek to see if it is a headerless packet */</span></div>
<div class="line"><span class="lineno">  452</span>            bytes = next-&gt;read(ps, header, 1, <a class="code hl_variable" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div>
<div class="line"><span class="lineno">  453</span>            <span class="keywordflow">if</span> (bytes &lt;= 0) {</div>
<div class="line"><span class="lineno">  454</span>                <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (header);</div>
<div class="line"><span class="lineno">  455</span>                <span class="keywordflow">return</span> bytes;</div>
<div class="line"><span class="lineno">  456</span>            }</div>
<div class="line"><span class="lineno">  457</span>            </div>
<div class="line"><span class="lineno">  458</span>            LOG ((PI_DBG_NET, PI_DBG_LVL_INFO,</div>
<div class="line"><span class="lineno">  459</span>                  <span class="stringliteral">&quot;NET RX (%i): Checking for headerless packet %d\n&quot;</span>,</div>
<div class="line"><span class="lineno">  460</span>                  ps-&gt;sd, header-&gt;data[0]));</div>
<div class="line"><span class="lineno">  461</span>            </div>
<div class="line"><span class="lineno">  462</span>            <span class="keywordflow">if</span> (header-&gt;data[0] == 0x90) {</div>
<div class="line"><span class="lineno">  463</span>                <span class="comment">/* Cause the header bytes to be skipped */</span></div>
<div class="line"><span class="lineno">  464</span>                LOG ((PI_DBG_NET, PI_DBG_LVL_INFO,</div>
<div class="line"><span class="lineno">  465</span>                      <span class="stringliteral">&quot;NET RX (%i): Headerless packet\n&quot;</span>,</div>
<div class="line"><span class="lineno">  466</span>                      ps-&gt;sd));</div>
<div class="line"><span class="lineno">  467</span>                total_bytes = PI_NET_HEADER_LEN;</div>
<div class="line"><span class="lineno">  468</span>                header-&gt;data[PI_NET_OFFSET_TYPE] = PI_NET_TYPE_DATA;</div>
<div class="line"><span class="lineno">  469</span>                header-&gt;data[PI_NET_OFFSET_TXID] = 0x01;</div>
<div class="line"><span class="lineno">  470</span>                set_long (&amp;header-&gt;data[PI_NET_OFFSET_SIZE], 21);</div>
<div class="line"><span class="lineno">  471</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  472</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  473</span>                total_bytes += bytes;</div>
<div class="line"><span class="lineno">  474</span>            }</div>
<div class="line"><span class="lineno">  475</span>        }</div>
<div class="line"><span class="lineno">  476</span>        </div>
<div class="line"><span class="lineno">  477</span>        <span class="comment">/* bytes in what&#39;s left of the header */</span></div>
<div class="line"><span class="lineno">  478</span>        <span class="keywordflow">while</span> (total_bytes &lt; PI_NET_HEADER_LEN) {</div>
<div class="line"><span class="lineno">  479</span>            bytes = next-&gt;read(ps, header,</div>
<div class="line"><span class="lineno">  480</span>                    (<span class="keywordtype">size_t</span>)(PI_NET_HEADER_LEN - total_bytes), <a class="code hl_variable" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div>
<div class="line"><span class="lineno">  481</span>            <span class="keywordflow">if</span> (bytes &lt;= 0) {</div>
<div class="line"><span class="lineno">  482</span>                <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (header);</div>
<div class="line"><span class="lineno">  483</span>                <span class="keywordflow">return</span> bytes;</div>
<div class="line"><span class="lineno">  484</span>            }</div>
<div class="line"><span class="lineno">  485</span>            total_bytes += bytes;</div>
<div class="line"><span class="lineno">  486</span>        }</div>
<div class="line"><span class="lineno">  487</span>        </div>
<div class="line"><span class="lineno">  488</span>        packet_len = get_long(&amp;header-&gt;data[PI_NET_OFFSET_SIZE]);</div>
<div class="line"><span class="lineno">  489</span>        data-&gt;type = header-&gt;data[PI_NET_OFFSET_TYPE];</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">switch</span> (data-&gt;type) {</div>
<div class="line"><span class="lineno">  492</span>            <span class="keywordflow">case</span> PI_NET_TYPE_TCKL:</div>
<div class="line"><span class="lineno">  493</span>                <span class="keywordflow">if</span> (packet_len != 0) {</div>
<div class="line"><span class="lineno">  494</span>                    LOG ((PI_DBG_NET, PI_DBG_LVL_ERR,</div>
<div class="line"><span class="lineno">  495</span>                        <span class="stringliteral">&quot;NET RX (%i): tickle packet with non-zero length\n&quot;</span>,</div>
<div class="line"><span class="lineno">  496</span>                        ps-&gt;sd));</div>
<div class="line"><span class="lineno">  497</span>                    <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a>(header);</div>
<div class="line"><span class="lineno">  498</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_PROT_BADPACKET);</div>
<div class="line"><span class="lineno">  499</span>                }</div>
<div class="line"><span class="lineno">  500</span>                <span class="comment">/* valid tickle packet; continue reading. */</span></div>
<div class="line"><span class="lineno">  501</span>                LOG((PI_DBG_NET, PI_DBG_LVL_DEBUG,</div>
<div class="line"><span class="lineno">  502</span>                    <span class="stringliteral">&quot;NET RX (%i): received tickle packet\n&quot;</span>,</div>
<div class="line"><span class="lineno">  503</span>                    ps-&gt;sd));</div>
<div class="line"><span class="lineno">  504</span>                total_bytes = 0;</div>
<div class="line"><span class="lineno">  505</span>                header-&gt;used = 0;</div>
<div class="line"><span class="lineno">  506</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  507</span>            </div>
<div class="line"><span class="lineno">  508</span>            <span class="keywordflow">case</span> PI_NET_TYPE_DATA:</div>
<div class="line"><span class="lineno">  509</span>                <span class="comment">/* move on to reading the rest of the packet */</span></div>
<div class="line"><span class="lineno">  510</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  513</span>                LOG ((PI_DBG_NET, PI_DBG_LVL_ERR,</div>
<div class="line"><span class="lineno">  514</span>                    <span class="stringliteral">&quot;NET RX (%i): Unknown packet type\n&quot;</span>,</div>
<div class="line"><span class="lineno">  515</span>                    ps-&gt;sd));</div>
<div class="line"><span class="lineno">  516</span>                CHECK(PI_DBG_NET, PI_DBG_LVL_INFO, <a class="code hl_function" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9">pi_dumpdata</a>((<span class="keywordtype">char</span> *)header-&gt;data, PI_NET_HEADER_LEN));</div>
<div class="line"><span class="lineno">  517</span>                <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a>(header);</div>
<div class="line"><span class="lineno">  518</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_PROT_BADPACKET);</div>
<div class="line"><span class="lineno">  519</span>        }</div>
<div class="line"><span class="lineno">  520</span>    }</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>    total_bytes = 0;</div>
<div class="line"><span class="lineno">  523</span>    packet_len = get_long(&amp;header-&gt;data[PI_NET_OFFSET_SIZE]);</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>    <span class="comment">/* shield against absurd packet lengths */</span></div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordflow">if</span> (packet_len &lt; 0 || packet_len &gt; 0x100000L) {</div>
<div class="line"><span class="lineno">  527</span>        <span class="comment">/* we see an invalid packet */</span></div>
<div class="line"><span class="lineno">  528</span>        next-&gt;flush(ps, PI_FLUSH_INPUT);</div>
<div class="line"><span class="lineno">  529</span>        LOG ((PI_DBG_NET, PI_DBG_LVL_ERR, <span class="stringliteral">&quot;NET RX (%i): Invalid packet length (%ld)\n&quot;</span>, ps-&gt;sd, packet_len));</div>
<div class="line"><span class="lineno">  530</span>        <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a>(header);</div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_PROT_BADPACKET);</div>
<div class="line"><span class="lineno">  532</span>    }</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>    <span class="comment">/* read the actual packet data */</span></div>
<div class="line"><span class="lineno">  535</span>    <span class="keywordflow">while</span> (total_bytes &lt; packet_len) {</div>
<div class="line"><span class="lineno">  536</span>        bytes = next-&gt;read(ps, msg,</div>
<div class="line"><span class="lineno">  537</span>            (<span class="keywordtype">size_t</span>)(packet_len - total_bytes), <a class="code hl_variable" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div>
<div class="line"><span class="lineno">  538</span>        <span class="keywordflow">if</span> (bytes &lt; 0) {</div>
<div class="line"><span class="lineno">  539</span>            <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (header);</div>
<div class="line"><span class="lineno">  540</span>            <span class="keywordflow">return</span> bytes;</div>
<div class="line"><span class="lineno">  541</span>        }</div>
<div class="line"><span class="lineno">  542</span>        total_bytes += bytes;</div>
<div class="line"><span class="lineno">  543</span>    }</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>    CHECK(PI_DBG_NET, PI_DBG_LVL_INFO, <a class="code hl_function" href="#a8bd2d98d388794603edc8c3ba56e7f85">net_dump_header</a>(header-&gt;data, 0, ps-&gt;sd));</div>
<div class="line"><span class="lineno">  546</span>    CHECK(PI_DBG_NET, PI_DBG_LVL_DEBUG, <a class="code hl_function" href="#aa1aa11043c32d2b6ea7a60cadadccb94">net_dump</a>(header-&gt;data, msg-&gt;data));</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>    <span class="comment">/* Update the transaction id */</span></div>
<div class="line"><span class="lineno">  549</span>    <span class="keywordflow">if</span> (ps-&gt;state == PI_SOCK_CONN_INIT || ps-&gt;command == 1)</div>
<div class="line"><span class="lineno">  550</span>        data-&gt;txid = header-&gt;data[PI_NET_OFFSET_TXID];</div>
<div class="line"><span class="lineno">  551</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  552</span>        data-&gt;txid++;</div>
<div class="line"><span class="lineno">  553</span>        <span class="keywordflow">if</span> (data-&gt;txid == 0xff)</div>
<div class="line"><span class="lineno">  554</span>            data-&gt;txid = 1;</div>
<div class="line"><span class="lineno">  555</span>    }</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>    <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (header);</div>
<div class="line"><span class="lineno">  558</span>    <span class="keywordflow">return</span> packet_len;</div>
<div class="line"><span class="lineno">  559</span>}</div>
<div class="ttc" id="anet_8c_html_a8490cece6f735d9351836466119034d9"><div class="ttname"><a href="#a8490cece6f735d9351836466119034d9">PI_NET_TIMEOUT</a></div><div class="ttdeci">#define PI_NET_TIMEOUT</div><div class="ttdef"><b>Definition</b> net.c:40</div></div>
<div class="ttc" id="anet_8c_html_a8bd2d98d388794603edc8c3ba56e7f85"><div class="ttname"><a href="#a8bd2d98d388794603edc8c3ba56e7f85">net_dump_header</a></div><div class="ttdeci">void net_dump_header(unsigned char *data, int rxtx, int sd)</div><div class="ttdef"><b>Definition</b> net.c:678</div></div>
<div class="ttc" id="anet_8c_html_aa1aa11043c32d2b6ea7a60cadadccb94"><div class="ttname"><a href="#aa1aa11043c32d2b6ea7a60cadadccb94">net_dump</a></div><div class="ttdeci">void net_dump(unsigned char *header, unsigned char *data)</div><div class="ttdef"><b>Definition</b> net.c:702</div></div>
<div class="ttc" id="api-buffer_8c_html_a6775d9fcdb4fb3e02ce032337e1d10dc"><div class="ttname"><a href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc">pi_buffer_new</a></div><div class="ttdeci">pi_buffer_t * pi_buffer_new(size_t capacity)</div><div class="ttdef"><b>Definition</b> pi-buffer.c:31</div></div>
<div class="ttc" id="api-buffer_8c_html_af440579d61c8649154b0f0512c285606"><div class="ttname"><a href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a></div><div class="ttdeci">void pi_buffer_free(pi_buffer_t *buf)</div><div class="ttdef"><b>Definition</b> pi-buffer.c:103</div></div>
<div class="ttc" id="asocket_8c_html_a082db14a855d890be5f3e23b2ebb12e5"><div class="ttname"><a href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5">pi_getsockopt</a></div><div class="ttdeci">int pi_getsockopt(int pi_sd, int level, int option_name, void *option_value, size_t *option_len)</div><div class="ttdef"><b>Definition</b> socket.c:1151</div></div>
<div class="ttc" id="asocket_8c_html_ac046ff247e07d169f5445f2343a06da3"><div class="ttname"><a href="socket_8c.html#ac046ff247e07d169f5445f2343a06da3">pi_setsockopt</a></div><div class="ttdeci">int pi_setsockopt(int pi_sd, int level, int option_name, const void *option_value, size_t *option_len)</div><div class="ttdef"><b>Definition</b> socket.c:1199</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00311">flags</a>, <a class="el" href="#l00702">net_dump()</a>, <a class="el" href="#l00678">net_dump_header()</a>, <a class="el" href="#l00103">pi_buffer_free()</a>, <a class="el" href="#l00031">pi_buffer_new()</a>, <a class="el" href="#l00222">pi_dumpdata()</a>, <a class="el" href="#l01151">pi_getsockopt()</a>, <a class="el" href="#l00040">PI_NET_TIMEOUT</a>, <a class="el" href="#l00659">pi_protocol()</a>, <a class="el" href="#l00672">pi_protocol_next()</a>, <a class="el" href="#l01625">pi_set_error()</a>, <a class="el" href="#l01199">pi_setsockopt()</a>, and <a class="el" href="#l00081">size</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00135">net_protocol()</a>, <a class="el" href="#l00182">net_rx_handshake()</a>, and <a class="el" href="#l00230">net_tx_handshake()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a6c20ece547e720eec693b02b39774c8b_cgraph.png" border="0" usemap="#anet_8c_a6c20ece547e720eec693b02b39774c8b_cgraph" alt=""/></div>
<map name="anet_8c_a6c20ece547e720eec693b02b39774c8b_cgraph" id="anet_8c_a6c20ece547e720eec693b02b39774c8b_cgraph">
<area shape="rect" title=" " alt="" coords="5,220,63,246"/>
<area shape="rect" href="net_8c.html#aa1aa11043c32d2b6ea7a60cadadccb94" title=" " alt="" coords="134,47,212,73"/>
<area shape="poly" title=" " alt="" coords="36,219,59,155,80,116,109,82,118,75,121,79,113,86,85,119,64,157,41,221"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="320,22,415,47"/>
<area shape="poly" title=" " alt="" coords="33,220,36,181,47,129,70,75,87,52,109,32,133,19,158,10,211,3,264,6,310,15,309,20,263,11,211,8,159,15,135,24,112,37,91,55,75,78,52,130,42,182,38,220"/>
<area shape="rect" href="net_8c.html#a8bd2d98d388794603edc8c3ba56e7f85" title=" " alt="" coords="111,96,235,122"/>
<area shape="poly" title=" " alt="" coords="40,218,67,176,86,152,109,131,114,128,117,132,112,135,90,156,71,179,44,221"/>
<area shape="rect" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606" title=" " alt="" coords="123,146,223,171"/>
<area shape="poly" title=" " alt="" coords="51,218,109,180,119,175,121,180,112,185,54,222"/>
<area shape="rect" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc" title=" " alt="" coords="122,195,224,221"/>
<area shape="poly" title=" " alt="" coords="62,225,106,217,107,222,63,231"/>
<area shape="rect" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5" title=" " alt="" coords="122,395,224,421"/>
<area shape="poly" title=" " alt="" coords="42,245,66,306,87,342,113,374,126,385,123,389,109,378,82,345,61,308,37,247"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="323,344,412,370"/>
<area shape="poly" title=" " alt="" coords="43,245,69,288,88,311,112,329,160,349,212,359,262,363,307,361,308,367,262,368,211,365,159,354,109,334,85,315,64,292,39,248"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="131,244,215,270"/>
<area shape="poly" title=" " alt="" coords="63,235,116,244,115,250,62,241"/>
<area shape="rect" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368" title=" " alt="" coords="115,446,231,471"/>
<area shape="poly" title=" " alt="" coords="39,246,45,282,58,331,80,384,95,409,113,431,116,435,112,438,109,435,90,412,75,387,53,333,40,283,34,247"/>
<area shape="rect" href="socket_8c.html#ac046ff247e07d169f5445f2343a06da3" title=" " alt="" coords="122,294,224,319"/>
<area shape="poly" title=" " alt="" coords="55,244,112,280,122,285,119,290,109,285,52,249"/>
<area shape="poly" title=" " alt="" coords="212,52,304,40,305,45,213,57"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="508,22,598,47"/>
<area shape="poly" title=" " alt="" coords="416,32,492,32,492,37,416,37"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="500,344,606,370"/>
<area shape="poly" title=" " alt="" coords="224,403,329,395,452,380,490,372,492,377,453,385,330,401,224,408"/>
<area shape="poly" title=" " alt="" coords="224,392,307,370,309,375,225,397"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="299,295,436,321"/>
<area shape="poly" title=" " alt="" coords="188,392,229,361,282,329,295,324,297,329,284,334,232,365,191,396"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="661,295,766,321"/>
<area shape="poly" title=" " alt="" coords="597,341,654,323,655,328,598,346"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="654,344,773,370"/>
<area shape="poly" title=" " alt="" coords="606,354,638,354,638,360,606,360"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="670,394,757,419"/>
<area shape="poly" title=" " alt="" coords="598,368,656,386,655,391,597,373"/>
<area shape="poly" title=" " alt="" coords="413,354,485,354,485,360,413,360"/>
<area shape="poly" title=" " alt="" coords="215,245,265,238,325,234,390,239,423,246,453,256,479,270,502,289,537,329,533,333,498,293,476,275,451,261,421,251,390,244,325,240,265,243,216,251"/>
<area shape="poly" title=" " alt="" coords="216,265,301,288,300,293,215,270"/>
<area shape="poly" title=" " alt="" coords="231,450,335,435,394,422,451,405,516,376,518,380,453,410,395,427,336,440,232,456"/>
<area shape="rect" href="socket_8c.html#af71c99cb810ee32e115acfeebcc4fdcd" title=" " alt="" coords="283,496,452,522"/>
<area shape="poly" title=" " alt="" coords="226,469,302,489,300,494,224,474"/>
<area shape="poly" title=" " alt="" coords="214,290,263,278,324,269,389,268,422,272,453,280,496,303,531,331,527,335,493,307,451,285,421,277,389,273,324,274,265,283,216,295"/>
<area shape="poly" title=" " alt="" coords="225,317,309,339,307,344,224,322"/>
<area shape="poly" title=" " alt="" coords="225,304,283,304,283,310,225,309"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a6c20ece547e720eec693b02b39774c8b_icgraph.png" border="0" usemap="#anet_8c_a6c20ece547e720eec693b02b39774c8b_icgraph" alt=""/></div>
<map name="anet_8c_a6c20ece547e720eec693b02b39774c8b_icgraph" id="anet_8c_a6c20ece547e720eec693b02b39774c8b_icgraph">
<area shape="rect" title=" " alt="" coords="1854,223,1911,248"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1714,148,1806,174"/>
<area shape="poly" title=" " alt="" coords="1846,217,1781,177,1784,172,1849,212"/>
<area shape="rect" href="net_8c.html#a228af3513fa40c477512b1d69eea2112" title=" " alt="" coords="1347,223,1474,248"/>
<area shape="poly" title=" " alt="" coords="1838,238,1475,238,1475,233,1838,233"/>
<area shape="rect" href="net_8c.html#a6a024f8bd13770fb4b83bd6994aa0e93" title=" " alt="" coords="1347,333,1474,359"/>
<area shape="poly" title=" " alt="" coords="1839,248,1470,335,1469,330,1838,243"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1522,136,1666,162"/>
<area shape="poly" title=" " alt="" coords="1698,159,1666,157,1666,151,1698,154"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,85,783,111"/>
<area shape="poly" title=" " alt="" coords="1520,135,1474,126,1353,107,1300,102,1232,101,1044,101,783,101,783,96,1044,96,1232,96,1300,97,1354,102,1475,121,1521,130"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1360,136,1461,162"/>
<area shape="poly" title=" " alt="" coords="1506,152,1461,152,1461,146,1506,146"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,55,651,80"/>
<area shape="poly" title=" " alt="" coords="683,89,650,83,651,78,684,84"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,108,613,117,612,111,683,102"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,5,612,31"/>
<area shape="poly" title=" " alt="" coords="707,79,649,45,612,29,614,24,652,40,710,74"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,136,1299,162"/>
<area shape="poly" title=" " alt="" coords="1344,152,1299,152,1299,146,1344,146"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,136,1114,162"/>
<area shape="poly" title=" " alt="" coords="1146,152,1114,152,1114,146,1146,146"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,216,929,242"/>
<area shape="poly" title=" " alt="" coords="990,170,979,175,903,218,901,213,976,170,988,165"/>
<area shape="poly" title=" " alt="" coords="852,207,754,113,758,109,856,203"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,240,772,266"/>
<area shape="poly" title=" " alt="" coords="816,243,773,250,772,245,815,237"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,203,640,228"/>
<area shape="poly" title=" " alt="" coords="694,244,639,231,641,226,695,239"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,259,637,264,637,258,694,254"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,301,637,327"/>
<area shape="poly" title=" " alt="" coords="696,274,652,293,625,303,623,298,650,288,694,269"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,404,633,430"/>
<area shape="poly" title=" " alt="" coords="719,279,603,405,599,402,715,276"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,153,625,179"/>
<area shape="poly" title=" " alt="" coords="710,233,649,192,624,181,627,176,652,188,713,228"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,240,476,281"/>
<area shape="poly" title=" " alt="" coords="524,299,473,284,474,279,526,294"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,404,436,430"/>
<area shape="poly" title=" " alt="" coords="526,420,437,420,437,414,526,414"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,453,450,479"/>
<area shape="poly" title=" " alt="" coords="527,435,451,456,450,450,526,430"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,503,435,528"/>
<area shape="poly" title=" " alt="" coords="559,442,522,468,477,494,437,509,435,504,475,489,519,464,556,437"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,552,424,578"/>
<area shape="poly" title=" " alt="" coords="572,444,533,494,507,521,478,543,452,556,426,563,424,558,450,551,475,539,503,517,529,491,567,441"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,305,424,331"/>
<area shape="poly" title=" " alt="" coords="556,396,519,370,475,345,424,326,426,321,477,340,522,365,559,392"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,355,424,380"/>
<area shape="poly" title=" " alt="" coords="526,404,424,376,425,371,528,398"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,404,273,430"/>
<area shape="poly" title=" " alt="" coords="336,451,272,433,274,428,338,446"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,453,275,479"/>
<area shape="poly" title=" " alt="" coords="333,469,275,469,275,464,333,464"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,429,127,455"/>
<area shape="poly" title=" " alt="" coords="162,430,128,435,127,430,161,424"/>
<area shape="poly" title=" " alt="" coords="159,459,126,454,127,449,160,454"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,503,250,528"/>
<area shape="poly" title=" " alt="" coords="348,518,250,518,250,513,348,513"/>
<area shape="poly" title=" " alt="" coords="1374,217,1298,175,1272,165,1274,160,1300,170,1377,212"/>
<area shape="rect" href="inet_8c.html#addba3dbe3eee187ecb6af12da94e12de" title=" " alt="" coords="1178,185,1283,211"/>
<area shape="poly" title=" " alt="" coords="1331,222,1283,212,1284,206,1332,217"/>
<area shape="rect" href="serial_8c.html#afd1f0015559a46379c5a5302589450fa" title=" " alt="" coords="1173,235,1288,260"/>
<area shape="poly" title=" " alt="" coords="1332,243,1289,246,1288,241,1332,238"/>
<area shape="rect" href="usb_8c.html#a22b05dc9bd4af901e301699fd78ca936" title=" " alt="" coords="1178,284,1283,310"/>
<area shape="poly" title=" " alt="" coords="1357,256,1271,286,1270,281,1355,251"/>
<area shape="rect" href="inet_8c.html#a4eb490f2821f8a144bd9940e66d11354" title=" " alt="" coords="993,185,1098,211"/>
<area shape="poly" title=" " alt="" coords="1162,201,1098,201,1098,196,1162,196"/>
<area shape="poly" title=" " alt="" coords="978,213,930,222,929,217,977,208"/>
<area shape="rect" href="serial_8c.html#ae73e19d76cbb99f66343c25eef4f73eb" title=" " alt="" coords="988,235,1103,260"/>
<area shape="poly" title=" " alt="" coords="1157,250,1103,250,1103,245,1157,245"/>
<area shape="poly" title=" " alt="" coords="972,242,929,237,930,232,973,237"/>
<area shape="rect" href="usb_8c.html#a68c518ca08dac477013ed3b56ee8c174" title=" " alt="" coords="993,284,1098,310"/>
<area shape="poly" title=" " alt="" coords="1162,300,1098,300,1098,294,1162,294"/>
<area shape="poly" title=" " alt="" coords="990,281,976,275,908,245,910,240,978,270,992,276"/>
<area shape="rect" href="inet_8c.html#a11fa9878cd5a0b710987f3b3468fbbc8" title=" " alt="" coords="1174,333,1286,359"/>
<area shape="poly" title=" " alt="" coords="1332,349,1287,349,1287,344,1332,344"/>
<area shape="rect" href="usb_8c.html#a0589e9bb1b983864e59ba5d8cdca033f" title=" " alt="" coords="1174,383,1286,408"/>
<area shape="poly" title=" " alt="" coords="1347,366,1281,385,1279,379,1345,361"/>
<area shape="poly" title=" " alt="" coords="1163,327,1160,324,1141,298,1135,273,1129,248,1112,224,1096,214,1099,209,1116,220,1134,246,1140,272,1146,296,1164,320,1167,323"/>
<area shape="poly" title=" " alt="" coords="1171,379,1160,374,1106,342,1063,312,1066,308,1109,338,1163,369,1173,374"/>
</map>
</div>

</div>
</div>
<a id="a228af3513fa40c477512b1d69eea2112" name="a228af3513fa40c477512b1d69eea2112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a228af3513fa40c477512b1d69eea2112">&#9670;&#160;</a></span>net_rx_handshake()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_rx_handshake </td>
          <td>(</td>
          <td class="paramtype">pi_socket_t *</td>          <td class="paramname"><span class="paramname"><em>ps</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  183</span>{</div>
<div class="line"><span class="lineno">  184</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msg1[] = <span class="comment">/* 50 bytes */</span></div>
<div class="line"><span class="lineno">  185</span>        <span class="stringliteral">&quot;\x12\x01\x00\x00\x00\x00\x00\x00\x00\x20\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  186</span>        <span class="stringliteral">&quot;\x24\xff\xff\xff\xff\x3c\x00\x3c\x00\x00\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  187</span>        <span class="stringliteral">&quot;\x00\x00\x00\x00\xc0\xa8\xa5\x1f\x04\x27\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  188</span>        <span class="stringliteral">&quot;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00&quot;</span>;</div>
<div class="line"><span class="lineno">  189</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msg2[] = <span class="comment">/* 46 bytes */</span></div>
<div class="line"><span class="lineno">  190</span>        <span class="stringliteral">&quot;\x13\x01\x00\x00\x00\x00\x00\x00\x00\x20\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  191</span>        <span class="stringliteral">&quot;\x20\xff\xff\xff\xff\x00\x3c\x00\x3c\x00\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  192</span>        <span class="stringliteral">&quot;\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  193</span>        <span class="stringliteral">&quot;\x00\x00\x00\x00\x00\x00\x00&quot;</span>;</div>
<div class="line"><span class="lineno">  194</span>    pi_buffer_t *<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>;</div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordtype">int</span> err;</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a> = <a class="code hl_function" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc">pi_buffer_new</a> (256);</div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a> == NULL) {</div>
<div class="line"><span class="lineno">  199</span>        errno = ENOMEM;</div>
<div class="line"><span class="lineno">  200</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_MEMORY);</div>
<div class="line"><span class="lineno">  201</span>    }</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">if</span> ((err = <a class="code hl_function" href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a>(ps, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, 256, 0)) &gt;= 0  &amp;&amp;</div>
<div class="line"><span class="lineno">  204</span>        (err = <a class="code hl_function" href="#a1670601987b6494055bea1a75938955e">net_tx</a>(ps, msg1, 50, 0)) &gt;= 0    &amp;&amp;</div>
<div class="line"><span class="lineno">  205</span>        (err = <a class="code hl_function" href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a>(ps, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, 50, 0)) &gt;= 0  &amp;&amp;</div>
<div class="line"><span class="lineno">  206</span>        (err = <a class="code hl_function" href="#a1670601987b6494055bea1a75938955e">net_tx</a>(ps, msg2, 46, 0)) &gt;= 0    &amp;&amp;</div>
<div class="line"><span class="lineno">  207</span>        (err = <a class="code hl_function" href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a>(ps, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, 8, 0)) &gt;= 0)</div>
<div class="line"><span class="lineno">  208</span>    {</div>
<div class="line"><span class="lineno">  209</span>        <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>);</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  211</span>    }</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>);</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  215</span>}</div>
<div class="ttc" id="apilot-debug_8c_html_a0ab27356885000c0b9430ce5f9b4a4ec"><div class="ttname"><a href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a></div><div class="ttdeci">unsigned char buffer[0xffff]</div><div class="ttdef"><b>Definition</b> pilot-debug.c:767</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00767">buffer</a>, <a class="el" href="#l00407">net_rx()</a>, <a class="el" href="#l00305">net_tx()</a>, <a class="el" href="#l00103">pi_buffer_free()</a>, <a class="el" href="#l00031">pi_buffer_new()</a>, and <a class="el" href="#l01625">pi_set_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00606">pi_bluetooth_accept()</a>, <a class="el" href="#l00329">pi_inet_accept()</a>, <a class="el" href="#l00469">pi_serial_accept()</a>, and <a class="el" href="#l00390">pi_usb_accept()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a228af3513fa40c477512b1d69eea2112_cgraph.png" border="0" usemap="#anet_8c_a228af3513fa40c477512b1d69eea2112_cgraph" alt=""/></div>
<map name="anet_8c_a228af3513fa40c477512b1d69eea2112_cgraph" id="anet_8c_a228af3513fa40c477512b1d69eea2112_cgraph">
<area shape="rect" title=" " alt="" coords="5,333,133,359"/>
<area shape="rect" href="net_8c.html#a6c20ece547e720eec693b02b39774c8b" title=" " alt="" coords="181,333,238,359"/>
<area shape="poly" title=" " alt="" coords="133,344,165,344,165,349,133,349"/>
<area shape="rect" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606" title=" " alt="" coords="298,559,398,584"/>
<area shape="poly" title=" " alt="" coords="83,357,163,443,222,497,287,545,294,549,291,554,285,550,219,501,159,447,79,361"/>
<area shape="rect" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc" title=" " alt="" coords="297,608,399,634"/>
<area shape="poly" title=" " alt="" coords="79,358,119,428,149,472,183,514,231,559,287,595,296,599,293,604,285,599,227,564,179,517,144,475,115,431,75,361"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="498,181,588,207"/>
<area shape="poly" title=" " alt="" coords="75,331,101,285,146,222,175,190,208,161,245,136,285,118,320,108,349,103,378,106,412,118,428,131,437,145,445,159,460,172,484,182,482,187,457,176,441,162,433,148,424,134,409,123,376,112,349,109,321,113,287,123,248,141,212,165,179,194,150,226,106,288,79,334"/>
<area shape="rect" href="net_8c.html#a1670601987b6494055bea1a75938955e" title=" " alt="" coords="181,208,238,234"/>
<area shape="poly" title=" " alt="" coords="83,331,180,242,184,246,87,335"/>
<area shape="rect" href="net_8c.html#aa1aa11043c32d2b6ea7a60cadadccb94" title=" " alt="" coords="309,509,387,535"/>
<area shape="poly" title=" " alt="" coords="219,358,251,428,271,464,288,488,302,499,298,503,284,492,266,467,246,430,214,361"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="495,459,591,484"/>
<area shape="poly" title=" " alt="" coords="219,358,245,398,264,420,287,437,335,457,385,468,435,473,480,474,480,479,435,478,384,474,333,462,285,442,261,424,241,402,215,360"/>
<area shape="rect" href="net_8c.html#a8bd2d98d388794603edc8c3ba56e7f85" title=" " alt="" coords="286,157,410,183"/>
<area shape="poly" title=" " alt="" coords="212,332,236,271,257,234,284,200,298,189,302,193,288,204,262,237,241,273,217,334"/>
<area shape="poly" title=" " alt="" coords="218,358,241,415,251,454,257,486,266,515,288,546,290,548,286,551,284,549,261,517,251,487,246,455,235,416,214,360"/>
<area shape="poly" title=" " alt="" coords="213,359,217,404,227,466,249,535,266,567,288,595,289,597,286,600,284,599,262,569,244,537,222,468,211,404,208,360"/>
<area shape="rect" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5" title=" " alt="" coords="297,308,399,334"/>
<area shape="poly" title=" " alt="" coords="238,338,282,330,283,336,239,344"/>
<area shape="poly" title=" " alt="" coords="214,332,240,288,260,264,285,244,333,220,386,205,437,196,483,192,483,197,438,201,387,210,335,225,287,248,264,268,245,291,219,334"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="306,259,390,284"/>
<area shape="poly" title=" " alt="" coords="227,331,285,293,294,289,296,293,287,298,229,335"/>
<area shape="rect" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368" title=" " alt="" coords="290,5,406,31"/>
<area shape="poly" title=" " alt="" coords="213,332,241,252,284,144,331,44,335,46,288,146,246,254,218,334"/>
<area shape="rect" href="socket_8c.html#ac046ff247e07d169f5445f2343a06da3" title=" " alt="" coords="297,357,399,383"/>
<area shape="poly" title=" " alt="" coords="239,348,283,356,282,361,238,354"/>
<area shape="poly" title=" " alt="" coords="387,509,479,485,481,490,389,515"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="683,459,774,484"/>
<area shape="poly" title=" " alt="" coords="591,469,668,469,668,474,591,474"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="676,232,781,258"/>
<area shape="poly" title=" " alt="" coords="399,310,627,268,662,259,663,265,628,273,400,315"/>
<area shape="poly" title=" " alt="" coords="387,305,409,295,467,255,515,215,518,219,471,259,412,299,389,310"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="474,333,612,359"/>
<area shape="poly" title=" " alt="" coords="400,325,459,333,458,338,400,330"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="836,183,941,208"/>
<area shape="poly" title=" " alt="" coords="772,229,829,211,830,216,774,234"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="829,232,948,258"/>
<area shape="poly" title=" " alt="" coords="781,242,813,242,813,248,781,248"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="845,281,932,307"/>
<area shape="poly" title=" " alt="" coords="774,256,831,274,830,279,772,261"/>
<area shape="poly" title=" " alt="" coords="589,204,665,225,663,230,587,209"/>
<area shape="poly" title=" " alt="" coords="391,266,660,247,661,252,391,271"/>
<area shape="poly" title=" " alt="" coords="385,282,494,325,492,330,383,287"/>
<area shape="poly" title=" " alt="" coords="379,29,490,86,629,167,701,220,698,224,626,171,488,90,376,34"/>
<area shape="rect" href="socket_8c.html#af71c99cb810ee32e115acfeebcc4fdcd" title=" " alt="" coords="458,5,628,31"/>
<area shape="poly" title=" " alt="" coords="407,16,443,16,443,21,407,21"/>
<area shape="poly" title=" " alt="" coords="400,380,450,389,508,393,569,387,598,380,626,369,655,350,679,324,713,270,717,273,684,327,659,354,629,374,600,385,570,393,508,398,449,394,399,386"/>
<area shape="poly" title=" " alt="" coords="390,354,409,344,444,314,476,281,523,218,527,222,480,284,448,318,412,348,393,359"/>
<area shape="poly" title=" " alt="" coords="400,361,458,354,459,359,400,367"/>
<area shape="poly" title=" " alt="" coords="217,233,248,319,268,364,288,393,314,405,363,421,481,454,480,459,361,427,312,410,284,398,263,367,243,321,212,235"/>
<area shape="poly" title=" " alt="" coords="237,208,296,186,298,191,239,213"/>
<area shape="poly" title=" " alt="" coords="217,206,244,172,263,155,285,142,314,134,344,130,404,136,460,152,506,172,504,177,458,157,403,141,344,136,315,139,287,147,266,160,247,176,221,209"/>
<area shape="poly" title=" " alt="" coords="239,229,298,250,296,255,237,234"/>
<area shape="poly" title=" " alt="" coords="216,206,284,99,325,42,330,45,288,102,221,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a228af3513fa40c477512b1d69eea2112_icgraph.png" border="0" usemap="#anet_8c_a228af3513fa40c477512b1d69eea2112_icgraph" alt=""/></div>
<map name="anet_8c_a228af3513fa40c477512b1d69eea2112_icgraph" id="anet_8c_a228af3513fa40c477512b1d69eea2112_icgraph">
<area shape="rect" title=" " alt="" coords="1347,242,1474,268"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,168,1299,193"/>
<area shape="poly" title=" " alt="" coords="1367,238,1298,207,1270,196,1272,191,1300,202,1370,233"/>
<area shape="rect" href="inet_8c.html#addba3dbe3eee187ecb6af12da94e12de" title=" " alt="" coords="1178,217,1283,242"/>
<area shape="poly" title=" " alt="" coords="1331,247,1283,240,1284,234,1332,241"/>
<area shape="rect" href="serial_8c.html#afd1f0015559a46379c5a5302589450fa" title=" " alt="" coords="1173,266,1288,292"/>
<area shape="poly" title=" " alt="" coords="1332,268,1289,274,1288,269,1331,263"/>
<area shape="rect" href="usb_8c.html#a22b05dc9bd4af901e301699fd78ca936" title=" " alt="" coords="1178,316,1283,341"/>
<area shape="poly" title=" " alt="" coords="1369,277,1300,307,1272,317,1270,312,1298,302,1367,272"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,168,1114,193"/>
<area shape="poly" title=" " alt="" coords="1146,183,1114,183,1114,178,1146,178"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,242,929,268"/>
<area shape="poly" title=" " alt="" coords="991,202,978,207,906,244,903,239,976,202,989,197"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,145,772,170"/>
<area shape="poly" title=" " alt="" coords="847,235,759,173,762,169,850,231"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,292,783,317"/>
<area shape="poly" title=" " alt="" coords="828,276,780,293,779,288,826,271"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,21,640,46"/>
<area shape="poly" title=" " alt="" coords="720,133,689,96,649,60,630,49,633,45,652,55,693,92,724,130"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,70,637,96"/>
<area shape="poly" title=" " alt="" coords="704,139,650,109,625,99,627,94,652,105,707,134"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,120,637,145"/>
<area shape="poly" title=" " alt="" coords="694,153,637,143,638,138,694,147"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,169,633,194"/>
<area shape="poly" title=" " alt="" coords="695,167,634,177,633,172,694,162"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,218,625,244"/>
<area shape="poly" title=" " alt="" coords="705,181,652,209,627,220,625,215,650,205,703,176"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,5,476,46"/>
<area shape="poly" title=" " alt="" coords="529,115,523,110,508,97,498,85,489,72,475,60,456,49,459,44,478,56,493,69,502,82,512,94,526,106,532,110"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,70,436,96"/>
<area shape="poly" title=" " alt="" coords="529,164,523,160,508,147,498,134,489,121,475,109,436,93,438,88,478,105,493,118,503,130,512,143,526,156,532,159"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,120,450,145"/>
<area shape="poly" title=" " alt="" coords="526,168,450,148,451,143,527,163"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,169,435,194"/>
<area shape="poly" title=" " alt="" coords="526,184,436,184,436,179,526,179"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,218,424,244"/>
<area shape="poly" title=" " alt="" coords="528,200,425,227,424,222,526,195"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,268,424,293"/>
<area shape="poly" title=" " alt="" coords="532,204,526,208,512,220,503,233,493,246,478,259,451,271,425,279,424,273,449,266,475,254,489,242,498,230,508,217,523,204,529,199"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,317,424,342"/>
<area shape="poly" title=" " alt="" coords="530,204,526,207,509,232,503,257,497,282,490,295,478,308,452,322,425,330,424,324,450,318,475,304,485,292,492,280,498,255,504,230,522,204,526,200"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,70,273,96"/>
<area shape="poly" title=" " alt="" coords="336,117,272,99,274,94,338,112"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,120,275,145"/>
<area shape="poly" title=" " alt="" coords="333,135,275,135,275,130,333,130"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,96,127,121"/>
<area shape="poly" title=" " alt="" coords="162,96,128,101,127,96,161,90"/>
<area shape="poly" title=" " alt="" coords="159,125,126,120,127,115,160,120"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,169,250,194"/>
<area shape="poly" title=" " alt="" coords="348,184,250,184,250,179,348,179"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,268,651,293"/>
<area shape="poly" title=" " alt="" coords="683,298,650,293,651,288,684,293"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,317,612,342"/>
<area shape="poly" title=" " alt="" coords="684,316,613,328,612,323,683,311"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,366,612,392"/>
<area shape="poly" title=" " alt="" coords="707,328,652,357,614,373,612,368,650,353,704,323"/>
<area shape="rect" href="inet_8c.html#a4eb490f2821f8a144bd9940e66d11354" title=" " alt="" coords="993,217,1098,242"/>
<area shape="poly" title=" " alt="" coords="1162,232,1098,232,1098,227,1162,227"/>
<area shape="poly" title=" " alt="" coords="978,243,930,250,929,245,977,237"/>
<area shape="rect" href="serial_8c.html#ae73e19d76cbb99f66343c25eef4f73eb" title=" " alt="" coords="988,266,1103,292"/>
<area shape="poly" title=" " alt="" coords="1157,282,1103,282,1103,276,1157,276"/>
<area shape="poly" title=" " alt="" coords="972,271,929,265,930,259,973,266"/>
<area shape="rect" href="usb_8c.html#a68c518ca08dac477013ed3b56ee8c174" title=" " alt="" coords="993,316,1098,341"/>
<area shape="poly" title=" " alt="" coords="1162,331,1098,331,1098,326,1162,326"/>
<area shape="poly" title=" " alt="" coords="989,312,976,307,904,271,907,266,978,302,991,307"/>
</map>
</div>

</div>
</div>
<a id="a3f55f647bcd923b897bf8061d4e739ee" name="a3f55f647bcd923b897bf8061d4e739ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f55f647bcd923b897bf8061d4e739ee">&#9670;&#160;</a></span>net_setsockopt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int net_setsockopt </td>
          <td>(</td>
          <td class="paramtype">pi_socket_t *</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>level</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>option_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>option_value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>option_len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  615</span>{</div>
<div class="line"><span class="lineno">  616</span>    pi_protocol_t *prot;</div>
<div class="line"><span class="lineno">  617</span>    pi_net_data_t *data;</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>    prot = <a class="code hl_function" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3">pi_protocol</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  620</span>    <span class="keywordflow">if</span> (prot == NULL)</div>
<div class="line"><span class="lineno">  621</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>    data = (pi_net_data_t *)prot-&gt;data;</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>    <span class="keywordflow">switch</span> (option_name) {</div>
<div class="line"><span class="lineno">  626</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacepisock.html#a1fdae609401c653f1d16b373d316b4c2">PI_NET_TYPE</a>:</div>
<div class="line"><span class="lineno">  627</span>            <span class="keywordflow">if</span> (*option_len != <span class="keyword">sizeof</span> (data-&gt;type)) {</div>
<div class="line"><span class="lineno">  628</span>                errno = EINVAL;</div>
<div class="line"><span class="lineno">  629</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_ARGUMENT);</div>
<div class="line"><span class="lineno">  630</span>            }</div>
<div class="line"><span class="lineno">  631</span>            memcpy (&amp;data-&gt;type, option_value,</div>
<div class="line"><span class="lineno">  632</span>                sizeof (data-&gt;type));</div>
<div class="line"><span class="lineno">  633</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  634</span>        </div>
<div class="line"><span class="lineno">  635</span>        <span class="comment">/* this option, when set to != 0, instructs NET to separately</span></div>
<div class="line"><span class="lineno">  636</span><span class="comment">         * write the NET header and the data block. Data can be further</span></div>
<div class="line"><span class="lineno">  637</span><span class="comment">         * sent in chunks by also setting PI_NET_WRITE_CHUNKSIZE below.</span></div>
<div class="line"><span class="lineno">  638</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  639</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacepisock.html#a8e760e4750abddeb06118141fd927704">PI_NET_SPLIT_WRITES</a>:</div>
<div class="line"><span class="lineno">  640</span>            <span class="keywordflow">if</span> (*option_len != <span class="keyword">sizeof</span> (data-&gt;split_writes)) {</div>
<div class="line"><span class="lineno">  641</span>                errno = EINVAL;</div>
<div class="line"><span class="lineno">  642</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_ARGUMENT);</div>
<div class="line"><span class="lineno">  643</span>            }</div>
<div class="line"><span class="lineno">  644</span>            memcpy (&amp;data-&gt;split_writes, option_value,</div>
<div class="line"><span class="lineno">  645</span>                <span class="keyword">sizeof</span>(data-&gt;split_writes));</div>
<div class="line"><span class="lineno">  646</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>        <span class="comment">/* this option, when set to != 0, instructs NET to write the</span></div>
<div class="line"><span class="lineno">  649</span><span class="comment">         * packet data in chunks of the given maximum size. If</span></div>
<div class="line"><span class="lineno">  650</span><span class="comment">         * PI_NET_SPLIT_WRITES is not set, and this option is set, we</span></div>
<div class="line"><span class="lineno">  651</span><span class="comment">         * chunk the whole write (including the NET header)</span></div>
<div class="line"><span class="lineno">  652</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  653</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacepisock.html#a7e37ef6051a9b658474dd385573ef58e">PI_NET_WRITE_CHUNKSIZE</a>:</div>
<div class="line"><span class="lineno">  654</span>            <span class="keywordflow">if</span> (*option_len != <span class="keyword">sizeof</span> (data-&gt;write_chunksize)) {</div>
<div class="line"><span class="lineno">  655</span>                errno = EINVAL;</div>
<div class="line"><span class="lineno">  656</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_ARGUMENT);</div>
<div class="line"><span class="lineno">  657</span>            }</div>
<div class="line"><span class="lineno">  658</span>            memcpy (&amp;data-&gt;write_chunksize, option_value,</div>
<div class="line"><span class="lineno">  659</span>                <span class="keyword">sizeof</span>(data-&gt;write_chunksize));</div>
<div class="line"><span class="lineno">  660</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  661</span>    }</div>
<div class="line"><span class="lineno">  662</span> </div>
<div class="line"><span class="lineno">  663</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  664</span>}</div>
<div class="ttc" id="anamespacepisock_html_a7e37ef6051a9b658474dd385573ef58e"><div class="ttname"><a href="namespacepisock.html#a7e37ef6051a9b658474dd385573ef58e">pisock.PI_NET_WRITE_CHUNKSIZE</a></div><div class="ttdeci">PI_NET_WRITE_CHUNKSIZE</div><div class="ttdef"><b>Definition</b> pisock.py:109</div></div>
<div class="ttc" id="anamespacepisock_html_a8e760e4750abddeb06118141fd927704"><div class="ttname"><a href="namespacepisock.html#a8e760e4750abddeb06118141fd927704">pisock.PI_NET_SPLIT_WRITES</a></div><div class="ttdeci">PI_NET_SPLIT_WRITES</div><div class="ttdef"><b>Definition</b> pisock.py:108</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00659">pi_protocol()</a>, and <a class="el" href="#l01625">pi_set_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00135">net_protocol()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a3f55f647bcd923b897bf8061d4e739ee_cgraph.png" border="0" usemap="#anet_8c_a3f55f647bcd923b897bf8061d4e739ee_cgraph" alt=""/></div>
<map name="anet_8c_a3f55f647bcd923b897bf8061d4e739ee_cgraph" id="anet_8c_a3f55f647bcd923b897bf8061d4e739ee_cgraph">
<area shape="rect" title=" " alt="" coords="5,80,116,106"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="166,104,250,130"/>
<area shape="poly" title=" " alt="" coords="117,99,151,105,150,110,116,104"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="164,55,253,80"/>
<area shape="poly" title=" " alt="" coords="116,81,148,75,149,80,117,86"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="317,55,422,80"/>
<area shape="poly" title=" " alt="" coords="250,101,310,83,311,88,252,107"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="301,104,438,130"/>
<area shape="poly" title=" " alt="" coords="251,114,286,114,286,120,251,120"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="493,5,599,31"/>
<area shape="poly" title=" " alt="" coords="418,51,482,33,484,38,419,57"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="486,55,606,80"/>
<area shape="poly" title=" " alt="" coords="423,65,471,65,471,70,423,70"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="502,104,590,130"/>
<area shape="poly" title=" " alt="" coords="419,78,489,98,487,103,418,84"/>
<area shape="poly" title=" " alt="" coords="253,65,302,65,302,70,253,70"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a3f55f647bcd923b897bf8061d4e739ee_icgraph.png" border="0" usemap="#anet_8c_a3f55f647bcd923b897bf8061d4e739ee_icgraph" alt=""/></div>
<map name="anet_8c_a3f55f647bcd923b897bf8061d4e739ee_icgraph" id="anet_8c_a3f55f647bcd923b897bf8061d4e739ee_icgraph">
<area shape="rect" title=" " alt="" coords="1828,105,1938,131"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1688,105,1780,131"/>
<area shape="poly" title=" " alt="" coords="1812,121,1780,121,1780,116,1812,116"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1496,105,1640,131"/>
<area shape="poly" title=" " alt="" coords="1672,121,1640,121,1640,116,1672,116"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,80,783,106"/>
<area shape="poly" title=" " alt="" coords="1481,111,1363,100,1232,95,1044,96,783,96,783,90,1044,90,1232,90,1363,95,1481,105"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1347,131,1448,156"/>
<area shape="poly" title=" " alt="" coords="1481,134,1449,139,1448,133,1481,128"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,5,651,31"/>
<area shape="poly" title=" " alt="" coords="704,74,650,45,625,34,627,29,652,40,707,69"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,55,612,80"/>
<area shape="poly" title=" " alt="" coords="683,86,612,74,613,69,684,81"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,104,613,116,612,110,683,99"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,131,1299,156"/>
<area shape="poly" title=" " alt="" coords="1331,146,1300,146,1300,141,1331,141"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,131,1114,156"/>
<area shape="poly" title=" " alt="" coords="1146,146,1114,146,1114,141,1146,141"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,131,929,156"/>
<area shape="poly" title=" " alt="" coords="962,146,930,146,930,141,962,141"/>
<area shape="poly" title=" " alt="" coords="827,127,777,109,779,104,829,122"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,228,772,254"/>
<area shape="poly" title=" " alt="" coords="850,167,762,230,759,225,847,163"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,153,640,179"/>
<area shape="poly" title=" " alt="" coords="704,222,650,193,625,182,627,177,652,188,707,217"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,203,637,228"/>
<area shape="poly" title=" " alt="" coords="694,236,637,226,638,221,694,231"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,251,637,260,637,255,694,245"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,301,633,327"/>
<area shape="poly" title=" " alt="" coords="705,264,652,293,627,303,625,298,650,288,703,260"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,351,625,376"/>
<area shape="poly" title=" " alt="" coords="724,268,693,306,652,342,627,355,624,350,649,337,689,302,720,265"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,138,476,178"/>
<area shape="poly" title=" " alt="" coords="529,247,523,243,508,230,498,217,489,205,475,192,456,181,459,177,478,188,493,201,502,214,512,226,526,239,532,243"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,203,436,228"/>
<area shape="poly" title=" " alt="" coords="529,296,523,292,508,279,498,266,489,254,475,242,436,225,438,220,478,237,493,250,503,263,512,275,526,288,532,292"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,252,450,278"/>
<area shape="poly" title=" " alt="" coords="526,301,450,281,451,275,527,296"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,301,435,327"/>
<area shape="poly" title=" " alt="" coords="526,317,436,317,436,312,526,312"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,351,424,376"/>
<area shape="poly" title=" " alt="" coords="528,333,425,360,424,355,526,327"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,400,424,426"/>
<area shape="poly" title=" " alt="" coords="532,336,526,340,512,353,503,365,493,378,478,391,451,404,425,411,424,406,449,399,475,387,489,375,498,362,508,349,523,336,529,332"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,449,424,475"/>
<area shape="poly" title=" " alt="" coords="530,337,526,340,509,364,503,389,497,415,490,428,478,440,452,455,425,462,424,457,450,450,475,436,485,424,492,413,498,388,504,362,522,336,526,333"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,203,273,228"/>
<area shape="poly" title=" " alt="" coords="336,250,272,232,274,226,338,245"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,252,275,278"/>
<area shape="poly" title=" " alt="" coords="333,268,275,268,275,262,333,262"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,228,127,254"/>
<area shape="poly" title=" " alt="" coords="162,228,128,234,127,228,161,223"/>
<area shape="poly" title=" " alt="" coords="159,258,126,253,127,247,160,252"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,301,250,327"/>
<area shape="poly" title=" " alt="" coords="348,317,250,317,250,312,348,312"/>
</map>
</div>

</div>
</div>
<a id="a1670601987b6494055bea1a75938955e" name="a1670601987b6494055bea1a75938955e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1670601987b6494055bea1a75938955e">&#9670;&#160;</a></span>net_tx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t net_tx </td>
          <td>(</td>
          <td class="paramtype">pi_socket_t *</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  306</span>{</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordtype">int</span>     bytes,</div>
<div class="line"><span class="lineno">  308</span>            offset,</div>
<div class="line"><span class="lineno">  309</span>            remain,</div>
<div class="line"><span class="lineno">  310</span>            tosend;</div>
<div class="line"><span class="lineno">  311</span>    pi_protocol_t   *prot,</div>
<div class="line"><span class="lineno">  312</span>            *next;</div>
<div class="line"><span class="lineno">  313</span>    pi_net_data_t *data;</div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>;</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>    prot = <a class="code hl_function" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3">pi_protocol</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  317</span>    <span class="keywordflow">if</span> (prot == NULL)</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  319</span>    data = (pi_net_data_t *)prot-&gt;data;</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    next = <a class="code hl_function" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368">pi_protocol_next</a>(ps-&gt;sd, PI_LEVEL_NET);</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">if</span> (next == NULL)</div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_SOCK_INVALID);</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>    <span class="comment">/* Create the header */</span></div>
<div class="line"><span class="lineno">  326</span>    <a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) malloc(PI_NET_HEADER_LEN + len);</div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a> == NULL)</div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_MEMORY);</div>
<div class="line"><span class="lineno">  329</span>    <a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>[PI_NET_OFFSET_TYPE] = data-&gt;type;</div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">if</span> (data-&gt;type == PI_NET_TYPE_TCKL)</div>
<div class="line"><span class="lineno">  331</span>        <a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>[PI_NET_OFFSET_TXID] = 0xff;</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  333</span>        <a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>[PI_NET_OFFSET_TXID] = data-&gt;txid;</div>
<div class="line"><span class="lineno">  334</span>    set_long(&amp;<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>[PI_NET_OFFSET_SIZE], len);</div>
<div class="line"><span class="lineno">  335</span>    memcpy(&amp;<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>[PI_NET_HEADER_LEN], msg, len);</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>    <span class="comment">/* Write the header and body, possibly in one write, or in two,</span></div>
<div class="line"><span class="lineno">  338</span><span class="comment">     * or in more, depending on the current options. Crucial options</span></div>
<div class="line"><span class="lineno">  339</span><span class="comment">     * here are `split_writes&#39; and `write_chunksize&#39; in this protocol&#39;s</span></div>
<div class="line"><span class="lineno">  340</span><span class="comment">     * data (use net_setsockopt() to set them).</span></div>
<div class="line"><span class="lineno">  341</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  342</span>    <span class="keywordflow">if</span> (data-&gt;split_writes)</div>
<div class="line"><span class="lineno">  343</span>    {</div>
<div class="line"><span class="lineno">  344</span>        <span class="comment">/* Bugfix for USB send problems. If connected over</span></div>
<div class="line"><span class="lineno">  345</span><span class="comment">         * USB, do the following:</span></div>
<div class="line"><span class="lineno">  346</span><span class="comment">         * - send the 6 bytes of header first</span></div>
<div class="line"><span class="lineno">  347</span><span class="comment">         * - split the rest of data into chunks if the write_chunksize opt is set</span></div>
<div class="line"><span class="lineno">  348</span><span class="comment">         * This is what Palm Desktop does on Windows for the Zire 72</span></div>
<div class="line"><span class="lineno">  349</span><span class="comment">         * (uses split writes and 4k chunks)</span></div>
<div class="line"><span class="lineno">  350</span><span class="comment">         * -- FP</span></div>
<div class="line"><span class="lineno">  351</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  352</span>        bytes = next-&gt;write(ps, <a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>, PI_NET_HEADER_LEN, <a class="code hl_variable" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">if</span> (bytes &lt; PI_NET_HEADER_LEN)</div>
<div class="line"><span class="lineno">  354</span>        {</div>
<div class="line"><span class="lineno">  355</span>            free(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>);</div>
<div class="line"><span class="lineno">  356</span>            <span class="keywordflow">return</span> bytes;</div>
<div class="line"><span class="lineno">  357</span>        }</div>
<div class="line"><span class="lineno">  358</span>        offset = PI_NET_HEADER_LEN;</div>
<div class="line"><span class="lineno">  359</span>        remain = len;</div>
<div class="line"><span class="lineno">  360</span>    }</div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  362</span>    {</div>
<div class="line"><span class="lineno">  363</span>        offset = 0;</div>
<div class="line"><span class="lineno">  364</span>        remain = PI_NET_HEADER_LEN + len;</div>
<div class="line"><span class="lineno">  365</span>    }</div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordflow">while</span> (remain &gt; 0)</div>
<div class="line"><span class="lineno">  368</span>    {</div>
<div class="line"><span class="lineno">  369</span>        <span class="keywordflow">if</span> (data-&gt;write_chunksize)</div>
<div class="line"><span class="lineno">  370</span>            tosend = (remain &gt; data-&gt;write_chunksize) ? data-&gt;write_chunksize : remain;</div>
<div class="line"><span class="lineno">  371</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  372</span>            tosend = remain;</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>        bytes = next-&gt;write(ps, &amp;<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>[offset], tosend, <a class="code hl_variable" href="darwinusb_8c.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div>
<div class="line"><span class="lineno">  375</span>        <span class="keywordflow">if</span> (bytes &lt; tosend)</div>
<div class="line"><span class="lineno">  376</span>        {</div>
<div class="line"><span class="lineno">  377</span>            free(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>);</div>
<div class="line"><span class="lineno">  378</span>            <span class="keywordflow">return</span> bytes;</div>
<div class="line"><span class="lineno">  379</span>        }</div>
<div class="line"><span class="lineno">  380</span>        remain -= bytes;</div>
<div class="line"><span class="lineno">  381</span>        offset += bytes;</div>
<div class="line"><span class="lineno">  382</span>    }</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    CHECK(PI_DBG_NET, PI_DBG_LVL_INFO, <a class="code hl_function" href="#a8bd2d98d388794603edc8c3ba56e7f85">net_dump_header</a>(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>, 1, ps-&gt;sd));</div>
<div class="line"><span class="lineno">  385</span>    CHECK(PI_DBG_NET, PI_DBG_LVL_DEBUG, <a class="code hl_function" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9">pi_dumpdata</a>((<span class="keywordtype">char</span> *)msg, len));</div>
<div class="line"><span class="lineno">  386</span>    </div>
<div class="line"><span class="lineno">  387</span>    free(<a class="code hl_variable" href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a>);</div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">return</span> len;</div>
<div class="line"><span class="lineno">  389</span>}</div>
<div class="ttc" id="apitcl_8c_html_a0dea8f1af961c5e9eb4425acd7c95409"><div class="ttname"><a href="pitcl_8c.html#a0dea8f1af961c5e9eb4425acd7c95409">buf</a></div><div class="ttdeci">char buf[0xffff]</div><div class="ttdef"><b>Definition</b> pitcl.c:34</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00034">buf</a>, <a class="el" href="#l00311">flags</a>, <a class="el" href="#l00678">net_dump_header()</a>, <a class="el" href="#l00222">pi_dumpdata()</a>, <a class="el" href="#l00659">pi_protocol()</a>, <a class="el" href="#l00672">pi_protocol_next()</a>, and <a class="el" href="#l01625">pi_set_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00135">net_protocol()</a>, <a class="el" href="#l00182">net_rx_handshake()</a>, and <a class="el" href="#l00230">net_tx_handshake()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a1670601987b6494055bea1a75938955e_cgraph.png" border="0" usemap="#anet_8c_a1670601987b6494055bea1a75938955e_cgraph" alt=""/></div>
<map name="anet_8c_a1670601987b6494055bea1a75938955e_cgraph" id="anet_8c_a1670601987b6494055bea1a75938955e_cgraph">
<area shape="rect" title=" " alt="" coords="5,104,63,130"/>
<area shape="rect" href="net_8c.html#a8bd2d98d388794603edc8c3ba56e7f85" title=" " alt="" coords="111,5,235,31"/>
<area shape="poly" title=" " alt="" coords="44,102,71,71,109,40,116,36,119,40,112,44,75,75,48,105"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="125,55,220,80"/>
<area shape="poly" title=" " alt="" coords="62,104,119,84,121,89,64,109"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="131,104,215,130"/>
<area shape="poly" title=" " alt="" coords="63,114,115,114,115,120,63,120"/>
<area shape="rect" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368" title=" " alt="" coords="115,203,231,228"/>
<area shape="poly" title=" " alt="" coords="48,128,75,159,112,189,119,193,116,198,109,194,71,162,44,132"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="128,153,218,179"/>
<area shape="poly" title=" " alt="" coords="64,124,121,145,119,150,62,129"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="322,55,413,80"/>
<area shape="poly" title=" " alt="" coords="221,65,307,65,307,70,221,70"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="315,153,420,179"/>
<area shape="poly" title=" " alt="" coords="216,125,300,147,299,152,215,130"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="299,104,436,130"/>
<area shape="poly" title=" " alt="" coords="215,114,283,114,283,120,215,120"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="507,104,613,130"/>
<area shape="poly" title=" " alt="" coords="420,150,492,131,493,137,421,155"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="500,153,620,179"/>
<area shape="poly" title=" " alt="" coords="421,164,485,164,485,169,421,169"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="516,203,604,228"/>
<area shape="poly" title=" " alt="" coords="421,177,502,198,501,203,420,182"/>
<area shape="poly" title=" " alt="" coords="226,199,299,181,300,186,227,205"/>
<area shape="rect" href="socket_8c.html#af71c99cb810ee32e115acfeebcc4fdcd" title=" " alt="" coords="283,203,452,228"/>
<area shape="poly" title=" " alt="" coords="231,213,267,213,267,218,231,218"/>
<area shape="poly" title=" " alt="" coords="218,164,299,164,299,169,218,169"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a1670601987b6494055bea1a75938955e_icgraph.png" border="0" usemap="#anet_8c_a1670601987b6494055bea1a75938955e_icgraph" alt=""/></div>
<map name="anet_8c_a1670601987b6494055bea1a75938955e_icgraph" id="anet_8c_a1670601987b6494055bea1a75938955e_icgraph">
<area shape="rect" title=" " alt="" coords="1854,223,1911,248"/>
<area shape="rect" href="net_8c.html#a2ccbd795f5d579a721b9d3632e46cfeb" title=" " alt="" coords="1714,148,1806,174"/>
<area shape="poly" title=" " alt="" coords="1846,217,1781,177,1784,172,1849,212"/>
<area shape="rect" href="net_8c.html#a228af3513fa40c477512b1d69eea2112" title=" " alt="" coords="1347,223,1474,248"/>
<area shape="poly" title=" " alt="" coords="1838,238,1475,238,1475,233,1838,233"/>
<area shape="rect" href="net_8c.html#a6a024f8bd13770fb4b83bd6994aa0e93" title=" " alt="" coords="1347,333,1474,359"/>
<area shape="poly" title=" " alt="" coords="1839,248,1470,335,1469,330,1838,243"/>
<area shape="rect" href="socket_8c.html#abbc33d60b040a4ed0667fba946921f9b" title=" " alt="" coords="1522,136,1666,162"/>
<area shape="poly" title=" " alt="" coords="1698,159,1666,157,1666,151,1698,154"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,85,783,111"/>
<area shape="poly" title=" " alt="" coords="1520,135,1474,126,1353,107,1300,102,1232,101,1044,101,783,101,783,96,1044,96,1232,96,1300,97,1354,102,1475,121,1521,130"/>
<area shape="rect" href="socket_8c.html#af67584512ce1964be95668c7a37d7c34" title=" " alt="" coords="1360,136,1461,162"/>
<area shape="poly" title=" " alt="" coords="1506,152,1461,152,1461,146,1506,146"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,55,651,80"/>
<area shape="poly" title=" " alt="" coords="683,89,650,83,651,78,684,84"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,104,612,130"/>
<area shape="poly" title=" " alt="" coords="684,108,613,117,612,111,683,102"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,5,612,31"/>
<area shape="poly" title=" " alt="" coords="707,79,649,45,612,29,614,24,652,40,710,74"/>
<area shape="rect" href="bluetooth_8c.html#aff7f06a1dc558ebe49b8488c00d38003" title=" " alt="" coords="1162,136,1299,162"/>
<area shape="poly" title=" " alt="" coords="1344,152,1299,152,1299,146,1344,146"/>
<area shape="rect" href="bluetooth_8c.html#a24b1126547be11c99add23f2ff902147" title=" " alt="" coords="977,136,1114,162"/>
<area shape="poly" title=" " alt="" coords="1146,152,1114,152,1114,146,1146,146"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,216,929,242"/>
<area shape="poly" title=" " alt="" coords="990,170,979,175,903,218,901,213,976,170,988,165"/>
<area shape="poly" title=" " alt="" coords="852,207,754,113,758,109,856,203"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,240,772,266"/>
<area shape="poly" title=" " alt="" coords="816,243,773,250,772,245,815,237"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,203,640,228"/>
<area shape="poly" title=" " alt="" coords="694,244,639,231,641,226,695,239"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,252,637,278"/>
<area shape="poly" title=" " alt="" coords="694,259,637,264,637,258,694,254"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,301,637,327"/>
<area shape="poly" title=" " alt="" coords="696,274,652,293,625,303,623,298,650,288,694,269"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,404,633,430"/>
<area shape="poly" title=" " alt="" coords="719,279,603,405,599,402,715,276"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,153,625,179"/>
<area shape="poly" title=" " alt="" coords="710,233,649,192,624,181,627,176,652,188,713,228"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,240,476,281"/>
<area shape="poly" title=" " alt="" coords="524,299,473,284,474,279,526,294"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,404,436,430"/>
<area shape="poly" title=" " alt="" coords="526,420,437,420,437,414,526,414"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,453,450,479"/>
<area shape="poly" title=" " alt="" coords="527,435,451,456,450,450,526,430"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,503,435,528"/>
<area shape="poly" title=" " alt="" coords="559,442,522,468,477,494,437,509,435,504,475,489,519,464,556,437"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,552,424,578"/>
<area shape="poly" title=" " alt="" coords="572,444,533,494,507,521,478,543,452,556,426,563,424,558,450,551,475,539,503,517,529,491,567,441"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,305,424,331"/>
<area shape="poly" title=" " alt="" coords="556,396,519,370,475,345,424,326,426,321,477,340,522,365,559,392"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,355,424,380"/>
<area shape="poly" title=" " alt="" coords="526,404,424,376,425,371,528,398"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,404,273,430"/>
<area shape="poly" title=" " alt="" coords="336,451,272,433,274,428,338,446"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,453,275,479"/>
<area shape="poly" title=" " alt="" coords="333,469,275,469,275,464,333,464"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,429,127,455"/>
<area shape="poly" title=" " alt="" coords="162,430,128,435,127,430,161,424"/>
<area shape="poly" title=" " alt="" coords="159,459,126,454,127,449,160,454"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,503,250,528"/>
<area shape="poly" title=" " alt="" coords="348,518,250,518,250,513,348,513"/>
<area shape="poly" title=" " alt="" coords="1374,217,1298,175,1272,165,1274,160,1300,170,1377,212"/>
<area shape="rect" href="inet_8c.html#addba3dbe3eee187ecb6af12da94e12de" title=" " alt="" coords="1178,185,1283,211"/>
<area shape="poly" title=" " alt="" coords="1331,222,1283,212,1284,206,1332,217"/>
<area shape="rect" href="serial_8c.html#afd1f0015559a46379c5a5302589450fa" title=" " alt="" coords="1173,235,1288,260"/>
<area shape="poly" title=" " alt="" coords="1332,243,1289,246,1288,241,1332,238"/>
<area shape="rect" href="usb_8c.html#a22b05dc9bd4af901e301699fd78ca936" title=" " alt="" coords="1178,284,1283,310"/>
<area shape="poly" title=" " alt="" coords="1357,256,1271,286,1270,281,1355,251"/>
<area shape="rect" href="inet_8c.html#a4eb490f2821f8a144bd9940e66d11354" title=" " alt="" coords="993,185,1098,211"/>
<area shape="poly" title=" " alt="" coords="1162,201,1098,201,1098,196,1162,196"/>
<area shape="poly" title=" " alt="" coords="978,213,930,222,929,217,977,208"/>
<area shape="rect" href="serial_8c.html#ae73e19d76cbb99f66343c25eef4f73eb" title=" " alt="" coords="988,235,1103,260"/>
<area shape="poly" title=" " alt="" coords="1157,250,1103,250,1103,245,1157,245"/>
<area shape="poly" title=" " alt="" coords="972,242,929,237,930,232,973,237"/>
<area shape="rect" href="usb_8c.html#a68c518ca08dac477013ed3b56ee8c174" title=" " alt="" coords="993,284,1098,310"/>
<area shape="poly" title=" " alt="" coords="1162,300,1098,300,1098,294,1162,294"/>
<area shape="poly" title=" " alt="" coords="990,281,976,275,908,245,910,240,978,270,992,276"/>
<area shape="rect" href="inet_8c.html#a11fa9878cd5a0b710987f3b3468fbbc8" title=" " alt="" coords="1174,333,1286,359"/>
<area shape="poly" title=" " alt="" coords="1332,349,1287,349,1287,344,1332,344"/>
<area shape="rect" href="usb_8c.html#a0589e9bb1b983864e59ba5d8cdca033f" title=" " alt="" coords="1174,383,1286,408"/>
<area shape="poly" title=" " alt="" coords="1347,366,1281,385,1279,379,1345,361"/>
<area shape="poly" title=" " alt="" coords="1163,327,1160,324,1141,298,1135,273,1129,248,1112,224,1096,214,1099,209,1116,220,1134,246,1140,272,1146,296,1164,320,1167,323"/>
<area shape="poly" title=" " alt="" coords="1171,379,1160,374,1106,342,1063,312,1066,308,1109,338,1163,369,1173,374"/>
</map>
</div>

</div>
</div>
<a id="a6a024f8bd13770fb4b83bd6994aa0e93" name="a6a024f8bd13770fb4b83bd6994aa0e93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a024f8bd13770fb4b83bd6994aa0e93">&#9670;&#160;</a></span>net_tx_handshake()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_tx_handshake </td>
          <td>(</td>
          <td class="paramtype">pi_socket_t *</td>          <td class="paramname"><span class="paramname"><em>ps</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  231</span>{</div>
<div class="line"><span class="lineno">  232</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msg1[] = <span class="comment">/* 22 bytes */</span></div>
<div class="line"><span class="lineno">  233</span>        <span class="stringliteral">&quot;\x90\x01\x00\x00\x00\x00\x00\x00\x00\x20\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  234</span>        <span class="stringliteral">&quot;\x08\x01\x00\x00\x00\x00\x00\x00\x00&quot;</span>;</div>
<div class="line"><span class="lineno">  235</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msg2[] = <span class="comment">/* 50 bytes */</span></div>
<div class="line"><span class="lineno">  236</span>        <span class="stringliteral">&quot;\x92\x01\x00\x00\x00\x00\x00\x00\x00\x20\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  237</span>        <span class="stringliteral">&quot;\x24\xff\xff\xff\xff\x00\x3c\x00\x3c\x40\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  238</span>        <span class="stringliteral">&quot;\x01\x00\x00\x00\xc0\xa8\xa5\x1e\x04\x01\x00\x00\x00&quot;</span></div>
<div class="line"><span class="lineno">  239</span>        <span class="stringliteral">&quot;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00&quot;</span>;</div>
<div class="line"><span class="lineno">  240</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msg3[] = <span class="comment">/* 8 bytes */</span></div>
<div class="line"><span class="lineno">  241</span>        <span class="stringliteral">&quot;\x93\x00\x00\x00\x00\x00\x00\x00&quot;</span>;</div>
<div class="line"><span class="lineno">  242</span>    pi_buffer_t *<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>;</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordtype">int</span> err;</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>    <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a> = <a class="code hl_function" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc">pi_buffer_new</a> (256);</div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a> == NULL) {</div>
<div class="line"><span class="lineno">  247</span>        errno = ENOMEM;</div>
<div class="line"><span class="lineno">  248</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="socket_8c.html#a415df518818c6813556c5607b29e833e">pi_set_error</a>(ps-&gt;sd, PI_ERR_GENERIC_MEMORY);</div>
<div class="line"><span class="lineno">  249</span>    }</div>
<div class="line"><span class="lineno">  250</span>    </div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">if</span> ((err = <a class="code hl_function" href="#a1670601987b6494055bea1a75938955e">net_tx</a>(ps, msg1, 22, 0)) &gt;= 0    &amp;&amp;</div>
<div class="line"><span class="lineno">  252</span>        (err = <a class="code hl_function" href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a>(ps, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, 256, 0)) &gt;= 0  &amp;&amp;</div>
<div class="line"><span class="lineno">  253</span>        (err = <a class="code hl_function" href="#a1670601987b6494055bea1a75938955e">net_tx</a>(ps, msg2, 50, 0)) &gt;= 0    &amp;&amp;</div>
<div class="line"><span class="lineno">  254</span>        (err = <a class="code hl_function" href="#a6c20ece547e720eec693b02b39774c8b">net_rx</a>(ps, <a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>, 256, 0)) &gt;= 0  &amp;&amp;</div>
<div class="line"><span class="lineno">  255</span>        (err = <a class="code hl_function" href="#a1670601987b6494055bea1a75938955e">net_tx</a>(ps, msg3, 8, 0)) &gt;= 0)</div>
<div class="line"><span class="lineno">  256</span>    {</div>
<div class="line"><span class="lineno">  257</span>        <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>);</div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  259</span>    }</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    <a class="code hl_function" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606">pi_buffer_free</a> (<a class="code hl_variable" href="pilot-debug_8c.html#a0ab27356885000c0b9430ce5f9b4a4ec">buffer</a>);</div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  263</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00767">buffer</a>, <a class="el" href="#l00407">net_rx()</a>, <a class="el" href="#l00305">net_tx()</a>, <a class="el" href="#l00103">pi_buffer_free()</a>, <a class="el" href="#l00031">pi_buffer_new()</a>, and <a class="el" href="#l01625">pi_set_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00239">pi_inet_connect()</a>, and <a class="el" href="#l00248">pi_usb_connect()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a6a024f8bd13770fb4b83bd6994aa0e93_cgraph.png" border="0" usemap="#anet_8c_a6a024f8bd13770fb4b83bd6994aa0e93_cgraph" alt=""/></div>
<map name="anet_8c_a6a024f8bd13770fb4b83bd6994aa0e93_cgraph" id="anet_8c_a6a024f8bd13770fb4b83bd6994aa0e93_cgraph">
<area shape="rect" title=" " alt="" coords="5,333,133,359"/>
<area shape="rect" href="net_8c.html#a6c20ece547e720eec693b02b39774c8b" title=" " alt="" coords="181,333,238,359"/>
<area shape="poly" title=" " alt="" coords="133,344,165,344,165,349,133,349"/>
<area shape="rect" href="pi-buffer_8c.html#af440579d61c8649154b0f0512c285606" title=" " alt="" coords="298,559,398,584"/>
<area shape="poly" title=" " alt="" coords="83,357,163,443,222,497,287,545,294,549,291,554,285,550,219,501,159,447,79,361"/>
<area shape="rect" href="pi-buffer_8c.html#a6775d9fcdb4fb3e02ce032337e1d10dc" title=" " alt="" coords="297,608,399,634"/>
<area shape="poly" title=" " alt="" coords="79,358,119,428,149,472,183,514,231,559,287,595,296,599,293,604,285,599,227,564,179,517,144,475,115,431,75,361"/>
<area shape="rect" href="socket_8c.html#a415df518818c6813556c5607b29e833e" title=" " alt="" coords="498,181,588,207"/>
<area shape="poly" title=" " alt="" coords="75,331,101,285,146,222,175,190,208,161,245,136,285,118,320,108,349,103,378,106,412,118,428,131,437,145,445,159,460,172,484,182,482,187,457,176,441,162,433,148,424,134,409,123,376,112,349,109,321,113,287,123,248,141,212,165,179,194,150,226,106,288,79,334"/>
<area shape="rect" href="net_8c.html#a1670601987b6494055bea1a75938955e" title=" " alt="" coords="181,208,238,234"/>
<area shape="poly" title=" " alt="" coords="83,331,180,242,184,246,87,335"/>
<area shape="rect" href="net_8c.html#aa1aa11043c32d2b6ea7a60cadadccb94" title=" " alt="" coords="309,509,387,535"/>
<area shape="poly" title=" " alt="" coords="219,358,251,428,271,464,288,488,302,499,298,503,284,492,266,467,246,430,214,361"/>
<area shape="rect" href="debug_8c.html#ac942525fcc03cc9c77dfe0628ade03b9" title=" " alt="" coords="495,459,591,484"/>
<area shape="poly" title=" " alt="" coords="219,358,245,398,264,420,287,437,335,457,385,468,435,473,480,474,480,479,435,478,384,474,333,462,285,442,261,424,241,402,215,360"/>
<area shape="rect" href="net_8c.html#a8bd2d98d388794603edc8c3ba56e7f85" title=" " alt="" coords="286,157,410,183"/>
<area shape="poly" title=" " alt="" coords="212,332,236,271,257,234,284,200,298,189,302,193,288,204,262,237,241,273,217,334"/>
<area shape="poly" title=" " alt="" coords="218,358,241,415,251,454,257,486,266,515,288,546,290,548,286,551,284,549,261,517,251,487,246,455,235,416,214,360"/>
<area shape="poly" title=" " alt="" coords="213,359,217,404,227,466,249,535,266,567,288,595,289,597,286,600,284,599,262,569,244,537,222,468,211,404,208,360"/>
<area shape="rect" href="socket_8c.html#a082db14a855d890be5f3e23b2ebb12e5" title=" " alt="" coords="297,308,399,334"/>
<area shape="poly" title=" " alt="" coords="238,338,282,330,283,336,239,344"/>
<area shape="poly" title=" " alt="" coords="214,332,240,288,260,264,285,244,333,220,386,205,437,196,483,192,483,197,438,201,387,210,335,225,287,248,264,268,245,291,219,334"/>
<area shape="rect" href="socket_8c.html#a0d734c11092254f751f06eda9d35d7b3" title=" " alt="" coords="306,259,390,284"/>
<area shape="poly" title=" " alt="" coords="227,331,285,293,294,289,296,293,287,298,229,335"/>
<area shape="rect" href="socket_8c.html#a8fe4e2f277f57446a40cc3ccf20dd368" title=" " alt="" coords="290,5,406,31"/>
<area shape="poly" title=" " alt="" coords="213,332,241,252,284,144,331,44,335,46,288,146,246,254,218,334"/>
<area shape="rect" href="socket_8c.html#ac046ff247e07d169f5445f2343a06da3" title=" " alt="" coords="297,357,399,383"/>
<area shape="poly" title=" " alt="" coords="239,348,283,356,282,361,238,354"/>
<area shape="poly" title=" " alt="" coords="387,509,479,485,481,490,389,515"/>
<area shape="rect" href="debug_8c.html#a11a6e0b0ea23a401ca6ce613d8664238" title=" " alt="" coords="683,459,774,484"/>
<area shape="poly" title=" " alt="" coords="591,469,668,469,668,474,591,474"/>
<area shape="rect" href="socket_8c.html#a32b1327c018fb882e8283498858bf8a0" title=" " alt="" coords="676,232,781,258"/>
<area shape="poly" title=" " alt="" coords="399,310,627,268,662,259,663,265,628,273,400,315"/>
<area shape="poly" title=" " alt="" coords="387,305,409,295,467,255,515,215,518,219,471,259,412,299,389,310"/>
<area shape="rect" href="socket_8c.html#aaeefde34eb00f88065ce7a51dd03a8e6" title=" " alt="" coords="474,333,612,359"/>
<area shape="poly" title=" " alt="" coords="400,325,459,333,458,338,400,330"/>
<area shape="rect" href="threadsafe_8c.html#a57e2304ed7e93f453b4fc66dff84c7c6" title=" " alt="" coords="836,183,941,208"/>
<area shape="poly" title=" " alt="" coords="772,229,829,211,830,216,774,234"/>
<area shape="rect" href="threadsafe_8c.html#a099d75170599d86ab20348b2af1e4da8" title=" " alt="" coords="829,232,948,258"/>
<area shape="poly" title=" " alt="" coords="781,242,813,242,813,248,781,248"/>
<area shape="rect" href="socket_8c.html#ad3e27d0710fe93c314822a548da2286d" title=" " alt="" coords="845,281,932,307"/>
<area shape="poly" title=" " alt="" coords="774,256,831,274,830,279,772,261"/>
<area shape="poly" title=" " alt="" coords="589,204,665,225,663,230,587,209"/>
<area shape="poly" title=" " alt="" coords="391,266,660,247,661,252,391,271"/>
<area shape="poly" title=" " alt="" coords="385,282,494,325,492,330,383,287"/>
<area shape="poly" title=" " alt="" coords="379,29,490,86,629,167,701,220,698,224,626,171,488,90,376,34"/>
<area shape="rect" href="socket_8c.html#af71c99cb810ee32e115acfeebcc4fdcd" title=" " alt="" coords="458,5,628,31"/>
<area shape="poly" title=" " alt="" coords="407,16,443,16,443,21,407,21"/>
<area shape="poly" title=" " alt="" coords="400,380,450,389,508,393,569,387,598,380,626,369,655,350,679,324,713,270,717,273,684,327,659,354,629,374,600,385,570,393,508,398,449,394,399,386"/>
<area shape="poly" title=" " alt="" coords="390,354,409,344,444,314,476,281,523,218,527,222,480,284,448,318,412,348,393,359"/>
<area shape="poly" title=" " alt="" coords="400,361,458,354,459,359,400,367"/>
<area shape="poly" title=" " alt="" coords="217,233,248,319,268,364,288,393,314,405,363,421,481,454,480,459,361,427,312,410,284,398,263,367,243,321,212,235"/>
<area shape="poly" title=" " alt="" coords="237,208,296,186,298,191,239,213"/>
<area shape="poly" title=" " alt="" coords="217,206,244,172,263,155,285,142,314,134,344,130,404,136,460,152,506,172,504,177,458,157,403,141,344,136,315,139,287,147,266,160,247,176,221,209"/>
<area shape="poly" title=" " alt="" coords="239,229,298,250,296,255,237,234"/>
<area shape="poly" title=" " alt="" coords="216,206,284,99,325,42,330,45,288,102,221,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="net_8c_a6a024f8bd13770fb4b83bd6994aa0e93_icgraph.png" border="0" usemap="#anet_8c_a6a024f8bd13770fb4b83bd6994aa0e93_icgraph" alt=""/></div>
<map name="anet_8c_a6a024f8bd13770fb4b83bd6994aa0e93_icgraph" id="anet_8c_a6a024f8bd13770fb4b83bd6994aa0e93_icgraph">
<area shape="rect" title=" " alt="" coords="1290,242,1417,268"/>
<area shape="rect" href="inet_8c.html#a11fa9878cd5a0b710987f3b3468fbbc8" title=" " alt="" coords="1130,217,1242,242"/>
<area shape="poly" title=" " alt="" coords="1274,246,1242,241,1243,235,1275,240"/>
<area shape="rect" href="usb_8c.html#a0589e9bb1b983864e59ba5d8cdca033f" title=" " alt="" coords="1130,266,1242,292"/>
<area shape="poly" title=" " alt="" coords="1275,269,1243,274,1242,268,1274,264"/>
<area shape="rect" href="inet_8c.html#a4eb490f2821f8a144bd9940e66d11354" title=" " alt="" coords="977,217,1082,242"/>
<area shape="poly" title=" " alt="" coords="1114,232,1082,232,1082,227,1114,227"/>
<area shape="rect" href="socket_8c.html#a970e724b72986d947471a345e67a119b" title=" " alt="" coords="831,242,929,268"/>
<area shape="poly" title=" " alt="" coords="962,244,930,249,929,244,961,239"/>
<area shape="rect" href="socket_8c.html#affbe18c8f2af556dffc3ac354fbf957d" title=" " alt="" coords="710,145,772,170"/>
<area shape="poly" title=" " alt="" coords="847,235,759,173,762,169,850,231"/>
<area shape="rect" href="socket_8c.html#a941d3345fc005dbd4583c01aedf0504b" title=" " alt="" coords="699,292,783,317"/>
<area shape="poly" title=" " alt="" coords="828,276,780,293,779,288,826,271"/>
<area shape="rect" href="pisock__wrap_8c.html#a93d21fa0d73dd33057be113819f38db4" title=" " alt="" coords="535,21,640,46"/>
<area shape="poly" title=" " alt="" coords="720,133,689,96,649,60,630,49,633,45,652,55,693,92,724,130"/>
<area shape="rect" href="connect_8c.html#a2e5febae39ff2bb757f58471f231d8a6" title=" " alt="" coords="538,70,637,96"/>
<area shape="poly" title=" " alt="" coords="704,139,650,109,625,99,627,94,652,105,707,134"/>
<area shape="rect" href="libjpisock_8c.html#a201020848015baf4f5015d6d0f736988" title=" " alt="" coords="538,120,637,145"/>
<area shape="poly" title=" " alt="" coords="694,153,637,143,638,138,694,147"/>
<area shape="rect" href="userland_8c.html#a21d841df63f1c93b1fc98b4b4a8b0bbc" title=" " alt="" coords="542,169,633,194"/>
<area shape="poly" title=" " alt="" coords="695,167,634,177,633,172,694,162"/>
<area shape="rect" href="pilot-debug_8c.html#a0dacc8d2e2dac4868581ef1931b0cee1" title=" " alt="" coords="550,218,625,244"/>
<area shape="poly" title=" " alt="" coords="705,181,652,209,627,220,625,215,650,205,703,176"/>
<area shape="rect" href="libjpisock_8c.html#a461cdfef86fecffb4449d69c271573e7" title=" " alt="" coords="323,5,476,46"/>
<area shape="poly" title=" " alt="" coords="529,115,523,110,508,97,498,85,489,72,475,60,456,49,459,44,478,56,493,69,502,82,512,94,526,106,532,110"/>
<area shape="rect" href="pitcl_8c.html#aa7a47547eb5440bc9f883afba9254f65" title=" " alt="" coords="363,70,436,96"/>
<area shape="poly" title=" " alt="" coords="529,164,523,160,508,147,498,134,489,121,475,109,436,93,438,88,478,105,493,118,503,130,512,143,526,156,532,159"/>
<area shape="rect" href="pitcl_8c.html#afa4522a01803f57bd2b147fae9c0f225" title=" " alt="" coords="349,120,450,145"/>
<area shape="poly" title=" " alt="" coords="526,168,450,148,451,143,527,163"/>
<area shape="rect" href="pilot-wav_8c.html#a79213f9623d93348a3a7f9ba790963c9" title=" " alt="" coords="364,169,435,194"/>
<area shape="poly" title=" " alt="" coords="526,184,436,184,436,179,526,179"/>
<area shape="rect" href="pilot-install-memo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="375,218,424,244"/>
<area shape="poly" title=" " alt="" coords="528,200,425,227,424,222,526,195"/>
<area shape="rect" href="pilot-hinotes_8c.html#a217dbf8b442f20279ea00b898af96f52" title=" " alt="" coords="375,268,424,293"/>
<area shape="poly" title=" " alt="" coords="532,204,526,208,512,220,503,233,493,246,478,259,451,271,425,279,424,273,449,266,475,254,489,242,498,230,508,217,523,204,529,199"/>
<area shape="rect" href="pilot-addresses_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="375,317,424,342"/>
<area shape="poly" title=" " alt="" coords="530,204,526,207,509,232,503,257,497,282,490,295,478,308,452,322,425,330,424,324,450,318,475,304,485,292,492,280,498,255,504,230,522,204,526,200"/>
<area shape="rect" href="pitcl_8c.html#ab8a87c2a8cbabc03b87303f4bc2e9601" title=" " alt="" coords="177,70,273,96"/>
<area shape="poly" title=" " alt="" coords="336,117,272,99,274,94,338,112"/>
<area shape="rect" href="pitcl_8c.html#addda8a7f5fdbf7d4efee71dde6b810d9" title=" " alt="" coords="175,120,275,145"/>
<area shape="poly" title=" " alt="" coords="333,135,275,135,275,130,333,130"/>
<area shape="rect" href="pitcl_8c.html#a96c8407b29d4a8f6613f0d136322f5b4" title=" " alt="" coords="5,96,127,121"/>
<area shape="poly" title=" " alt="" coords="162,96,128,101,127,96,161,90"/>
<area shape="poly" title=" " alt="" coords="159,125,126,120,127,115,160,120"/>
<area shape="rect" href="pilot-wav_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="200,169,250,194"/>
<area shape="poly" title=" " alt="" coords="348,184,250,184,250,179,348,179"/>
<area shape="rect" href="pisock__wrap_8c.html#a77396b6722dba076dac73dfce5847361" title=" " alt="" coords="524,268,651,293"/>
<area shape="poly" title=" " alt="" coords="683,298,650,293,651,288,684,293"/>
<area shape="rect" href="pilot-debugsh_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="563,317,612,342"/>
<area shape="poly" title=" " alt="" coords="684,316,613,328,612,323,683,311"/>
<area shape="rect" href="pilot-nredir_8c.html#ac0f2228420376f4db7e1274f2b41667c" title=" " alt="" coords="563,366,612,392"/>
<area shape="poly" title=" " alt="" coords="707,328,652,357,614,373,612,368,650,353,704,323"/>
<area shape="rect" href="usb_8c.html#a68c518ca08dac477013ed3b56ee8c174" title=" " alt="" coords="977,266,1082,292"/>
<area shape="poly" title=" " alt="" coords="1114,282,1082,282,1082,276,1114,276"/>
<area shape="poly" title=" " alt="" coords="961,271,929,265,930,260,962,266"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ef3825c9845ea6880aaea633307886b2.html">libpisock</a></li><li class="navelem"><a class="el" href="net_8c.html">net.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
